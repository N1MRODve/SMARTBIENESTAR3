import{u as N}from"./index-DPgCtSRZ.js";import{s as z}from"./dialog.esm-C9zKQD4N.js";import{d as y,B as G,w as X,o as l,h as c,j as e,t as i,I as C,b as A,F as k,y as E,E as $,q as P,L as Y,K as Z,H as R,V as q,O as F,v as x,z as g,G as ee,u as T,M as O,c as te,l as oe}from"./vue-vendor-DLSXyIw7.js";import{E as H}from"./eye-D40qS93y.js";import{d as se,m as U,F as L,o as ae,q as ie,T as ne,B as K,C as re}from"./index-D33O_vwf.js";import{T as le}from"./trash-2-OdR_kCZk.js";import{B as de}from"./building-26PfV7_i.js";import{I as ce}from"./info-DXoeYcFN.js";import{T as ue}from"./target-DHY9vHaX.js";import{M as me}from"./mail-BlTou-j4.js";import{A as pe}from"./alert-triangle-Dg4Dpai8.js";import"./supabase-B7V2753y.js";/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=se("CopyIcon",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),w=[{id:1,titulo:"Plan de Acci√≥n Post Clima360",tipo:"Plan de mejora",fecha_envio:"2025-10-10",destinatarios:["RRHH","Marketing","Ventas"],roles:["Todos los empleados"],estado:"Enviado",interacciones:86,contenido:"Tras los resultados de la encuesta Clima360, implementaremos acciones espec√≠ficas para fortalecer el liderazgo y la comunicaci√≥n interna. Estas medidas incluyen talleres de liderazgo consciente, mejora de canales de comunicaci√≥n y espacios de feedback continuo.",fecha_creacion:"2025-10-09",creador:"Admin Sistema"},{id:2,titulo:"Reconocimiento del Equipo de Producci√≥n",tipo:"Felicitaci√≥n",fecha_envio:"2025-09-22",destinatarios:["Producci√≥n"],roles:["Todos los empleados"],estado:"Enviado",interacciones:91,contenido:"Felicitamos al equipo de Producci√≥n por su excelente clima laboral y compromiso demostrado durante el √∫ltimo trimestre. Los resultados de la encuesta reflejan un alto nivel de satisfacci√≥n y cohesi√≥n de equipo. ¬°Gracias por vuestro trabajo!",fecha_creacion:"2025-09-21",creador:"Admin Sistema"},{id:3,titulo:"Nuevas Iniciativas de Bienestar 2025",tipo:"Comunicaci√≥n General",fecha_envio:"2025-11-01",destinatarios:["RRHH","Marketing","Ventas","Producci√≥n","Tecnolog√≠a"],roles:["Todos los empleados"],estado:"Programado",interacciones:0,contenido:"Agradecemos la participaci√≥n en las encuestas de clima laboral. A partir de noviembre, lanzaremos nuevos programas de bienestar mental, talleres de liderazgo y espacios de reconocimiento entre equipos. Pronto compartiremos el calendario completo.",fecha_creacion:"2025-10-12",creador:"Admin Sistema"},{id:4,titulo:"Resultados Encuesta Q3 - Borrador",tipo:"Plan de mejora",fecha_envio:null,destinatarios:["RRHH"],roles:["L√≠deres de √°rea"],estado:"Borrador",interacciones:0,contenido:"Borrador del comunicado con los resultados principales del tercer trimestre. Pendiente de revisi√≥n y aprobaci√≥n antes de env√≠o.",fecha_creacion:"2025-10-13",creador:"Admin Sistema"},{id:5,titulo:"Lanzamiento Programa Balance Vida-Trabajo",tipo:"Comunicaci√≥n General",fecha_envio:"2025-09-15",destinatarios:["RRHH","Marketing","Tecnolog√≠a"],roles:["Todos los empleados"],estado:"Enviado",interacciones:78,contenido:"Estamos encantados de anunciar el lanzamiento del Programa de Balance Vida-Trabajo, dise√±ado para ayudar a gestionar el tiempo de manera efectiva y establecer l√≠mites saludables. Incluye talleres virtuales, sesiones presenciales y coaching individual.",fecha_creacion:"2025-09-14",creador:"Admin Sistema"}],xe=[{id:"mejora",nombre:"Plan de Mejora",icono:"üìä",cuerpo:`Tras los resultados de {encuesta}, implementaremos medidas para fortalecer el bienestar organizacional.

Estas acciones incluyen:
- Talleres de desarrollo
- Mejora de procesos internos
- Espacios de feedback continuo

Agradecer vuestra participaci√≥n y compromiso.`},{id:"felicitacion",nombre:"Felicitaci√≥n",icono:"üéâ",cuerpo:`¬°Enhorabuena!

Los resultados de {encuesta} reflejan un alto compromiso y excelente clima laboral. Gracias por vuestra participaci√≥n y dedicaci√≥n.

Seguiremos trabajando juntos para mantener este nivel de excelencia.`},{id:"general",nombre:"Comunicaci√≥n General",icono:"üì¢",cuerpo:`Agradecemos la participaci√≥n en la encuesta {encuesta}.

En breve compartiremos:
- Resultados principales
- Nuevas iniciativas
- Calendario de actividades

Gracias por vuestra colaboraci√≥n.`},{id:"resultados",nombre:"Resultados de Encuesta",icono:"üìà",cuerpo:`Compartimos los resultados de {encuesta}:

Puntos destacados:
- Fortalezas identificadas
- √Åreas de oportunidad
- Pr√≥ximos pasos

Gracias a todos los participantes por vuestros valiosos aportes.`},{id:"accion",nombre:"Plan de Acci√≥n",icono:"‚úÖ",cuerpo:`Bas√°ndonos en los resultados de {encuesta}, hemos dise√±ado un plan de acci√≥n:

1. Implementaci√≥n de talleres espec√≠ficos
2. Mejora de canales de comunicaci√≥n
3. Programas de reconocimiento
4. Seguimiento trimestral

Cada departamento recibir√° informaci√≥n espec√≠fica.`}],ve=["RRHH","Marketing","Ventas","Producci√≥n","Tecnolog√≠a","Finanzas","Operaciones","Atenci√≥n al Cliente"],be=["Todos los empleados","L√≠deres de √°rea","Solo RRHH","Mandos intermedios","Direcci√≥n"];let Q=6;const fe=m=>{const n={id:Q++,...m,fecha_creacion:new Date().toISOString().split("T")[0],creador:"Admin Sistema",interacciones:0};return w.push(n),n},ye=(m,n)=>{const b=w.find(s=>s.id===m);return b?(Object.assign(b,n),b):null},he=m=>{const n=w.findIndex(b=>b.id===m);return n!==-1?(w.splice(n,1),!0):!1},_e=m=>w.find(n=>n.id===m),we=m=>{const n=_e(m);if(n){const b={...n,id:Q++,titulo:`${n.titulo} (Copia)`,estado:"Borrador",fecha_envio:null,fecha_creacion:new Date().toISOString().split("T")[0],interacciones:0};return w.push(b),b}return null},J=m=>({Enviado:{bg:"bg-green-50",text:"text-green-700",badge:"bg-green-100 text-green-800",border:"border-green-200"},Borrador:{bg:"bg-gray-50",text:"text-gray-700",badge:"bg-gray-100 text-gray-800",border:"border-gray-200"},Programado:{bg:"bg-yellow-50",text:"text-yellow-700",badge:"bg-yellow-100 text-yellow-800",border:"border-yellow-200"}})[m]||{bg:"bg-gray-50",text:"text-gray-700",badge:"bg-gray-100 text-gray-800",border:"border-gray-200"},W=m=>m>=80?"text-green-600":m>=60?"text-orange-600":"text-red-600",$e=()=>{const m=w.filter(o=>o.estado==="Enviado"),n=m.reduce((o,v)=>o+v.interacciones,0),b=m.length>0?Math.round(n/m.length):0,s={};w.forEach(o=>{o.destinatarios.forEach(v=>{s[v]=(s[v]||0)+o.interacciones})});const p=Object.entries(s).sort((o,v)=>v[1]-o[1]).slice(0,2).map(([o])=>o);return{totalEnviados:m.length,totalProgramados:w.filter(o=>o.estado==="Programado").length,totalBorradores:w.filter(o=>o.estado==="Borrador").length,promedioLectura:b,departamentosActivos:p.join(" y ")||"N/A",datosGrafico:m.map(o=>({titulo:o.titulo.substring(0,30)+"...",interacciones:o.interacciones}))}},Ce={class:"bg-white shadow-sm rounded-xl p-6 space-y-6"},ke={class:"flex items-center justify-between"},Ee={class:"text-xl font-bold text-gray-900"},je={key:0,class:"text-sm text-gray-600"},Pe={class:"font-semibold"},Te={class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-3"},Ae=["onClick"],Se={class:"text-3xl mb-2"},Ie={class:"text-xs font-medium text-gray-900"},De={class:"text-xs text-gray-500 mt-1"},Ve={class:"grid grid-cols-2 md:grid-cols-4 gap-3"},Be=["value"],Me={class:"text-sm font-medium text-gray-900"},Re={class:"grid grid-cols-2 md:grid-cols-3 gap-3"},Fe=["value"],ze={class:"text-sm font-medium text-gray-900"},Ge={class:"flex items-center gap-4"},He={class:"flex items-center gap-2"},Le={class:"flex items-center gap-2"},Ue={class:"flex items-center gap-2"},qe={key:0,class:"mt-3"},Ne=["min"],Oe={class:"flex items-center justify-between pt-4 border-t border-gray-200"},Ke={class:"flex items-center gap-3"},Qe=["disabled"],Je={class:"flex items-center gap-3"},We={class:"w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center"},Xe={class:"space-y-6"},Ye={class:"bg-gradient-to-r from-indigo-600 to-indigo-700 text-white p-6 rounded-lg"},Ze={class:"text-2xl font-bold mb-2"},et={class:"text-sm text-indigo-100"},tt={class:"bg-gray-50 p-6 rounded-lg"},ot={class:"text-gray-900 whitespace-pre-wrap"},st={class:"bg-gray-100 p-4 rounded-lg text-sm text-gray-600"},at={class:"flex flex-wrap gap-2"},it={__name:"FormularioCrearComunicado",props:{comunicadoInicial:{type:Object,default:null}},emits:["comunicado-creado","cancelar"],setup(m,{emit:n}){const b=m,s=n,p=N(),o=y(xe),v=y(ve),S=y(be),j=y(null),f=y("inmediato"),I=y(!1),d=y({titulo:"",tipo:"",contenido:"",destinatarios:[],roles:[],fecha_envio:null,estado:"Enviado"}),B=G(()=>new Date().toISOString().split("T")[0]),D=G(()=>d.value.titulo.trim()!==""&&d.value.tipo!==""&&d.value.contenido.trim()!==""&&d.value.destinatarios.length>0&&d.value.roles.length>0),M=a=>{j.value=a,d.value.contenido=a.cuerpo,d.value.tipo||(d.value.tipo=a.nombre)},V=()=>{if(!D.value){p.warning("Completa todos los campos requeridos para ver la vista previa",{timeout:3e3});return}I.value=!0},_=()=>{if(!D.value)return;let a="Enviado",t=new Date().toISOString().split("T")[0];f.value==="borrador"?(a="Borrador",t=null):f.value==="programado"&&(a="Programado",t=d.value.fecha_envio);const r={...d.value,estado:a,fecha_envio:t};b.comunicadoInicial?ye(b.comunicadoInicial.id,r):fe(r);const h=d.value.destinatarios.length;a==="Enviado"?p.success(`Comunicado enviado correctamente a ${h} departamento${h!==1?"s":""}`,{timeout:4e3}):a==="Programado"?p.info(`Comunicado programado para ${t}`,{timeout:4e3}):p.success("Comunicado guardado como borrador",{timeout:3e3}),u(),s("comunicado-creado")},u=()=>{d.value={titulo:"",tipo:"",contenido:"",destinatarios:[],roles:[],fecha_envio:null,estado:"Enviado"},j.value=null,f.value="inmediato"};return X(()=>b.comunicadoInicial,a=>{a?(d.value={titulo:a.titulo,tipo:a.tipo,contenido:a.contenido,destinatarios:[...a.destinatarios],roles:[...a.roles],fecha_envio:a.fecha_envio,estado:a.estado},a.estado==="Borrador"?f.value="borrador":a.estado==="Programado"?f.value="programado":f.value="inmediato"):u()},{immediate:!0}),(a,t)=>(l(),c("div",Ce,[e("div",ke,[e("h2",Ee,i(m.comunicadoInicial?"Editar comunicado":"Crear nuevo comunicado"),1),m.comunicadoInicial?(l(),c("div",je,[t[11]||(t[11]=C(" Editando: ")),e("span",Pe,i(m.comunicadoInicial.titulo),1)])):A("",!0)]),e("form",{onSubmit:ee(_,["prevent"]),class:"space-y-6"},[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Seleccionar plantilla ",-1)),e("div",Te,[(l(!0),c(k,null,E(o.value,r=>{var h;return l(),c("button",{key:r.id,type:"button",onClick:Ko=>M(r),class:$(["p-4 rounded-lg border-2 transition-all duration-200 hover:border-indigo-300 hover:shadow-md text-center",((h=j.value)==null?void 0:h.id)===r.id?"border-indigo-600 bg-indigo-50":"border-gray-200 bg-white"])},[e("div",Se,i(r.icono),1),e("div",Ie,i(r.nombre),1)],10,Ae)}),128))])]),e("div",null,[t[14]||(t[14]=e("label",{for:"tipo",class:"block text-sm font-medium text-gray-700 mb-2"},[C(" Tipo de comunicado "),e("span",{class:"text-red-500"},"*")],-1)),P(e("select",{id:"tipo","onUpdate:modelValue":t[0]||(t[0]=r=>d.value.tipo=r),required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-4 py-2.5 text-gray-900"},t[13]||(t[13]=[Z('<option value="">Selecciona un tipo</option><option value="Plan de mejora">Plan de mejora</option><option value="Felicitaci√≥n">Felicitaci√≥n</option><option value="Comunicaci√≥n General">Comunicaci√≥n General</option><option value="Resultados">Resultados</option><option value="Acci√≥n">Acci√≥n</option>',6)]),512),[[Y,d.value.tipo]])]),e("div",null,[t[15]||(t[15]=e("label",{for:"titulo",class:"block text-sm font-medium text-gray-700 mb-2"},[C(" T√≠tulo del comunicado "),e("span",{class:"text-red-500"},"*")],-1)),P(e("input",{id:"titulo","onUpdate:modelValue":t[1]||(t[1]=r=>d.value.titulo=r),type:"text",required:"",placeholder:"Ej: Plan de Acci√≥n Post Clima360",class:"w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-4 py-2.5 text-gray-900"},null,512),[[R,d.value.titulo]])]),e("div",null,[t[16]||(t[16]=e("label",{for:"contenido",class:"block text-sm font-medium text-gray-700 mb-2"},[C(" Contenido "),e("span",{class:"text-red-500"},"*")],-1)),P(e("textarea",{id:"contenido","onUpdate:modelValue":t[2]||(t[2]=r=>d.value.contenido=r),required:"",rows:"8",placeholder:"Escribe el contenido del comunicado...",class:"w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-4 py-2.5 text-gray-900 resize-none"},null,512),[[R,d.value.contenido]]),e("p",De,i(d.value.contenido.length)+" caracteres ",1)]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[C(" Destinatarios - Departamentos "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Ve,[(l(!0),c(k,null,E(v.value,r=>(l(),c("label",{key:r,class:$(["flex items-center gap-2 p-3 rounded-lg border-2 transition-all cursor-pointer hover:border-indigo-300",d.value.destinatarios.includes(r)?"border-indigo-600 bg-indigo-50":"border-gray-200 bg-white"])},[P(e("input",{type:"checkbox",value:r,"onUpdate:modelValue":t[3]||(t[3]=h=>d.value.destinatarios=h),class:"rounded text-indigo-600 focus:ring-indigo-500"},null,8,Be),[[q,d.value.destinatarios]]),e("span",Me,i(r),1)],2))),128))])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[C(" Destinatarios - Roles "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Re,[(l(!0),c(k,null,E(S.value,r=>(l(),c("label",{key:r,class:$(["flex items-center gap-2 p-3 rounded-lg border-2 transition-all cursor-pointer hover:border-purple-300",d.value.roles.includes(r)?"border-purple-600 bg-purple-50":"border-gray-200 bg-white"])},[P(e("input",{type:"checkbox",value:r,"onUpdate:modelValue":t[4]||(t[4]=h=>d.value.roles=h),class:"rounded text-purple-600 focus:ring-purple-500"},null,8,Fe),[[q,d.value.roles]]),e("span",ze,i(r),1)],2))),128))])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Fecha de env√≠o ",-1)),e("div",Ge,[e("label",He,[P(e("input",{type:"radio","onUpdate:modelValue":t[5]||(t[5]=r=>f.value=r),value:"inmediato",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[F,f.value]]),t[19]||(t[19]=e("span",{class:"text-sm font-medium text-gray-900"},"Enviar inmediatamente",-1))]),e("label",Le,[P(e("input",{type:"radio","onUpdate:modelValue":t[6]||(t[6]=r=>f.value=r),value:"programado",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[F,f.value]]),t[20]||(t[20]=e("span",{class:"text-sm font-medium text-gray-900"},"Programar env√≠o",-1))]),e("label",Ue,[P(e("input",{type:"radio","onUpdate:modelValue":t[7]||(t[7]=r=>f.value=r),value:"borrador",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[F,f.value]]),t[21]||(t[21]=e("span",{class:"text-sm font-medium text-gray-900"},"Guardar como borrador",-1))])]),f.value==="programado"?(l(),c("div",qe,[P(e("input",{type:"date","onUpdate:modelValue":t[8]||(t[8]=r=>d.value.fecha_envio=r),min:B.value,class:"rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-4 py-2.5 text-gray-900"},null,8,Ne),[[R,d.value.fecha_envio]])])):A("",!0)]),e("div",Oe,[e("button",{type:"button",onClick:V,class:"flex items-center gap-2 px-5 py-2.5 rounded-lg text-gray-700 bg-gray-100 hover:bg-gray-200 transition-colors font-medium"},[x(g(H),{class:"h-5 w-5"}),t[23]||(t[23]=C(" Vista previa "))]),e("div",Ke,[m.comunicadoInicial?(l(),c("button",{key:0,type:"button",onClick:t[9]||(t[9]=r=>a.$emit("cancelar")),class:"px-5 py-2.5 rounded-lg text-gray-700 bg-gray-100 hover:bg-gray-200 transition-colors font-medium"}," Cancelar ")):A("",!0),e("button",{type:"submit",disabled:!D.value,class:"flex items-center gap-2 px-5 py-2.5 rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed"},[x(g(U),{class:"h-5 w-5"}),C(" "+i(f.value==="borrador"?"Guardar borrador":"Enviar comunicado"),1)],8,Qe)])])],32),x(g(z),{visible:I.value,"onUpdate:visible":t[10]||(t[10]=r=>I.value=r),modal:"",dismissableMask:!0,style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:T(()=>[e("div",Je,[e("div",We,[x(g(H),{class:"h-6 w-6 text-indigo-600"})]),t[24]||(t[24]=e("div",null,[e("h3",{class:"text-xl font-bold text-gray-900"}," Vista previa del comunicado "),e("p",{class:"text-sm text-gray-600"}," As√≠ ver√°n el comunicado los destinatarios ")],-1))])]),default:T(()=>[e("div",Xe,[e("div",Ye,[e("h2",Ze,i(d.value.titulo),1),e("p",et,i(d.value.tipo),1)]),e("div",tt,[e("p",ot,i(d.value.contenido),1)]),e("div",st,[t[25]||(t[25]=e("p",{class:"font-semibold mb-2"},"Enviado a:",-1)),e("div",at,[(l(!0),c(k,null,E(d.value.destinatarios,r=>(l(),c("span",{key:r,class:"px-2 py-1 bg-white rounded text-xs"},i(r),1))),128))])])])]),_:1},8,["visible"])]))}},nt={class:"bg-white shadow-sm rounded-xl overflow-hidden"},rt={class:"p-6 border-b border-gray-200"},lt={class:"flex items-center justify-between"},dt={class:"flex items-center gap-2 px-4 py-2 bg-indigo-100 rounded-full"},ct={class:"text-sm font-semibold text-indigo-700"},ut={class:"overflow-x-auto"},mt={class:"min-w-full divide-y divide-gray-200"},pt={class:"bg-white divide-y divide-gray-200"},gt={class:"px-6 py-4 whitespace-nowrap"},xt={class:"flex items-center gap-2 text-sm text-gray-900"},vt={class:"px-6 py-4"},bt={class:"max-w-xs"},ft={class:"text-sm font-semibold text-gray-900 truncate"},yt={class:"px-6 py-4 whitespace-nowrap"},ht={class:"text-xs text-gray-600"},_t={class:"px-6 py-4"},wt={class:"flex flex-wrap gap-1 max-w-xs"},$t={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700"},Ct={class:"px-6 py-4 whitespace-nowrap"},kt={class:"px-6 py-4 whitespace-nowrap"},Et={class:"flex items-center gap-2"},jt={class:"flex-1 bg-gray-200 rounded-full h-2 w-16"},Pt={class:"px-6 py-4 whitespace-nowrap"},Tt={class:"flex items-center gap-2"},At=["onClick"],St=["onClick"],It=["onClick"],Dt={key:0,class:"text-center py-12"},Vt={class:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"},Bt={__name:"HistorialComunicados",emits:["ver-comunicado","duplicar-comunicado","eliminar-comunicado"],setup(m){const n=y(w),b=s=>s?new Date(s+"T00:00:00").toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"}):"Sin enviar";return(s,p)=>(l(),c("div",nt,[e("div",rt,[e("div",lt,[p[0]||(p[0]=e("h2",{class:"text-xl font-bold text-gray-900"}," Historial de Comunicados ",-1)),e("div",dt,[x(g(L),{class:"h-5 w-5 text-indigo-600"}),e("span",ct,i(n.value.length)+" comunicado"+i(n.value.length!==1?"s":""),1)])])]),e("div",ut,[e("table",mt,[p[1]||(p[1]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Fecha "),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," T√≠tulo "),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tipo "),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Destinatarios "),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Estado "),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Interacciones "),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Acciones ")])],-1)),e("tbody",pt,[(l(!0),c(k,null,E(n.value,o=>(l(),c("tr",{key:o.id,class:"hover:bg-gray-50 transition-colors"},[e("td",gt,[e("div",xt,[x(g(ae),{class:"h-4 w-4 text-gray-400"}),C(" "+i(b(o.fecha_envio)),1)])]),e("td",vt,[e("div",bt,[e("p",ft,i(o.titulo),1)])]),e("td",yt,[e("span",ht,i(o.tipo),1)]),e("td",_t,[e("div",wt,[(l(!0),c(k,null,E(o.destinatarios.slice(0,2),(v,S)=>(l(),c("span",{key:v,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-indigo-50 text-indigo-700"},i(v),1))),128)),o.destinatarios.length>2?(l(),c("span",$t," +"+i(o.destinatarios.length-2),1)):A("",!0)])]),e("td",Ct,[e("span",{class:$(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",g(J)(o.estado).badge])},i(o.estado),3)]),e("td",kt,[e("div",Et,[e("div",jt,[e("div",{class:$(["h-2 rounded-full transition-all duration-300",o.interacciones>=80?"bg-green-500":o.interacciones>=60?"bg-orange-500":"bg-red-500"]),style:O({width:`${o.interacciones}%`})},null,6)]),e("span",{class:$(["text-sm font-semibold",g(W)(o.interacciones)])},i(o.interacciones)+"% ",3)])]),e("td",Pt,[e("div",Tt,[e("button",{onClick:v=>s.$emit("ver-comunicado",o),class:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Ver comunicado"},[x(g(H),{class:"h-5 w-5"})],8,At),e("button",{onClick:v=>s.$emit("duplicar-comunicado",o),class:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Duplicar"},[x(g(ge),{class:"h-5 w-5"})],8,St),e("button",{onClick:v=>s.$emit("eliminar-comunicado",o),class:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Eliminar"},[x(g(le),{class:"h-5 w-5"})],8,It)])])]))),128))])])]),n.value.length===0?(l(),c("div",Dt,[e("div",Vt,[x(g(L),{class:"h-8 w-8 text-gray-400"})]),p[2]||(p[2]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"}," No hay comunicados registrados ",-1)),p[3]||(p[3]=e("p",{class:"text-gray-600"}," Los comunicados aparecer√°n aqu√≠ una vez creados ",-1))])):A("",!0)]))}},Mt={class:"space-y-6"},Rt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},Ft={class:"bg-white rounded-lg shadow-sm p-6 text-center border-l-4 border-indigo-500"},zt={class:"flex items-center justify-center mb-3"},Gt={class:"text-3xl font-bold text-gray-900"},Ht={class:"bg-white rounded-lg shadow-sm p-6 text-center border-l-4 border-yellow-500"},Lt={class:"flex items-center justify-center mb-3"},Ut={class:"text-3xl font-bold text-gray-900"},qt={class:"bg-white rounded-lg shadow-sm p-6 text-center border-l-4 border-green-500"},Nt={class:"flex items-center justify-center mb-3"},Ot={class:"text-3xl font-bold text-green-700"},Kt={class:"bg-white rounded-lg shadow-sm p-6 text-center border-l-4 border-purple-500"},Qt={class:"flex items-center justify-center mb-3"},Jt={class:"text-sm font-bold text-gray-900 mt-2"},Wt={class:"bg-white rounded-xl shadow-sm p-6"},Xt={key:0,class:"space-y-4"},Yt={class:"flex items-center justify-between text-sm"},Zt={class:"font-medium text-gray-700"},eo={class:"w-full bg-gray-200 rounded-full h-3"},to={key:1,class:"text-center py-8"},oo={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},so={class:"bg-white rounded-xl shadow-sm p-6"},ao={class:"space-y-3"},io={class:"flex items-center justify-between p-3 bg-green-50 rounded-lg"},no={class:"text-lg font-bold text-green-700"},ro={class:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg"},lo={class:"text-lg font-bold text-yellow-700"},co={class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},uo={class:"text-lg font-bold text-gray-700"},mo={class:"bg-white rounded-xl shadow-sm p-6"},po={class:"space-y-4"},go={class:"flex items-start gap-3 p-3 bg-blue-50 rounded-lg"},xo={class:"text-xs text-blue-700 mt-1"},vo={class:"flex items-start gap-3 p-3 bg-green-50 rounded-lg"},bo={class:"text-xs text-green-700 mt-1"},fo={class:"flex items-start gap-3 p-3 bg-purple-50 rounded-lg"},yo={__name:"AnaliticaDifusion",setup(m){const n=G(()=>$e());return(b,s)=>(l(),c("div",Mt,[e("div",Rt,[e("div",Ft,[e("div",zt,[x(g(U),{class:"h-8 w-8 text-indigo-600"})]),s[0]||(s[0]=e("p",{class:"text-sm text-gray-600 mb-1"},"Comunicados enviados",-1)),e("p",Gt,i(n.value.totalEnviados),1)]),e("div",Ht,[e("div",Lt,[x(g(ie),{class:"h-8 w-8 text-yellow-600"})]),s[1]||(s[1]=e("p",{class:"text-sm text-gray-600 mb-1"},"Programados",-1)),e("p",Ut,i(n.value.totalProgramados),1)]),e("div",qt,[e("div",Nt,[x(g(ne),{class:"h-8 w-8 text-green-600"})]),s[2]||(s[2]=e("p",{class:"text-sm text-gray-600 mb-1"},"Tasa promedio de lectura",-1)),e("p",Ot,i(n.value.promedioLectura)+"%",1)]),e("div",Kt,[e("div",Qt,[x(g(de),{class:"h-8 w-8 text-purple-600"})]),s[3]||(s[3]=e("p",{class:"text-sm text-gray-600 mb-1"},"Departamentos activos",-1)),e("p",Jt,i(n.value.departamentosActivos),1)])]),e("div",Wt,[s[5]||(s[5]=e("h3",{class:"text-lg font-bold text-gray-900 mb-6"}," Interacciones por Comunicado ",-1)),n.value.datosGrafico.length>0?(l(),c("div",Xt,[(l(!0),c(k,null,E(n.value.datosGrafico,(p,o)=>(l(),c("div",{key:o,class:"space-y-2"},[e("div",Yt,[e("span",Zt,i(p.titulo),1),e("span",{class:$(["font-bold",p.interacciones>=80?"text-green-600":p.interacciones>=60?"text-orange-600":"text-red-600"])},i(p.interacciones)+"% ",3)]),e("div",eo,[e("div",{class:$(["h-3 rounded-full transition-all duration-500",p.interacciones>=80?"bg-green-500":p.interacciones>=60?"bg-orange-500":"bg-red-500"]),style:O({width:`${p.interacciones}%`})},null,6)])]))),128))])):(l(),c("div",to,[x(g(K),{class:"h-12 w-12 text-gray-400 mx-auto mb-3"}),s[4]||(s[4]=e("p",{class:"text-gray-600"},"No hay datos de interacciones disponibles",-1))]))]),e("div",oo,[e("div",so,[s[9]||(s[9]=e("h3",{class:"text-lg font-bold text-gray-900 mb-4"}," Distribuci√≥n por Estado ",-1)),e("div",ao,[e("div",io,[s[6]||(s[6]=e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-3 h-3 bg-green-500 rounded-full"}),e("span",{class:"text-sm font-medium text-gray-700"},"Enviados")],-1)),e("span",no,i(n.value.totalEnviados),1)]),e("div",ro,[s[7]||(s[7]=e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-3 h-3 bg-yellow-500 rounded-full"}),e("span",{class:"text-sm font-medium text-gray-700"},"Programados")],-1)),e("span",lo,i(n.value.totalProgramados),1)]),e("div",co,[s[8]||(s[8]=e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-3 h-3 bg-gray-500 rounded-full"}),e("span",{class:"text-sm font-medium text-gray-700"},"Borradores")],-1)),e("span",uo,i(n.value.totalBorradores),1)])])]),e("div",mo,[s[13]||(s[13]=e("h3",{class:"text-lg font-bold text-gray-900 mb-4"}," Insights y Recomendaciones ",-1)),e("div",po,[e("div",go,[x(g(ce),{class:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),e("div",null,[s[10]||(s[10]=e("p",{class:"text-sm font-medium text-blue-900"}," Departamentos m√°s activos ",-1)),e("p",xo,i(n.value.departamentosActivos)+" lideran en interacciones ",1)])]),e("div",vo,[x(g(re),{class:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),e("div",null,[s[11]||(s[11]=e("p",{class:"text-sm font-medium text-green-900"}," Tasa de lectura promedio ",-1)),e("p",bo,i(n.value.promedioLectura)+"% de interacci√≥n es "+i(n.value.promedioLectura>=80?"excelente":n.value.promedioLectura>=60?"bueno":"mejorable"),1)])]),e("div",fo,[x(g(ue),{class:"h-5 w-5 text-purple-600 flex-shrink-0 mt-0.5"}),s[12]||(s[12]=e("div",null,[e("p",{class:"text-sm font-medium text-purple-900"}," Recomendaci√≥n "),e("p",{class:"text-xs text-purple-700 mt-1"}," Mant√©n comunicaci√≥n regular para optimizar engagement ")],-1))])])])])]))}},ho={class:"min-h-screen bg-gray-50"},_o={class:"py-8"},wo={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},$o={class:"mb-6"},Co={class:"flex gap-4 border-b border-gray-200"},ko=["onClick"],Eo={key:0,class:"space-y-6"},jo={key:1,class:"space-y-6"},Po={key:2,class:"space-y-6"},To={class:"flex items-center gap-3"},Ao={class:"w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center"},So={class:"text-xl font-bold text-gray-900"},Io={class:"flex items-center gap-2 mt-1"},Do={class:"text-xs text-gray-500"},Vo={key:0,class:"space-y-6"},Bo={class:"grid grid-cols-2 gap-4"},Mo={class:"text-base text-gray-900"},Ro={class:"flex flex-wrap gap-2"},Fo={class:"flex flex-wrap gap-2"},zo={class:"bg-gray-50 p-4 rounded-lg whitespace-pre-wrap text-sm text-gray-900"},Go={class:"flex items-center gap-3"},Ho={class:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center"},Lo={class:"space-y-4"},Uo={class:"bg-gray-50 p-4 rounded-lg"},qo={class:"text-sm font-semibold text-gray-900"},No={class:"text-xs text-gray-600 mt-1"},Oo={class:"flex items-center justify-end gap-3"},ns={__name:"CentroComunicacion",setup(m){const n=N(),b=[{id:"crear",nombre:"Crear comunicado",icon:U},{id:"historial",nombre:"Historial",icon:L},{id:"analitica",nombre:"Anal√≠tica",icon:K}],s=y("crear"),p=y(null),o=y(null),v=y(null),S=y(!1),j=y(!1),f=_=>_?new Date(_+"T00:00:00").toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"}):"No enviado",I=()=>{n.success("Comunicado creado correctamente",{timeout:4e3}),s.value="historial",V()},d=_=>{o.value=_,S.value=!0},B=_=>{const u=we(_.id);u&&(p.value=u,s.value="crear",n.info("Comunicado duplicado. Puedes editarlo y enviarlo nuevamente",{timeout:4e3}))},D=_=>{v.value=_,j.value=!0},M=()=>{v.value&&(he(v.value.id),n.success("Comunicado eliminado correctamente",{timeout:3e3}),j.value=!1,v.value=null)},V=()=>{p.value=null};return(_,u)=>(l(),c("div",ho,[e("div",_o,[e("div",wo,[u[3]||(u[3]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900"}," Centro de Comunicaci√≥n Interna "),e("p",{class:"text-gray-600 mt-2"}," Gestiona los comunicados, su alcance y el historial de env√≠os ")],-1)),e("div",$o,[e("div",Co,[(l(),c(k,null,E(b,a=>e("button",{key:a.id,onClick:t=>s.value=a.id,class:$(["flex items-center gap-2 px-4 py-3 text-sm font-medium transition-all duration-200 border-b-2",s.value===a.id?"text-indigo-600 border-indigo-600":"text-gray-600 border-transparent hover:text-gray-900 hover:border-gray-300"])},[(l(),te(oe(a.icon),{class:"h-5 w-5"})),C(" "+i(a.nombre),1)],10,ko)),64))])]),e("div",null,[s.value==="crear"?(l(),c("div",Eo,[x(it,{"comunicado-inicial":p.value,onComunicadoCreado:I,onCancelar:V},null,8,["comunicado-inicial"])])):s.value==="historial"?(l(),c("div",jo,[x(Bt,{onVerComunicado:d,onDuplicarComunicado:B,onEliminarComunicado:D})])):s.value==="analitica"?(l(),c("div",Po,[x(yo)])):A("",!0)])])]),x(g(z),{visible:S.value,"onUpdate:visible":u[0]||(u[0]=a=>S.value=a),modal:"",dismissableMask:!0,style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:T(()=>{var a,t,r,h;return[e("div",To,[e("div",Ao,[x(g(me),{class:"h-6 w-6 text-indigo-600"})]),e("div",null,[e("h3",So,i((a=o.value)==null?void 0:a.titulo),1),e("div",Io,[e("span",{class:$(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",g(J)((t=o.value)==null?void 0:t.estado).badge])},i((r=o.value)==null?void 0:r.estado),3),e("span",Do,i((h=o.value)==null?void 0:h.tipo),1)])])])]}),default:T(()=>[o.value?(l(),c("div",Vo,[e("div",Bo,[e("div",null,[u[4]||(u[4]=e("h4",{class:"text-sm font-semibold text-gray-700 mb-2"},"Fecha de env√≠o",-1)),e("p",Mo,i(f(o.value.fecha_envio)),1)]),e("div",null,[u[5]||(u[5]=e("h4",{class:"text-sm font-semibold text-gray-700 mb-2"},"Interacciones",-1)),e("p",{class:$(["text-base font-semibold",g(W)(o.value.interacciones)])},i(o.value.interacciones)+"% ",3)])]),e("div",null,[u[6]||(u[6]=e("h4",{class:"text-sm font-semibold text-gray-700 mb-2"},"Destinatarios",-1)),e("div",Ro,[(l(!0),c(k,null,E(o.value.destinatarios,a=>(l(),c("span",{key:a,class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-indigo-50 text-indigo-700"},i(a),1))),128))])]),e("div",null,[u[7]||(u[7]=e("h4",{class:"text-sm font-semibold text-gray-700 mb-2"},"Roles",-1)),e("div",Fo,[(l(!0),c(k,null,E(o.value.roles,a=>(l(),c("span",{key:a,class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-50 text-purple-700"},i(a),1))),128))])]),e("div",null,[u[8]||(u[8]=e("h4",{class:"text-sm font-semibold text-gray-700 mb-2"},"Contenido",-1)),e("div",zo,i(o.value.contenido),1)])])):A("",!0)]),_:1},8,["visible"]),x(g(z),{visible:j.value,"onUpdate:visible":u[2]||(u[2]=a=>j.value=a),modal:"",dismissableMask:!0,style:{width:"30rem"}},{header:T(()=>[e("div",Go,[e("div",Ho,[x(g(pe),{class:"h-6 w-6 text-red-600"})]),u[9]||(u[9]=e("h3",{class:"text-xl font-bold text-gray-900"}," Confirmar eliminaci√≥n ",-1))])]),footer:T(()=>[e("div",Oo,[e("button",{onClick:u[1]||(u[1]=a=>j.value=!1),class:"px-4 py-2 rounded-lg text-gray-700 bg-gray-100 hover:bg-gray-200 transition-colors"}," Cancelar "),e("button",{onClick:M,class:"px-4 py-2 rounded-lg text-white bg-red-600 hover:bg-red-700 transition-colors"}," Eliminar ")])]),default:T(()=>{var a,t;return[e("div",Lo,[u[10]||(u[10]=e("p",{class:"text-gray-700"}," ¬øEst√°s seguro de que deseas eliminar este comunicado? ",-1)),e("div",Uo,[e("p",qo,i((a=v.value)==null?void 0:a.titulo),1),e("p",No," Tipo: "+i((t=v.value)==null?void 0:t.tipo),1)]),u[11]||(u[11]=e("p",{class:"text-sm text-red-600"}," Esta acci√≥n no se puede deshacer. ",-1))])]}),_:1},8,["visible"])]))}};export{ns as default};

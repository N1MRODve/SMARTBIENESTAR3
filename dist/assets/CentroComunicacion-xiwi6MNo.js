import{u as q}from"./index-BBOQ62Pn.js";import{s as F}from"./dialog.esm-D-A_zY8n.js";import{_ as W}from"./Header-CQM0Mtxj.js";import{x as O,l as y,n as L,a1 as Y,j as l,d as c,e,t as i,k as C,h as S,F as k,r as E,v as $,z as P,B as ee,E as te,C as R,X as N,N as z,i as g,f as x,ad as U,D as oe,w as T,P as G,aj as se,K,am as ae,ag as ie,V as Q,a4 as ne,g as re,a3 as le,Z as de}from"./index-9XWXAznh.js";import{E as H}from"./eye-DW_jvoXF.js";import{T as ce}from"./trash-2-CjVyO1Nz.js";import{B as ue}from"./building-4GKlUfSm.js";import{I as me}from"./info-BhcVgskR.js";import{T as pe}from"./target-4OWMDHux.js";/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=O("CopyIcon",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=O("MailIcon",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),w=[{id:1,titulo:"Plan de Acción Post Clima360",tipo:"Plan de mejora",fecha_envio:"2025-10-10",destinatarios:["RRHH","Marketing","Ventas"],roles:["Todos los empleados"],estado:"Enviado",interacciones:86,contenido:"Tras los resultados de la encuesta Clima360, implementaremos acciones específicas para fortalecer el liderazgo y la comunicación interna. Estas medidas incluyen talleres de liderazgo consciente, mejora de canales de comunicación y espacios de feedback continuo.",fecha_creacion:"2025-10-09",creador:"Admin Sistema"},{id:2,titulo:"Reconocimiento del Equipo de Producción",tipo:"Felicitación",fecha_envio:"2025-09-22",destinatarios:["Producción"],roles:["Todos los empleados"],estado:"Enviado",interacciones:91,contenido:"Felicitamos al equipo de Producción por su excelente clima laboral y compromiso demostrado durante el último trimestre. Los resultados de la encuesta reflejan un alto nivel de satisfacción y cohesión de equipo. ¡Gracias por vuestro trabajo!",fecha_creacion:"2025-09-21",creador:"Admin Sistema"},{id:3,titulo:"Nuevas Iniciativas de Bienestar 2025",tipo:"Comunicación General",fecha_envio:"2025-11-01",destinatarios:["RRHH","Marketing","Ventas","Producción","Tecnología"],roles:["Todos los empleados"],estado:"Programado",interacciones:0,contenido:"Agradecemos la participación en las encuestas de clima laboral. A partir de noviembre, lanzaremos nuevos programas de bienestar mental, talleres de liderazgo y espacios de reconocimiento entre equipos. Pronto compartiremos el calendario completo.",fecha_creacion:"2025-10-12",creador:"Admin Sistema"},{id:4,titulo:"Resultados Encuesta Q3 - Borrador",tipo:"Plan de mejora",fecha_envio:null,destinatarios:["RRHH"],roles:["Líderes de área"],estado:"Borrador",interacciones:0,contenido:"Borrador del comunicado con los resultados principales del tercer trimestre. Pendiente de revisión y aprobación antes de envío.",fecha_creacion:"2025-10-13",creador:"Admin Sistema"},{id:5,titulo:"Lanzamiento Programa Balance Vida-Trabajo",tipo:"Comunicación General",fecha_envio:"2025-09-15",destinatarios:["RRHH","Marketing","Tecnología"],roles:["Todos los empleados"],estado:"Enviado",interacciones:78,contenido:"Estamos encantados de anunciar el lanzamiento del Programa de Balance Vida-Trabajo, diseñado para ayudar a gestionar el tiempo de manera efectiva y establecer límites saludables. Incluye talleres virtuales, sesiones presenciales y coaching individual.",fecha_creacion:"2025-09-14",creador:"Admin Sistema"}],ve=[{id:"mejora",nombre:"Plan de Mejora",icono:"📊",cuerpo:`Tras los resultados de {encuesta}, implementaremos medidas para fortalecer el bienestar organizacional.

Estas acciones incluyen:
- Talleres de desarrollo
- Mejora de procesos internos
- Espacios de feedback continuo

Agradecer vuestra participación y compromiso.`},{id:"felicitacion",nombre:"Felicitación",icono:"🎉",cuerpo:`¡Enhorabuena!

Los resultados de {encuesta} reflejan un alto compromiso y excelente clima laboral. Gracias por vuestra participación y dedicación.

Seguiremos trabajando juntos para mantener este nivel de excelencia.`},{id:"general",nombre:"Comunicación General",icono:"📢",cuerpo:`Agradecemos la participación en la encuesta {encuesta}.

En breve compartiremos:
- Resultados principales
- Nuevas iniciativas
- Calendario de actividades

Gracias por vuestra colaboración.`},{id:"resultados",nombre:"Resultados de Encuesta",icono:"📈",cuerpo:`Compartimos los resultados de {encuesta}:

Puntos destacados:
- Fortalezas identificadas
- Áreas de oportunidad
- Próximos pasos

Gracias a todos los participantes por vuestros valiosos aportes.`},{id:"accion",nombre:"Plan de Acción",icono:"✅",cuerpo:`Basándonos en los resultados de {encuesta}, hemos diseñado un plan de acción:

1. Implementación de talleres específicos
2. Mejora de canales de comunicación
3. Programas de reconocimiento
4. Seguimiento trimestral

Cada departamento recibirá información específica.`}],be=["RRHH","Marketing","Ventas","Producción","Tecnología","Finanzas","Operaciones","Atención al Cliente"],fe=["Todos los empleados","Líderes de área","Solo RRHH","Mandos intermedios","Dirección"];let X=6;const ye=m=>{const n={id:X++,...m,fecha_creacion:new Date().toISOString().split("T")[0],creador:"Admin Sistema",interacciones:0};return w.push(n),n},he=(m,n)=>{const b=w.find(s=>s.id===m);return b?(Object.assign(b,n),b):null},_e=m=>{const n=w.findIndex(b=>b.id===m);return n!==-1?(w.splice(n,1),!0):!1},we=m=>w.find(n=>n.id===m),$e=m=>{const n=we(m);if(n){const b={...n,id:X++,titulo:`${n.titulo} (Copia)`,estado:"Borrador",fecha_envio:null,fecha_creacion:new Date().toISOString().split("T")[0],interacciones:0};return w.push(b),b}return null},Z=m=>({Enviado:{bg:"bg-green-50",text:"text-green-700",badge:"bg-green-100 text-green-800",border:"border-green-200"},Borrador:{bg:"bg-gray-50",text:"text-gray-700",badge:"bg-gray-100 text-gray-800",border:"border-gray-200"},Programado:{bg:"bg-yellow-50",text:"text-yellow-700",badge:"bg-yellow-100 text-yellow-800",border:"border-yellow-200"}})[m]||{bg:"bg-gray-50",text:"text-gray-700",badge:"bg-gray-100 text-gray-800",border:"border-gray-200"},J=m=>m>=80?"text-green-600":m>=60?"text-orange-600":"text-red-600",Ce=()=>{const m=w.filter(o=>o.estado==="Enviado"),n=m.reduce((o,v)=>o+v.interacciones,0),b=m.length>0?Math.round(n/m.length):0,s={};w.forEach(o=>{o.destinatarios.forEach(v=>{s[v]=(s[v]||0)+o.interacciones})});const p=Object.entries(s).sort((o,v)=>v[1]-o[1]).slice(0,2).map(([o])=>o);return{totalEnviados:m.length,totalProgramados:w.filter(o=>o.estado==="Programado").length,totalBorradores:w.filter(o=>o.estado==="Borrador").length,promedioLectura:b,departamentosActivos:p.join(" y ")||"N/A",datosGrafico:m.map(o=>({titulo:o.titulo.substring(0,30)+"...",interacciones:o.interacciones}))}},ke={class:"bg-white shadow-sm rounded-xl p-6 space-y-6"},Ee={class:"flex items-center justify-between"},je={class:"text-xl font-bold text-gray-900"},Pe={key:0,class:"text-sm text-gray-600"},Te={class:"font-semibold"},Se={class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-3"},Ae=["onClick"],Ie={class:"text-3xl mb-2"},De={class:"text-xs font-medium text-gray-900"},Ve={class:"text-xs text-gray-500 mt-1"},Be={class:"grid grid-cols-2 md:grid-cols-4 gap-3"},Me=["value"],Re={class:"text-sm font-medium text-gray-900"},ze={class:"grid grid-cols-2 md:grid-cols-3 gap-3"},Fe=["value"],Le={class:"text-sm font-medium text-gray-900"},Ge={class:"flex items-center gap-4"},He={class:"flex items-center gap-2"},Ue={class:"flex items-center gap-2"},Ne={class:"flex items-center gap-2"},qe={key:0,class:"mt-3"},Oe=["min"],Ke={class:"flex items-center justify-between pt-4 border-t border-gray-200"},Qe={class:"flex items-center gap-3"},Xe=["disabled"],Ze={class:"flex items-center gap-3"},Je={class:"w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center"},We={class:"space-y-6"},Ye={class:"bg-gradient-to-r from-indigo-600 to-indigo-700 text-white p-6 rounded-lg"},et={class:"text-2xl font-bold mb-2"},tt={class:"text-sm text-indigo-100"},ot={class:"bg-gray-50 p-6 rounded-lg"},st={class:"text-gray-900 whitespace-pre-wrap"},at={class:"bg-gray-100 p-4 rounded-lg text-sm text-gray-600"},it={class:"flex flex-wrap gap-2"},nt={__name:"FormularioCrearComunicado",props:{comunicadoInicial:{type:Object,default:null}},emits:["comunicado-creado","cancelar"],setup(m,{emit:n}){const b=m,s=n,p=q(),o=y(ve),v=y(be),A=y(fe),j=y(null),f=y("inmediato"),I=y(!1),d=y({titulo:"",tipo:"",contenido:"",destinatarios:[],roles:[],fecha_envio:null,estado:"Enviado"}),B=L(()=>new Date().toISOString().split("T")[0]),D=L(()=>d.value.titulo.trim()!==""&&d.value.tipo!==""&&d.value.contenido.trim()!==""&&d.value.destinatarios.length>0&&d.value.roles.length>0),M=a=>{j.value=a,d.value.contenido=a.cuerpo,d.value.tipo||(d.value.tipo=a.nombre)},V=()=>{if(!D.value){p.warning("Completa todos los campos requeridos para ver la vista previa",{timeout:3e3});return}I.value=!0},_=()=>{if(!D.value)return;let a="Enviado",t=new Date().toISOString().split("T")[0];f.value==="borrador"?(a="Borrador",t=null):f.value==="programado"&&(a="Programado",t=d.value.fecha_envio);const r={...d.value,estado:a,fecha_envio:t};b.comunicadoInicial?he(b.comunicadoInicial.id,r):ye(r);const h=d.value.destinatarios.length;a==="Enviado"?p.success(`Comunicado enviado correctamente a ${h} departamento${h!==1?"s":""}`,{timeout:4e3}):a==="Programado"?p.info(`Comunicado programado para ${t}`,{timeout:4e3}):p.success("Comunicado guardado como borrador",{timeout:3e3}),u(),s("comunicado-creado")},u=()=>{d.value={titulo:"",tipo:"",contenido:"",destinatarios:[],roles:[],fecha_envio:null,estado:"Enviado"},j.value=null,f.value="inmediato"};return Y(()=>b.comunicadoInicial,a=>{a?(d.value={titulo:a.titulo,tipo:a.tipo,contenido:a.contenido,destinatarios:[...a.destinatarios],roles:[...a.roles],fecha_envio:a.fecha_envio,estado:a.estado},a.estado==="Borrador"?f.value="borrador":a.estado==="Programado"?f.value="programado":f.value="inmediato"):u()},{immediate:!0}),(a,t)=>(l(),c("div",ke,[e("div",Ee,[e("h2",je,i(m.comunicadoInicial?"Editar comunicado":"Crear nuevo comunicado"),1),m.comunicadoInicial?(l(),c("div",Pe,[t[11]||(t[11]=C(" Editando: ")),e("span",Te,i(m.comunicadoInicial.titulo),1)])):S("",!0)]),e("form",{onSubmit:oe(_,["prevent"]),class:"space-y-6"},[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Seleccionar plantilla ",-1)),e("div",Se,[(l(!0),c(k,null,E(o.value,r=>{var h;return l(),c("button",{key:r.id,type:"button",onClick:Qo=>M(r),class:$(["p-4 rounded-lg border-2 transition-all duration-200 hover:border-indigo-300 hover:shadow-md text-center",((h=j.value)==null?void 0:h.id)===r.id?"border-indigo-600 bg-indigo-50":"border-gray-200 bg-white"])},[e("div",Ie,i(r.icono),1),e("div",De,i(r.nombre),1)],10,Ae)}),128))])]),e("div",null,[t[14]||(t[14]=e("label",{for:"tipo",class:"block text-sm font-medium text-gray-700 mb-2"},[C(" Tipo de comunicado "),e("span",{class:"text-red-500"},"*")],-1)),P(e("select",{id:"tipo","onUpdate:modelValue":t[0]||(t[0]=r=>d.value.tipo=r),required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-4 py-2.5 text-gray-900"},t[13]||(t[13]=[te('<option value="">Selecciona un tipo</option><option value="Plan de mejora">Plan de mejora</option><option value="Felicitación">Felicitación</option><option value="Comunicación General">Comunicación General</option><option value="Resultados">Resultados</option><option value="Acción">Acción</option>',6)]),512),[[ee,d.value.tipo]])]),e("div",null,[t[15]||(t[15]=e("label",{for:"titulo",class:"block text-sm font-medium text-gray-700 mb-2"},[C(" Título del comunicado "),e("span",{class:"text-red-500"},"*")],-1)),P(e("input",{id:"titulo","onUpdate:modelValue":t[1]||(t[1]=r=>d.value.titulo=r),type:"text",required:"",placeholder:"Ej: Plan de Acción Post Clima360",class:"w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-4 py-2.5 text-gray-900"},null,512),[[R,d.value.titulo]])]),e("div",null,[t[16]||(t[16]=e("label",{for:"contenido",class:"block text-sm font-medium text-gray-700 mb-2"},[C(" Contenido "),e("span",{class:"text-red-500"},"*")],-1)),P(e("textarea",{id:"contenido","onUpdate:modelValue":t[2]||(t[2]=r=>d.value.contenido=r),required:"",rows:"8",placeholder:"Escribe el contenido del comunicado...",class:"w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-4 py-2.5 text-gray-900 resize-none"},null,512),[[R,d.value.contenido]]),e("p",Ve,i(d.value.contenido.length)+" caracteres ",1)]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[C(" Destinatarios - Departamentos "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Be,[(l(!0),c(k,null,E(v.value,r=>(l(),c("label",{key:r,class:$(["flex items-center gap-2 p-3 rounded-lg border-2 transition-all cursor-pointer hover:border-indigo-300",d.value.destinatarios.includes(r)?"border-indigo-600 bg-indigo-50":"border-gray-200 bg-white"])},[P(e("input",{type:"checkbox",value:r,"onUpdate:modelValue":t[3]||(t[3]=h=>d.value.destinatarios=h),class:"rounded text-indigo-600 focus:ring-indigo-500"},null,8,Me),[[N,d.value.destinatarios]]),e("span",Re,i(r),1)],2))),128))])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},[C(" Destinatarios - Roles "),e("span",{class:"text-red-500"},"*")],-1)),e("div",ze,[(l(!0),c(k,null,E(A.value,r=>(l(),c("label",{key:r,class:$(["flex items-center gap-2 p-3 rounded-lg border-2 transition-all cursor-pointer hover:border-purple-300",d.value.roles.includes(r)?"border-purple-600 bg-purple-50":"border-gray-200 bg-white"])},[P(e("input",{type:"checkbox",value:r,"onUpdate:modelValue":t[4]||(t[4]=h=>d.value.roles=h),class:"rounded text-purple-600 focus:ring-purple-500"},null,8,Fe),[[N,d.value.roles]]),e("span",Le,i(r),1)],2))),128))])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Fecha de envío ",-1)),e("div",Ge,[e("label",He,[P(e("input",{type:"radio","onUpdate:modelValue":t[5]||(t[5]=r=>f.value=r),value:"inmediato",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[z,f.value]]),t[19]||(t[19]=e("span",{class:"text-sm font-medium text-gray-900"},"Enviar inmediatamente",-1))]),e("label",Ue,[P(e("input",{type:"radio","onUpdate:modelValue":t[6]||(t[6]=r=>f.value=r),value:"programado",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[z,f.value]]),t[20]||(t[20]=e("span",{class:"text-sm font-medium text-gray-900"},"Programar envío",-1))]),e("label",Ne,[P(e("input",{type:"radio","onUpdate:modelValue":t[7]||(t[7]=r=>f.value=r),value:"borrador",class:"text-indigo-600 focus:ring-indigo-500"},null,512),[[z,f.value]]),t[21]||(t[21]=e("span",{class:"text-sm font-medium text-gray-900"},"Guardar como borrador",-1))])]),f.value==="programado"?(l(),c("div",qe,[P(e("input",{type:"date","onUpdate:modelValue":t[8]||(t[8]=r=>d.value.fecha_envio=r),min:B.value,class:"rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-4 py-2.5 text-gray-900"},null,8,Oe),[[R,d.value.fecha_envio]])])):S("",!0)]),e("div",Ke,[e("button",{type:"button",onClick:V,class:"flex items-center gap-2 px-5 py-2.5 rounded-lg text-gray-700 bg-gray-100 hover:bg-gray-200 transition-colors font-medium"},[g(x(H),{class:"h-5 w-5"}),t[23]||(t[23]=C(" Vista previa "))]),e("div",Qe,[m.comunicadoInicial?(l(),c("button",{key:0,type:"button",onClick:t[9]||(t[9]=r=>a.$emit("cancelar")),class:"px-5 py-2.5 rounded-lg text-gray-700 bg-gray-100 hover:bg-gray-200 transition-colors font-medium"}," Cancelar ")):S("",!0),e("button",{type:"submit",disabled:!D.value,class:"flex items-center gap-2 px-5 py-2.5 rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed"},[g(x(U),{class:"h-5 w-5"}),C(" "+i(f.value==="borrador"?"Guardar borrador":"Enviar comunicado"),1)],8,Xe)])])],32),g(x(F),{visible:I.value,"onUpdate:visible":t[10]||(t[10]=r=>I.value=r),modal:"",dismissableMask:!0,style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:T(()=>[e("div",Ze,[e("div",Je,[g(x(H),{class:"h-6 w-6 text-indigo-600"})]),t[24]||(t[24]=e("div",null,[e("h3",{class:"text-xl font-bold text-gray-900"}," Vista previa del comunicado "),e("p",{class:"text-sm text-gray-600"}," Así verán el comunicado los destinatarios ")],-1))])]),default:T(()=>[e("div",We,[e("div",Ye,[e("h2",et,i(d.value.titulo),1),e("p",tt,i(d.value.tipo),1)]),e("div",ot,[e("p",st,i(d.value.contenido),1)]),e("div",at,[t[25]||(t[25]=e("p",{class:"font-semibold mb-2"},"Enviado a:",-1)),e("div",it,[(l(!0),c(k,null,E(d.value.destinatarios,r=>(l(),c("span",{key:r,class:"px-2 py-1 bg-white rounded text-xs"},i(r),1))),128))])])])]),_:1},8,["visible"])]))}},rt={class:"bg-white shadow-sm rounded-xl overflow-hidden"},lt={class:"p-6 border-b border-gray-200"},dt={class:"flex items-center justify-between"},ct={class:"flex items-center gap-2 px-4 py-2 bg-indigo-100 rounded-full"},ut={class:"text-sm font-semibold text-indigo-700"},mt={class:"overflow-x-auto"},pt={class:"min-w-full divide-y divide-gray-200"},gt={class:"bg-white divide-y divide-gray-200"},xt={class:"px-6 py-4 whitespace-nowrap"},vt={class:"flex items-center gap-2 text-sm text-gray-900"},bt={class:"px-6 py-4"},ft={class:"max-w-xs"},yt={class:"text-sm font-semibold text-gray-900 truncate"},ht={class:"px-6 py-4 whitespace-nowrap"},_t={class:"text-xs text-gray-600"},wt={class:"px-6 py-4"},$t={class:"flex flex-wrap gap-1 max-w-xs"},Ct={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700"},kt={class:"px-6 py-4 whitespace-nowrap"},Et={class:"px-6 py-4 whitespace-nowrap"},jt={class:"flex items-center gap-2"},Pt={class:"flex-1 bg-gray-200 rounded-full h-2 w-16"},Tt={class:"px-6 py-4 whitespace-nowrap"},St={class:"flex items-center gap-2"},At=["onClick"],It=["onClick"],Dt=["onClick"],Vt={key:0,class:"text-center py-12"},Bt={class:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"},Mt={__name:"HistorialComunicados",emits:["ver-comunicado","duplicar-comunicado","eliminar-comunicado"],setup(m){const n=y(w),b=s=>s?new Date(s+"T00:00:00").toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"}):"Sin enviar";return(s,p)=>(l(),c("div",rt,[e("div",lt,[e("div",dt,[p[0]||(p[0]=e("h2",{class:"text-xl font-bold text-gray-900"}," Historial de Comunicados ",-1)),e("div",ct,[g(x(G),{class:"h-5 w-5 text-indigo-600"}),e("span",ut,i(n.value.length)+" comunicado"+i(n.value.length!==1?"s":""),1)])])]),e("div",mt,[e("table",pt,[p[1]||(p[1]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Fecha "),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Título "),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tipo "),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Destinatarios "),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Estado "),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Interacciones "),e("th",{class:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Acciones ")])],-1)),e("tbody",gt,[(l(!0),c(k,null,E(n.value,o=>(l(),c("tr",{key:o.id,class:"hover:bg-gray-50 transition-colors"},[e("td",xt,[e("div",vt,[g(x(se),{class:"h-4 w-4 text-gray-400"}),C(" "+i(b(o.fecha_envio)),1)])]),e("td",bt,[e("div",ft,[e("p",yt,i(o.titulo),1)])]),e("td",ht,[e("span",_t,i(o.tipo),1)]),e("td",wt,[e("div",$t,[(l(!0),c(k,null,E(o.destinatarios.slice(0,2),(v,A)=>(l(),c("span",{key:v,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-indigo-50 text-indigo-700"},i(v),1))),128)),o.destinatarios.length>2?(l(),c("span",Ct," +"+i(o.destinatarios.length-2),1)):S("",!0)])]),e("td",kt,[e("span",{class:$(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",x(Z)(o.estado).badge])},i(o.estado),3)]),e("td",Et,[e("div",jt,[e("div",Pt,[e("div",{class:$(["h-2 rounded-full transition-all duration-300",o.interacciones>=80?"bg-green-500":o.interacciones>=60?"bg-orange-500":"bg-red-500"]),style:K({width:`${o.interacciones}%`})},null,6)]),e("span",{class:$(["text-sm font-semibold",x(J)(o.interacciones)])},i(o.interacciones)+"% ",3)])]),e("td",Tt,[e("div",St,[e("button",{onClick:v=>s.$emit("ver-comunicado",o),class:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Ver comunicado"},[g(x(H),{class:"h-5 w-5"})],8,At),e("button",{onClick:v=>s.$emit("duplicar-comunicado",o),class:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Duplicar"},[g(x(ge),{class:"h-5 w-5"})],8,It),e("button",{onClick:v=>s.$emit("eliminar-comunicado",o),class:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Eliminar"},[g(x(ce),{class:"h-5 w-5"})],8,Dt)])])]))),128))])])]),n.value.length===0?(l(),c("div",Vt,[e("div",Bt,[g(x(G),{class:"h-8 w-8 text-gray-400"})]),p[2]||(p[2]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"}," No hay comunicados registrados ",-1)),p[3]||(p[3]=e("p",{class:"text-gray-600"}," Los comunicados aparecerán aquí una vez creados ",-1))])):S("",!0)]))}},Rt={class:"space-y-6"},zt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},Ft={class:"bg-white rounded-lg shadow-sm p-6 text-center border-l-4 border-indigo-500"},Lt={class:"flex items-center justify-center mb-3"},Gt={class:"text-3xl font-bold text-gray-900"},Ht={class:"bg-white rounded-lg shadow-sm p-6 text-center border-l-4 border-yellow-500"},Ut={class:"flex items-center justify-center mb-3"},Nt={class:"text-3xl font-bold text-gray-900"},qt={class:"bg-white rounded-lg shadow-sm p-6 text-center border-l-4 border-green-500"},Ot={class:"flex items-center justify-center mb-3"},Kt={class:"text-3xl font-bold text-green-700"},Qt={class:"bg-white rounded-lg shadow-sm p-6 text-center border-l-4 border-purple-500"},Xt={class:"flex items-center justify-center mb-3"},Zt={class:"text-sm font-bold text-gray-900 mt-2"},Jt={class:"bg-white rounded-xl shadow-sm p-6"},Wt={key:0,class:"space-y-4"},Yt={class:"flex items-center justify-between text-sm"},eo={class:"font-medium text-gray-700"},to={class:"w-full bg-gray-200 rounded-full h-3"},oo={key:1,class:"text-center py-8"},so={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ao={class:"bg-white rounded-xl shadow-sm p-6"},io={class:"space-y-3"},no={class:"flex items-center justify-between p-3 bg-green-50 rounded-lg"},ro={class:"text-lg font-bold text-green-700"},lo={class:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg"},co={class:"text-lg font-bold text-yellow-700"},uo={class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},mo={class:"text-lg font-bold text-gray-700"},po={class:"bg-white rounded-xl shadow-sm p-6"},go={class:"space-y-4"},xo={class:"flex items-start gap-3 p-3 bg-blue-50 rounded-lg"},vo={class:"text-xs text-blue-700 mt-1"},bo={class:"flex items-start gap-3 p-3 bg-green-50 rounded-lg"},fo={class:"text-xs text-green-700 mt-1"},yo={class:"flex items-start gap-3 p-3 bg-purple-50 rounded-lg"},ho={__name:"AnaliticaDifusion",setup(m){const n=L(()=>Ce());return(b,s)=>(l(),c("div",Rt,[e("div",zt,[e("div",Ft,[e("div",Lt,[g(x(U),{class:"h-8 w-8 text-indigo-600"})]),s[0]||(s[0]=e("p",{class:"text-sm text-gray-600 mb-1"},"Comunicados enviados",-1)),e("p",Gt,i(n.value.totalEnviados),1)]),e("div",Ht,[e("div",Ut,[g(x(ae),{class:"h-8 w-8 text-yellow-600"})]),s[1]||(s[1]=e("p",{class:"text-sm text-gray-600 mb-1"},"Programados",-1)),e("p",Nt,i(n.value.totalProgramados),1)]),e("div",qt,[e("div",Ot,[g(x(ie),{class:"h-8 w-8 text-green-600"})]),s[2]||(s[2]=e("p",{class:"text-sm text-gray-600 mb-1"},"Tasa promedio de lectura",-1)),e("p",Kt,i(n.value.promedioLectura)+"%",1)]),e("div",Qt,[e("div",Xt,[g(x(ue),{class:"h-8 w-8 text-purple-600"})]),s[3]||(s[3]=e("p",{class:"text-sm text-gray-600 mb-1"},"Departamentos activos",-1)),e("p",Zt,i(n.value.departamentosActivos),1)])]),e("div",Jt,[s[5]||(s[5]=e("h3",{class:"text-lg font-bold text-gray-900 mb-6"}," Interacciones por Comunicado ",-1)),n.value.datosGrafico.length>0?(l(),c("div",Wt,[(l(!0),c(k,null,E(n.value.datosGrafico,(p,o)=>(l(),c("div",{key:o,class:"space-y-2"},[e("div",Yt,[e("span",eo,i(p.titulo),1),e("span",{class:$(["font-bold",p.interacciones>=80?"text-green-600":p.interacciones>=60?"text-orange-600":"text-red-600"])},i(p.interacciones)+"% ",3)]),e("div",to,[e("div",{class:$(["h-3 rounded-full transition-all duration-500",p.interacciones>=80?"bg-green-500":p.interacciones>=60?"bg-orange-500":"bg-red-500"]),style:K({width:`${p.interacciones}%`})},null,6)])]))),128))])):(l(),c("div",oo,[g(x(Q),{class:"h-12 w-12 text-gray-400 mx-auto mb-3"}),s[4]||(s[4]=e("p",{class:"text-gray-600"},"No hay datos de interacciones disponibles",-1))]))]),e("div",so,[e("div",ao,[s[9]||(s[9]=e("h3",{class:"text-lg font-bold text-gray-900 mb-4"}," Distribución por Estado ",-1)),e("div",io,[e("div",no,[s[6]||(s[6]=e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-3 h-3 bg-green-500 rounded-full"}),e("span",{class:"text-sm font-medium text-gray-700"},"Enviados")],-1)),e("span",ro,i(n.value.totalEnviados),1)]),e("div",lo,[s[7]||(s[7]=e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-3 h-3 bg-yellow-500 rounded-full"}),e("span",{class:"text-sm font-medium text-gray-700"},"Programados")],-1)),e("span",co,i(n.value.totalProgramados),1)]),e("div",uo,[s[8]||(s[8]=e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-3 h-3 bg-gray-500 rounded-full"}),e("span",{class:"text-sm font-medium text-gray-700"},"Borradores")],-1)),e("span",mo,i(n.value.totalBorradores),1)])])]),e("div",po,[s[13]||(s[13]=e("h3",{class:"text-lg font-bold text-gray-900 mb-4"}," Insights y Recomendaciones ",-1)),e("div",go,[e("div",xo,[g(x(me),{class:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),e("div",null,[s[10]||(s[10]=e("p",{class:"text-sm font-medium text-blue-900"}," Departamentos más activos ",-1)),e("p",vo,i(n.value.departamentosActivos)+" lideran en interacciones ",1)])]),e("div",bo,[g(x(ne),{class:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}),e("div",null,[s[11]||(s[11]=e("p",{class:"text-sm font-medium text-green-900"}," Tasa de lectura promedio ",-1)),e("p",fo,i(n.value.promedioLectura)+"% de interacción es "+i(n.value.promedioLectura>=80?"excelente":n.value.promedioLectura>=60?"bueno":"mejorable"),1)])]),e("div",yo,[g(x(pe),{class:"h-5 w-5 text-purple-600 flex-shrink-0 mt-0.5"}),s[12]||(s[12]=e("div",null,[e("p",{class:"text-sm font-medium text-purple-900"}," Recomendación "),e("p",{class:"text-xs text-purple-700 mt-1"}," Mantén comunicación regular para optimizar engagement ")],-1))])])])])]))}},_o={class:"min-h-screen bg-gray-50"},wo={class:"py-8"},$o={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Co={class:"mb-6"},ko={class:"flex gap-4 border-b border-gray-200"},Eo=["onClick"],jo={key:0,class:"space-y-6"},Po={key:1,class:"space-y-6"},To={key:2,class:"space-y-6"},So={class:"flex items-center gap-3"},Ao={class:"w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center"},Io={class:"text-xl font-bold text-gray-900"},Do={class:"flex items-center gap-2 mt-1"},Vo={class:"text-xs text-gray-500"},Bo={key:0,class:"space-y-6"},Mo={class:"grid grid-cols-2 gap-4"},Ro={class:"text-base text-gray-900"},zo={class:"flex flex-wrap gap-2"},Fo={class:"flex flex-wrap gap-2"},Lo={class:"bg-gray-50 p-4 rounded-lg whitespace-pre-wrap text-sm text-gray-900"},Go={class:"flex items-center gap-3"},Ho={class:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center"},Uo={class:"space-y-4"},No={class:"bg-gray-50 p-4 rounded-lg"},qo={class:"text-sm font-semibold text-gray-900"},Oo={class:"text-xs text-gray-600 mt-1"},Ko={class:"flex items-center justify-end gap-3"},as={__name:"CentroComunicacion",setup(m){const n=q(),b=[{id:"crear",nombre:"Crear comunicado",icon:U},{id:"historial",nombre:"Historial",icon:G},{id:"analitica",nombre:"Analítica",icon:Q}],s=y("crear"),p=y(null),o=y(null),v=y(null),A=y(!1),j=y(!1),f=_=>_?new Date(_+"T00:00:00").toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"}):"No enviado",I=()=>{n.success("Comunicado creado correctamente",{timeout:4e3}),s.value="historial",V()},d=_=>{o.value=_,A.value=!0},B=_=>{const u=$e(_.id);u&&(p.value=u,s.value="crear",n.info("Comunicado duplicado. Puedes editarlo y enviarlo nuevamente",{timeout:4e3}))},D=_=>{v.value=_,j.value=!0},M=()=>{v.value&&(_e(v.value.id),n.success("Comunicado eliminado correctamente",{timeout:3e3}),j.value=!1,v.value=null)},V=()=>{p.value=null};return(_,u)=>(l(),c("div",_o,[g(W,{subtitulo:"Centro de Comunicación Interna"}),e("div",wo,[e("div",$o,[u[3]||(u[3]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900"}," Centro de Comunicación Interna "),e("p",{class:"text-gray-600 mt-2"}," Gestiona los comunicados, su alcance y el historial de envíos ")],-1)),e("div",Co,[e("div",ko,[(l(),c(k,null,E(b,a=>e("button",{key:a.id,onClick:t=>s.value=a.id,class:$(["flex items-center gap-2 px-4 py-3 text-sm font-medium transition-all duration-200 border-b-2",s.value===a.id?"text-indigo-600 border-indigo-600":"text-gray-600 border-transparent hover:text-gray-900 hover:border-gray-300"])},[(l(),re(le(a.icon),{class:"h-5 w-5"})),C(" "+i(a.nombre),1)],10,Eo)),64))])]),e("div",null,[s.value==="crear"?(l(),c("div",jo,[g(nt,{"comunicado-inicial":p.value,onComunicadoCreado:I,onCancelar:V},null,8,["comunicado-inicial"])])):s.value==="historial"?(l(),c("div",Po,[g(Mt,{onVerComunicado:d,onDuplicarComunicado:B,onEliminarComunicado:D})])):s.value==="analitica"?(l(),c("div",To,[g(ho)])):S("",!0)])])]),g(x(F),{visible:A.value,"onUpdate:visible":u[0]||(u[0]=a=>A.value=a),modal:"",dismissableMask:!0,style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{header:T(()=>{var a,t,r,h;return[e("div",So,[e("div",Ao,[g(x(xe),{class:"h-6 w-6 text-indigo-600"})]),e("div",null,[e("h3",Io,i((a=o.value)==null?void 0:a.titulo),1),e("div",Do,[e("span",{class:$(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",x(Z)((t=o.value)==null?void 0:t.estado).badge])},i((r=o.value)==null?void 0:r.estado),3),e("span",Vo,i((h=o.value)==null?void 0:h.tipo),1)])])])]}),default:T(()=>[o.value?(l(),c("div",Bo,[e("div",Mo,[e("div",null,[u[4]||(u[4]=e("h4",{class:"text-sm font-semibold text-gray-700 mb-2"},"Fecha de envío",-1)),e("p",Ro,i(f(o.value.fecha_envio)),1)]),e("div",null,[u[5]||(u[5]=e("h4",{class:"text-sm font-semibold text-gray-700 mb-2"},"Interacciones",-1)),e("p",{class:$(["text-base font-semibold",x(J)(o.value.interacciones)])},i(o.value.interacciones)+"% ",3)])]),e("div",null,[u[6]||(u[6]=e("h4",{class:"text-sm font-semibold text-gray-700 mb-2"},"Destinatarios",-1)),e("div",zo,[(l(!0),c(k,null,E(o.value.destinatarios,a=>(l(),c("span",{key:a,class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-indigo-50 text-indigo-700"},i(a),1))),128))])]),e("div",null,[u[7]||(u[7]=e("h4",{class:"text-sm font-semibold text-gray-700 mb-2"},"Roles",-1)),e("div",Fo,[(l(!0),c(k,null,E(o.value.roles,a=>(l(),c("span",{key:a,class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-50 text-purple-700"},i(a),1))),128))])]),e("div",null,[u[8]||(u[8]=e("h4",{class:"text-sm font-semibold text-gray-700 mb-2"},"Contenido",-1)),e("div",Lo,i(o.value.contenido),1)])])):S("",!0)]),_:1},8,["visible"]),g(x(F),{visible:j.value,"onUpdate:visible":u[2]||(u[2]=a=>j.value=a),modal:"",dismissableMask:!0,style:{width:"30rem"}},{header:T(()=>[e("div",Go,[e("div",Ho,[g(x(de),{class:"h-6 w-6 text-red-600"})]),u[9]||(u[9]=e("h3",{class:"text-xl font-bold text-gray-900"}," Confirmar eliminación ",-1))])]),footer:T(()=>[e("div",Ko,[e("button",{onClick:u[1]||(u[1]=a=>j.value=!1),class:"px-4 py-2 rounded-lg text-gray-700 bg-gray-100 hover:bg-gray-200 transition-colors"}," Cancelar "),e("button",{onClick:M,class:"px-4 py-2 rounded-lg text-white bg-red-600 hover:bg-red-700 transition-colors"}," Eliminar ")])]),default:T(()=>{var a,t;return[e("div",Uo,[u[10]||(u[10]=e("p",{class:"text-gray-700"}," ¿Estás seguro de que deseas eliminar este comunicado? ",-1)),e("div",No,[e("p",qo,i((a=v.value)==null?void 0:a.titulo),1),e("p",Oo," Tipo: "+i((t=v.value)==null?void 0:t.tipo),1)]),u[11]||(u[11]=e("p",{class:"text-sm text-red-600"}," Esta acción no se puede deshacer. ",-1))])]}),_:1},8,["visible"])]))}};export{as as default};

import{x as X,O as ce,l as P,a1 as we,a2 as et,j as o,g as N,i as r,w as Z,d,e,v as l,a3 as se,t as s,f as n,M as Ce,k as E,F as z,r as D,a4 as K,D as ke,a5 as tt,h as S,a6 as ie,a7 as $e,Z as J,a8 as je,a9 as le,aa as Ee,n as B,ab as Ae,ac as Me,K as de,E as st,A as qe,W as ue,z as pe,C as at,X as ot,ad as Re,ae as rt,q as Pe,H as be,I as nt,o as it,$ as te,p as lt,af as dt,J as ct,ag as xe,ah as ut,ai as mt,R as gt,aj as pt,V as ve}from"./index-9XWXAznh.js";import{_ as bt}from"./Header-CQM0Mtxj.js";import{X as Se}from"./x-BqrVQl_H.js";import{T as me}from"./target-4OWMDHux.js";import{H as ze}from"./heart-DtgRDiCS.js";import{B as Ie}from"./building-2-By194s3q.js";import{E as De}from"./eye-DW_jvoXF.js";import{I as Te}from"./info-BhcVgskR.js";import{S as xt}from"./save-YtNVuqqx.js";import{A as vt}from"./arrow-left-Q60brOqV.js";/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=X("BellIcon",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=X("BrainIcon",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=X("ChevronRightIcon",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=X("DownloadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=X("MessageSquareIcon",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=X("SparklesIcon",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),yt=["aria-labelledby"],_t={class:"px-6 pt-6 pb-4 border-b border-gray-200"},wt={class:"flex items-start justify-between"},Ct={class:"flex-1"},kt={class:"flex items-center gap-3 mb-2"},$t=["id"],jt={class:"px-6 py-5"},Et={class:"flex items-center justify-between"},At={class:"text-2xl font-bold"},Mt={class:"space-y-4"},qt={class:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2"},Rt={class:"text-sm text-gray-700 leading-relaxed"},Pt={class:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg"},St={class:"text-sm font-semibold text-blue-900 mb-2 flex items-center gap-2"},zt={class:"text-sm text-blue-800 space-y-1.5"},It={class:"px-6 py-4 bg-gray-50 rounded-b-xl flex gap-3"},Dt={__name:"ModalAccionRecomendada",props:{modelValue:{type:Boolean,required:!0},alerta:{type:Object,default:null}},emits:["update:modelValue","marcar-gestionado"],setup(_,{emit:C}){const m=_,q=C,g=P(null),f=()=>{q("update:modelValue",!1)},c=()=>{q("marcar-gestionado",m.alerta),f()},p=()=>{if(!m.alerta)return J;const y=m.alerta.categoria.toLowerCase();return y.includes("estrés")?Be:y.includes("herramientas")||y.includes("recursos")?je:y.includes("comunicación")?le:y.includes("vida")||y.includes("trabajo")?ze:m.alerta.tipo==="critica"?J:Ee},u=()=>m.alerta?m.alerta.tipo==="critica"?"bg-red-500":m.alerta.tipo==="moderada"?"bg-orange-500":"bg-green-500":"bg-gray-500",R=()=>m.alerta?m.alerta.tipo==="critica"?"text-red-700":m.alerta.tipo==="moderada"?"text-orange-700":"text-green-700":"text-gray-700",j=()=>m.alerta?m.alerta.tipo==="critica"?"bg-red-50 border border-red-200 text-red-800":m.alerta.tipo==="moderada"?"bg-orange-50 border border-orange-200 text-orange-800":"bg-green-50 border border-green-200 text-green-800":"bg-gray-50 border border-gray-200",T=()=>m.alerta?m.alerta.tipo==="critica"?"bg-red-600 hover:bg-red-700 focus:ring-red-500":m.alerta.tipo==="moderada"?"bg-orange-600 hover:bg-orange-700 focus:ring-orange-500":"bg-green-600 hover:bg-green-700 focus:ring-green-500":"bg-gray-600 hover:bg-gray-700 focus:ring-gray-500",h=()=>{if(!m.alerta)return"";const y=m.alerta.valor;return y<60?"Recomendamos implementar un programa de intervención inmediata: talleres de gestión del estrés o sesiones 1:1 de apoyo psicológico. La situación actual requiere acción urgente para evitar un mayor deterioro en esta área.":y>=60&&y<=80?"Sugerimos realizar acciones preventivas: encuestas rápidas o sesiones de comunicación interna. Esta es una oportunidad para mejorar antes de que la situación se vuelva crítica.":"No se requieren acciones urgentes. Mantén las buenas prácticas actuales y continúa monitoreando esta área para asegurar que se mantenga en niveles óptimos."},v=()=>{if(!m.alerta)return[];const y=m.alerta.categoria.toLowerCase(),k=m.alerta.valor;return y.includes("estrés")?k<60?["Programar talleres de mindfulness y gestión del estrés","Ofrecer sesiones 1:1 de apoyo psicológico","Implementar días de salud mental","Revisar cargas de trabajo del equipo"]:["Realizar encuestas de pulso más frecuentes","Ofrecer pausas activas durante la jornada","Compartir recursos de gestión del estrés","Monitorear indicadores de bienestar semanalmente"]:y.includes("herramientas")||y.includes("recursos")?k<60?["Realizar auditoría de herramientas actuales","Invertir en tecnología y capacitación","Reuniones 1:1 para identificar necesidades","Implementar nuevas soluciones inmediatamente"]:["Encuestas sobre necesidades de herramientas","Actualizar software y equipos","Capacitaciones sobre herramientas existentes","Mantener canales de feedback abiertos"]:y.includes("comunicación")?k<60?["Implementar reuniones de equipo regulares","Crear canales de comunicación transparentes","Capacitación en comunicación efectiva","Establecer protocolos de comunicación claros"]:["Reforzar canales de comunicación existentes","Town halls mensuales con el equipo","Promover feedback bidireccional","Celebrar logros y compartir actualizaciones"]:y.includes("vida")||y.includes("trabajo")?k<60?["Revisar políticas de horarios y flexibilidad","Implementar horarios flexibles o trabajo remoto","Establecer límites claros de disponibilidad","Promover desconexión fuera del horario laboral"]:["Mantener políticas de flexibilidad actuales","Promover vacaciones y días de descanso","Compartir mejores prácticas de balance","Reconocer a quienes mantienen un buen balance"]:k<60?["Realizar diagnóstico detallado del área","Implementar plan de intervención inmediata","Asignar responsables y recursos","Monitorear progreso semanalmente"]:["Realizar encuestas de seguimiento","Implementar mejoras incrementales","Compartir buenas prácticas","Mantener monitoreo continuo"]},x=y=>{y.key==="Escape"&&f()};return we(()=>m.modelValue,y=>{y?(document.body.style.overflow="hidden",document.addEventListener("keydown",x),setTimeout(()=>{var k;(k=g.value)==null||k.focus()},100)):(document.body.style.overflow="",document.removeEventListener("keydown",x))}),et(()=>{document.body.style.overflow="",document.removeEventListener("keydown",x)}),(y,k)=>(o(),N($e,{to:"body"},[r(ie,{name:"modal"},{default:Z(()=>{var W,$,b,w;return[_.modelValue?(o(),d("div",{key:0,class:"fixed inset-0 bg-black/40 flex justify-center items-center z-50 p-4",onClick:ke(f,["self"]),onKeydown:tt(f,["esc"])},[e("div",{ref_key:"modalContent",ref:g,class:"bg-white rounded-xl shadow-lg w-full max-w-md transform transition-all",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title-"+((W=_.alerta)==null?void 0:W.categoria)},[e("div",_t,[e("div",wt,[e("div",Ct,[e("div",kt,[e("div",{class:l(["w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0",u()])},[(o(),N(se(p()),{class:"h-6 w-6 text-white"}))],2),e("h2",{id:"modal-title-"+(($=_.alerta)==null?void 0:$.categoria),class:"text-xl font-bold text-gray-900"}," Recomendaciones para mejorar ",8,$t)]),e("p",{class:l(["text-lg font-semibold",R()])},s((b=_.alerta)==null?void 0:b.categoria),3)]),e("button",{onClick:f,class:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Cerrar modal"},[r(n(Se),{class:"h-6 w-6"})])])]),e("div",jt,[e("div",{class:l(["mb-4 p-3 rounded-lg",j()])},[e("div",Et,[k[0]||(k[0]=e("span",{class:"font-semibold"},"Nivel actual:",-1)),e("span",At,s((w=_.alerta)==null?void 0:w.valor)+"%",1)])],2),e("div",Mt,[e("div",null,[e("h3",qt,[r(n(Ce),{class:"h-4 w-4 text-yellow-500"}),k[1]||(k[1]=E(" Recomendaciones "))]),e("p",Rt,s(h()),1)]),e("div",Pt,[e("h4",St,[r(n(me),{class:"h-4 w-4"}),k[2]||(k[2]=E(" Acciones sugeridas: "))]),e("ul",zt,[(o(!0),d(z,null,D(v(),(L,Q)=>(o(),d("li",{key:Q,class:"flex items-start gap-2"},[k[3]||(k[3]=e("span",{class:"text-blue-600 mt-0.5"},"•",-1)),e("span",null,s(L),1)]))),128))])])])]),e("div",It,[e("button",{onClick:f,class:"flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"}," Cerrar "),e("button",{onClick:c,class:l(["flex-1 px-4 py-2.5 text-sm font-medium text-white rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",T()])},[r(n(K),{class:"h-4 w-4 inline mr-2"}),k[4]||(k[4]=E(" Marcar como gestionado "))],2)])],8,yt)],32)):S("",!0)]}),_:1})]))}},Tt=ce(Dt,[["__scopeId","data-v-9f9212d1"]]),Bt={class:"space-y-6"},Gt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Lt={class:"bg-white rounded-xl p-6 shadow-sm border border-gray-200"},Vt={class:"flex items-center justify-between"},Nt={class:"bg-white rounded-xl p-6 shadow-sm border border-gray-200"},Ft={class:"flex items-center justify-between"},Ot={class:"text-3xl font-bold text-primary"},Ht={class:"w-16 h-16 rounded-full bg-indigo-100 flex items-center justify-center"},Ut={class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},Zt={class:"overflow-x-auto"},Kt={class:"min-w-full divide-y divide-gray-200"},Wt={class:"bg-white divide-y divide-gray-200"},Xt={class:"px-6 py-4 whitespace-nowrap"},Jt={class:"flex items-center"},Qt={class:"text-sm font-semibold text-gray-900"},Yt={class:"px-6 py-4 whitespace-nowrap"},es={class:"flex items-center"},ts={class:"flex-1"},ss={class:"flex items-center justify-between mb-1"},as={class:"text-sm font-semibold text-gray-900"},os={class:"w-full bg-gray-200 rounded-full h-2"},rs={class:"px-6 py-4 whitespace-nowrap"},ns={class:"flex items-center gap-2"},is={class:"px-6 py-4 whitespace-nowrap"},ls={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},ds={class:"space-y-4"},cs={class:"flex items-center justify-between"},us={class:"text-sm font-medium text-gray-700"},ms={class:"relative w-full bg-gray-200 rounded-full h-8"},gs={class:"text-xs font-semibold text-white"},ps={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},bs={class:"bg-red-50 border border-red-200 rounded-xl p-6"},xs={class:"flex items-center mb-3"},vs={class:"text-2xl font-bold text-red-700 mb-1"},fs={class:"text-xs text-red-600"},hs={class:"bg-orange-50 border border-orange-200 rounded-xl p-6"},ys={class:"flex items-center mb-3"},_s={class:"text-2xl font-bold text-orange-700 mb-1"},ws={class:"text-xs text-orange-600"},Cs={class:"bg-green-50 border border-green-200 rounded-xl p-6"},ks={class:"flex items-center mb-3"},$s={class:"text-2xl font-bold text-green-700 mb-1"},js={class:"text-xs text-green-600"},Es={__name:"ResultadosPorDepartamento",setup(_){const C=P([{nombre:"RRHH",participacion:92,promedio:4.6},{nombre:"Marketing",participacion:78,promedio:4.1},{nombre:"Ventas",participacion:63,promedio:3.2},{nombre:"Producción",participacion:70,promedio:3.8},{nombre:"Desarrollo",participacion:88,promedio:4.3},{nombre:"Administración",participacion:85,promedio:4.5}]),m=B(()=>C.value.reduce((v,x)=>v+x.promedio,0)/C.value.length),q=B(()=>C.value.reduce((v,x)=>v+x.participacion,0)/C.value.length),g=B(()=>[...C.value].sort((h,v)=>v.promedio-h.promedio)),f=B(()=>C.value.filter(h=>h.promedio<3)),c=B(()=>C.value.filter(h=>h.promedio>=3&&h.promedio<4)),p=B(()=>C.value.filter(h=>h.promedio>=4)),u=h=>h<3?{bg:"bg-red-50",bgBar:"bg-red-500",text:"text-red-700",border:"border-red-200"}:h<4?{bg:"bg-orange-50",bgBar:"bg-orange-500",text:"text-orange-700",border:"border-orange-200"}:{bg:"bg-green-50",bgBar:"bg-green-500",text:"text-green-700",border:"border-green-200"},R=h=>h<3?"bg-red-50 text-red-700 border border-red-200":h<4?"bg-orange-50 text-orange-700 border border-orange-200":"bg-green-50 text-green-700 border border-green-200",j=h=>h<3?"bg-red-500":h<4?"bg-orange-500":"bg-green-500",T=h=>h<3?"Alto riesgo":h<4?"Riesgo moderado":"Clima saludable";return(h,v)=>(o(),d("div",Bt,[v[11]||(v[11]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Resultados por Departamento"),e("p",{class:"text-gray-600 mt-1"},"Visualiza la tasa de participación y el promedio de bienestar en cada área.")],-1)),e("div",Gt,[e("div",Lt,[e("div",Vt,[e("div",null,[v[0]||(v[0]=e("p",{class:"text-sm font-medium text-gray-500 mb-1"},"Promedio General",-1)),e("p",{class:l(["text-3xl font-bold",u(m.value).text])},s(m.value.toFixed(1)),3),v[1]||(v[1]=e("p",{class:"text-xs text-gray-500 mt-1"},"de 5.0",-1))]),e("div",{class:l(["w-16 h-16 rounded-full flex items-center justify-center",u(m.value).bg])},[r(n(Ae),{class:l(["h-8 w-8",u(m.value).text])},null,8,["class"])],2)])]),e("div",Nt,[e("div",Ft,[e("div",null,[v[2]||(v[2]=e("p",{class:"text-sm font-medium text-gray-500 mb-1"},"Participación Global",-1)),e("p",Ot,s(q.value.toFixed(0))+"% ",1),v[3]||(v[3]=e("p",{class:"text-xs text-gray-500 mt-1"},"de todos los empleados",-1))]),e("div",Ht,[r(n(Me),{class:"h-8 w-8 text-primary"})])])])]),e("div",Ut,[e("div",Zt,[e("table",Kt,[v[5]||(v[5]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Departamento "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Participación "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Promedio "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Estado ")])],-1)),e("tbody",Wt,[(o(!0),d(z,null,D(C.value,x=>(o(),d("tr",{key:x.nombre,class:"hover:bg-gray-50 transition-colors"},[e("td",Xt,[e("div",Jt,[e("div",{class:l(["w-10 h-10 rounded-lg flex items-center justify-center mr-3",u(x.promedio).bg])},[r(n(Ie),{class:l(["h-5 w-5",u(x.promedio).text])},null,8,["class"])],2),e("div",null,[e("div",Qt,s(x.nombre),1)])])]),e("td",Yt,[e("div",es,[e("div",ts,[e("div",ss,[e("span",as,s(x.participacion)+"%",1)]),e("div",os,[e("div",{class:l(["h-2 rounded-full transition-all duration-300",x.participacion>=80?"bg-green-500":x.participacion>=60?"bg-yellow-500":"bg-red-500"]),style:de({width:`${x.participacion}%`})},null,6)])])])]),e("td",rs,[e("div",ns,[e("span",{class:l(["text-2xl font-bold",u(x.promedio).text])},s(x.promedio.toFixed(1)),3),v[4]||(v[4]=e("span",{class:"text-sm text-gray-500"},"/ 5.0",-1))])]),e("td",is,[e("span",{class:l(["inline-flex items-center px-3 py-1 rounded-full text-xs font-medium",R(x.promedio)])},[e("span",{class:l(["w-2 h-2 rounded-full mr-2",j(x.promedio)])},null,2),E(" "+s(T(x.promedio)),1)],2)])]))),128))])])])]),e("div",ls,[v[6]||(v[6]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Comparativa de clima laboral por departamento",-1)),e("div",ds,[(o(!0),d(z,null,D(g.value,x=>(o(),d("div",{key:x.nombre,class:"space-y-2"},[e("div",cs,[e("span",us,s(x.nombre),1),e("span",{class:l(["text-sm font-bold",u(x.promedio).text])},s(x.promedio.toFixed(1)),3)]),e("div",ms,[e("div",{class:l(["h-8 rounded-full transition-all duration-500 flex items-center justify-end pr-3",u(x.promedio).bgBar]),style:de({width:`${x.promedio/5*100}%`})},[e("span",gs,s(x.promedio.toFixed(1)),1)],6)])]))),128))]),v[7]||(v[7]=st('<div class="mt-6 pt-6 border-t border-gray-200"><p class="text-xs font-medium text-gray-500 uppercase tracking-wider mb-3">Interpretación</p><div class="flex flex-wrap gap-4"><div class="flex items-center"><div class="w-3 h-3 rounded-full bg-red-500 mr-2"></div><span class="text-xs text-gray-600">&lt; 3.0 - Alto riesgo</span></div><div class="flex items-center"><div class="w-3 h-3 rounded-full bg-orange-500 mr-2"></div><span class="text-xs text-gray-600">3.0 - 4.0 - Riesgo moderado</span></div><div class="flex items-center"><div class="w-3 h-3 rounded-full bg-green-500 mr-2"></div><span class="text-xs text-gray-600">&gt; 4.0 - Clima saludable</span></div></div></div>',1))]),e("div",ps,[e("div",bs,[e("div",xs,[r(n(J),{class:"h-5 w-5 text-red-600 mr-2"}),v[8]||(v[8]=e("h4",{class:"text-sm font-semibold text-red-900"},"Alto Riesgo",-1))]),e("p",vs,s(f.value.length),1),e("p",fs,s(f.value.length===0?"Sin departamentos":f.value.map(x=>x.nombre).join(", ")),1)]),e("div",hs,[e("div",ys,[r(n(qe),{class:"h-5 w-5 text-orange-600 mr-2"}),v[9]||(v[9]=e("h4",{class:"text-sm font-semibold text-orange-900"},"Riesgo Moderado",-1))]),e("p",_s,s(c.value.length),1),e("p",ws,s(c.value.length===0?"Sin departamentos":c.value.map(x=>x.nombre).join(", ")),1)]),e("div",Cs,[e("div",ks,[r(n(K),{class:"h-5 w-5 text-green-600 mr-2"}),v[10]||(v[10]=e("h4",{class:"text-sm font-semibold text-green-900"},"Clima Saludable",-1))]),e("p",$s,s(p.value.length),1),e("p",js,s(p.value.length===0?"Sin departamentos":p.value.map(x=>x.nombre).join(", ")),1)])])]))}},fe=[{id:"mejora",titulo:"Comunicación: Plan de Mejora",cuerpo:`Tras los resultados de la encuesta {nombre_encuesta}, hemos detectado áreas de mejora y estamos implementando acciones específicas para fortalecer nuestro clima laboral.

Nuestro compromiso es trabajar juntos para mejorar estos aspectos clave:
• Implementar nuevas iniciativas de bienestar
• Reforzar canales de comunicación
• Desarrollar planes de acción por departamento

Agradecemos vuestra participación y seguiremos informando sobre los avances.`,icono:"📊",color:"orange"},{id:"felicitacion",titulo:"Comunicación: Clima Positivo",cuerpo:`Los resultados de la encuesta {nombre_encuesta} reflejan un alto nivel de compromiso y bienestar. ¡Gracias por formar parte de este logro colectivo!

Vuestro feedback positivo demuestra que estamos en el camino correcto:
• Excelente clima de trabajo en equipo
• Alto nivel de satisfacción general
• Compromiso con los valores organizacionales

Seguiremos trabajando para mantener este ambiente positivo.`,icono:"🎉",color:"green"},{id:"general",titulo:"Comunicación General",cuerpo:`Queremos agradecer la participación de todos en la encuesta {nombre_encuesta}. Pronto estaremos implementando nuevas iniciativas basadas en vuestros aportes.

Vuestra opinión es fundamental para:
• Identificar oportunidades de mejora
• Diseñar planes de acción efectivos
• Fortalecer nuestra cultura organizacional

Os mantendremos informados sobre los próximos pasos y las acciones que implementaremos.`,icono:"📢",color:"blue"},{id:"acciones",titulo:"Comunicación: Acciones Implementadas",cuerpo:`Basándonos en los resultados de {nombre_encuesta}, hemos implementado las siguientes acciones concretas:

✓ Nuevos programas de bienestar y apoyo
✓ Mejoras en infraestructura y recursos
✓ Espacios de escucha y feedback continuo
✓ Formación en gestión del estrés y liderazgo

Estas son solo las primeras iniciativas. Continuaremos trabajando en crear el mejor ambiente laboral posible.`,icono:"✅",color:"indigo"}],As=[{id:"todos",label:"Todos los empleados",descripcion:"Enviar a toda la organización",icono:"👥"},{id:"lideres",label:"Solo líderes",descripcion:"Enviar únicamente a roles de liderazgo",icono:"👔"},{id:"riesgo_alto",label:"Departamentos con riesgo alto",descripcion:"Áreas que requieren atención prioritaria",icono:"⚠️"},{id:"riesgo_moderado",label:"Departamentos con riesgo moderado",descripcion:"Áreas con oportunidades de mejora",icono:"📊"}],Ms=_=>({..._,id:`com-${Date.now()}`,fecha_envio:new Date,estado:"enviado"}),qs={key:0,class:"bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto"},Rs={class:"sticky top-0 bg-gradient-to-r from-indigo-50 to-purple-50 px-6 py-5 border-b border-gray-200 z-10"},Ps={class:"flex items-center justify-between"},Ss={class:"flex items-center"},zs={class:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center mr-4"},Is={class:"p-6 space-y-6"},Ds={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Ts=["onClick"],Bs={class:"text-3xl mr-3"},Gs={class:"flex-1"},Ls={class:"font-semibold text-gray-900 text-sm"},Vs={class:"text-xs text-gray-600 mt-1 line-clamp-2"},Ns={key:0},Fs={class:"flex items-center justify-between mt-2"},Os={class:"text-xs text-gray-500"},Hs={class:"font-medium"},Us={key:1,class:"bg-gray-50 rounded-xl p-5 border border-gray-200"},Zs={class:"flex items-center mb-3"},Ks={class:"bg-white rounded-lg p-4 shadow-sm"},Ws={class:"flex items-center mb-3 pb-3 border-b border-gray-200"},Xs={class:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center mr-3"},Js={class:"text-sm text-gray-700 leading-relaxed whitespace-pre-line"},Qs={class:"space-y-2"},Ys=["value"],ea={class:"ml-3 flex-1"},ta={class:"flex items-center"},sa={class:"text-lg mr-2"},aa={class:"font-medium text-sm text-gray-900"},oa={class:"text-xs text-gray-600 mt-1"},ra={key:2,class:"bg-blue-50 border border-blue-200 rounded-xl p-4"},na={class:"flex items-start"},ia={class:"text-xs text-blue-800"},la={class:"sticky bottom-0 bg-gray-50 px-6 py-4 border-t border-gray-200 flex justify-between items-center"},da={class:"flex gap-3"},ca=["disabled"],ua=["disabled"],ma={__name:"ModalComunicadoPostEncuesta",props:{isOpen:{type:Boolean,required:!0},nombreEncuesta:{type:String,required:!0},encuestaId:{type:String,default:""}},emits:["close","comunicado-enviado"],setup(_,{emit:C}){const m=_,q=C,g=ue(),f=P(null),c=P(""),p=P(["todos"]),u=P(!1),R=P(null),j=B(()=>{let $=0;return p.value.includes("todos")&&($+=70),p.value.includes("lideres")&&($+=12),p.value.includes("riesgo_alto")&&($+=15),p.value.includes("riesgo_moderado")&&($+=25),Math.min($,70)}),T=$=>{f.value=$,c.value=$.cuerpo.replace("{nombre_encuesta}",m.nombreEncuesta)},h=()=>{f.value&&(c.value=f.value.cuerpo.replace("{nombre_encuesta}",m.nombreEncuesta))},v=()=>{g.add({severity:"info",summary:"Borrador guardado",detail:"El comunicado ha sido guardado como borrador",life:3e3})},x=async()=>{var $;if(!c.value||p.value.length===0){g.add({severity:"warn",summary:"Campos incompletos",detail:"Completa el mensaje y selecciona al menos un destinatario",life:4e3});return}u.value=!0;try{await new Promise(w=>setTimeout(w,1500));const b=Ms({encuesta_id:m.encuestaId,nombre_encuesta:m.nombreEncuesta,tipo:(($=f.value)==null?void 0:$.id)||"general",cuerpo:c.value,destinatarios:p.value,total_destinatarios:j.value});R.value=b,g.add({severity:"success",summary:"Comunicado enviado correctamente",detail:`Se ha enviado a ${j.value} destinatarios`,life:5e3}),q("comunicado-enviado",b),setTimeout(()=>{y()},1e3)}catch{g.add({severity:"error",summary:"Error al enviar",detail:"No se pudo enviar el comunicado. Intenta de nuevo.",life:4e3})}finally{u.value=!1}},y=()=>{q("close"),setTimeout(()=>{f.value=null,c.value="",p.value=["todos"]},200)},k=$=>new Date($).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),W=$=>{const b=fe.find(w=>w.id===$);return(b==null?void 0:b.titulo)||"Comunicación General"};return we(()=>m.isOpen,$=>{$||(f.value=null,c.value="")}),($,b)=>(o(),N($e,{to:"body"},[r(ie,{"enter-active-class":"transition-opacity duration-200","leave-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","leave-to-class":"opacity-0"},{default:Z(()=>[_.isOpen?(o(),d("div",{key:0,class:"fixed inset-0 bg-black/30 backdrop-blur-sm flex justify-center items-center z-50 p-4",onClick:ke(y,["self"])},[r(ie,{"enter-active-class":"transition-all duration-200","leave-active-class":"transition-all duration-200","enter-from-class":"opacity-0 scale-95","leave-to-class":"opacity-0 scale-95"},{default:Z(()=>[_.isOpen?(o(),d("div",qs,[e("div",Rs,[e("div",Ps,[e("div",Ss,[e("div",zs,[r(n(Ge),{class:"h-6 w-6 text-white"})]),b[2]||(b[2]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Comunicar Resultados"),e("p",{class:"text-sm text-gray-600 mt-1"},"Crea un comunicado sobre las acciones post-encuesta")],-1))]),e("button",{onClick:y,class:"text-gray-400 hover:text-gray-600 transition-colors p-2 hover:bg-white/50 rounded-lg"},[r(n(Se),{class:"h-6 w-6"})])])]),e("div",Is,[e("div",null,[b[3]||(b[3]=e("label",{class:"block text-sm font-semibold text-gray-900 mb-3"}," Selecciona una plantilla ",-1)),e("div",Ds,[(o(!0),d(z,null,D(n(fe),w=>{var L;return o(),d("button",{key:w.id,onClick:Q=>T(w),class:l(["flex items-start p-4 border-2 rounded-xl text-left transition-all hover:shadow-md",((L=f.value)==null?void 0:L.id)===w.id?`border-${w.color}-500 bg-${w.color}-50 ring-2 ring-${w.color}-200`:"border-gray-300 bg-white hover:border-gray-400"])},[e("div",Bs,s(w.icono),1),e("div",Gs,[e("h3",Ls,s(w.titulo),1),e("p",Vs,s(w.cuerpo.substring(0,80))+"...",1)])],10,Ts)}),128))])]),f.value?(o(),d("div",Ns,[b[5]||(b[5]=e("label",{class:"block text-sm font-semibold text-gray-900 mb-2"}," Personaliza el mensaje ",-1)),pe(e("textarea",{"onUpdate:modelValue":b[0]||(b[0]=w=>c.value=w),rows:"8",class:"w-full px-4 py-3 rounded-lg border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm",placeholder:"Escribe o edita el mensaje del comunicado..."},null,512),[[at,c.value]]),e("div",Fs,[e("p",Os,[e("span",Hs,s(c.value.length),1),b[4]||(b[4]=E(" caracteres "))]),e("button",{onClick:h,class:"text-xs text-indigo-600 hover:text-indigo-700 font-medium"}," Restaurar plantilla original ")])])):S("",!0),c.value?(o(),d("div",Us,[e("div",Zs,[r(n(De),{class:"h-5 w-5 text-gray-600 mr-2"}),b[6]||(b[6]=e("h3",{class:"text-sm font-semibold text-gray-900"},"Vista Previa",-1))]),e("div",Ks,[e("div",Ws,[e("div",Xs,[r(n(Ie),{class:"h-5 w-5 text-indigo-600"})]),b[7]||(b[7]=e("div",null,[e("p",{class:"font-semibold text-sm text-gray-900"},"Recursos Humanos"),e("p",{class:"text-xs text-gray-500"},"Hoy")],-1))]),e("p",Js,s(c.value),1)])])):S("",!0),e("div",null,[b[8]||(b[8]=e("label",{class:"block text-sm font-semibold text-gray-900 mb-3"}," Selecciona destinatarios ",-1)),e("div",Qs,[(o(!0),d(z,null,D(n(As),w=>(o(),d("label",{key:w.id,class:l(["flex items-start p-3 border-2 rounded-lg cursor-pointer transition-all hover:bg-gray-50",p.value.includes(w.id)?"border-indigo-500 bg-indigo-50":"border-gray-300"])},[pe(e("input",{type:"checkbox",value:w.id,"onUpdate:modelValue":b[1]||(b[1]=L=>p.value=L),class:"mt-1 h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,Ys),[[ot,p.value]]),e("div",ea,[e("div",ta,[e("span",sa,s(w.icono),1),e("span",aa,s(w.label),1)]),e("p",oa,s(w.descripcion),1)])],2))),128))])]),R.value?(o(),d("div",ra,[e("div",na,[r(n(Te),{class:"h-5 w-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),e("div",null,[b[12]||(b[12]=e("p",{class:"text-sm font-semibold text-blue-900 mb-1"},"Último comunicado enviado",-1)),e("p",ia,[b[9]||(b[9]=e("strong",null,"Fecha:",-1)),E(" "+s(k(R.value.fecha_envio))+" • ",1),b[10]||(b[10]=e("strong",null,"Tipo:",-1)),E(" "+s(W(R.value.tipo))+" • ",1),b[11]||(b[11]=e("strong",null,"Destinatarios:",-1)),E(" "+s(R.value.total_destinatarios)+" personas ",1)])])])])):S("",!0)]),e("div",la,[e("button",{onClick:y,class:"px-5 py-2 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors"}," Cancelar "),e("div",da,[e("button",{onClick:v,disabled:!c.value||p.value.length===0,class:"px-5 py-2 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[r(n(xt),{class:"h-4 w-4 inline mr-2"}),b[13]||(b[13]=E(" Guardar borrador "))],8,ca),e("button",{onClick:x,disabled:!c.value||p.value.length===0||u.value,class:"px-5 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center"},[u.value?(o(),N(n(rt),{key:1,class:"h-4 w-4 mr-2 animate-spin"})):(o(),N(n(Re),{key:0,class:"h-4 w-4 mr-2"})),E(" "+s(u.value?"Enviando...":"Enviar comunicado"),1)],8,ua)])])])):S("",!0)]),_:1})])):S("",!0)]),_:1})]))}},he=[{id:"clima-laboral",nombre:"Programa de Clima Laboral Positivo",descripcion:"Talleres y dinámicas para mejorar el ambiente de trabajo y las relaciones interpersonales.",icono:"🌟",dimensiones:["clima_laboral","ambiente_trabajo"],umbralActivacion:3.5,categoria:"bienestar_organizacional"},{id:"liderazgo-efectivo",nombre:"Capacitación en Liderazgo Efectivo",descripcion:"Programa de desarrollo de habilidades de liderazgo para mandos medios y directivos.",icono:"👥",dimensiones:["liderazgo","supervision","gestion_equipos"],umbralActivacion:3.5,categoria:"desarrollo_liderazgo"},{id:"balance-vida",nombre:"Equilibrio Vida-Trabajo",descripcion:"Estrategias de gestión del tiempo, flexibilidad laboral y bienestar personal.",icono:"⚖️",dimensiones:["balance_vida_trabajo","carga_trabajo","horarios"],umbralActivacion:3.3,categoria:"bienestar_personal"},{id:"comunicacion-interna",nombre:"Mejora de Comunicación Organizacional",descripcion:"Herramientas y canales para optimizar la comunicación entre equipos y niveles.",icono:"💬",dimensiones:["comunicacion","transparencia","informacion"],umbralActivacion:3.5,categoria:"comunicacion"},{id:"reconocimiento",nombre:"Sistema de Reconocimiento y Recompensas",descripcion:"Programa para valorar logros, esfuerzos y contribuciones del equipo.",icono:"🏆",dimensiones:["reconocimiento","motivacion","valoracion"],umbralActivacion:3.5,categoria:"motivacion"},{id:"desarrollo-profesional",nombre:"Plan de Desarrollo y Crecimiento",descripcion:"Rutas de carrera, capacitaciones y oportunidades de crecimiento profesional.",icono:"📈",dimensiones:["desarrollo","crecimiento","capacitacion","carrera"],umbralActivacion:3.5,categoria:"desarrollo_profesional"},{id:"salud-mental",nombre:"Apoyo en Salud Mental y Bienestar",descripcion:"Sesiones de psicología, mindfulness y gestión del estrés.",icono:"🧘",dimensiones:["estres","salud_mental","bienestar_emocional","presion"],umbralActivacion:3.3,categoria:"salud_bienestar"},{id:"trabajo-equipo",nombre:"Fortalecimiento de Trabajo en Equipo",descripcion:"Dinámicas de team building y colaboración efectiva entre áreas.",icono:"🤝",dimensiones:["colaboracion","trabajo_equipo","coordinacion"],umbralActivacion:3.5,categoria:"trabajo_equipo"},{id:"gestion-conflictos",nombre:"Gestión de Conflictos y Mediación",descripcion:"Herramientas para resolver conflictos de manera constructiva.",icono:"🤲",dimensiones:["conflictos","relaciones_laborales","resolucion"],umbralActivacion:3.3,categoria:"resolucion_conflictos"},{id:"autonomia-empoderamiento",nombre:"Autonomía y Empoderamiento",descripcion:"Promover la toma de decisiones y la responsabilidad individual.",icono:"💪",dimensiones:["autonomia","empoderamiento","participacion","decision"],umbralActivacion:3.5,categoria:"empoderamiento"},{id:"recursos-condiciones",nombre:"Optimización de Recursos y Condiciones",descripcion:"Mejora de infraestructura, herramientas y condiciones físicas de trabajo.",icono:"🛠️",dimensiones:["recursos","herramientas","condiciones_fisicas","infraestructura"],umbralActivacion:3.5,categoria:"recursos_infraestructura"},{id:"cultura-innovacion",nombre:"Cultura de Innovación y Creatividad",descripcion:"Espacios y programas para fomentar la innovación y nuevas ideas.",icono:"💡",dimensiones:["innovacion","creatividad","propuestas"],umbralActivacion:3.5,categoria:"innovacion"}],ye=_=>_.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"_").replace(/[áàäâ]/g,"a").replace(/[éèëê]/g,"e").replace(/[íìïî]/g,"i").replace(/[óòöô]/g,"o").replace(/[úùüû]/g,"u").replace(/[ñ]/g,"n"),ga=_=>{if(!_||!_.porDimension)return[];const C=new Map,m=_.promedioGlobal||0;return Object.entries(_.porDimension).forEach(([g,f])=>{const c=f.promedio||0,p=ye(g);he.forEach(u=>{if(u.dimensiones.some(j=>{const T=ye(j);return p.includes(T)||T.includes(p)||g.toLowerCase().includes(j.toLowerCase())||j.toLowerCase().includes(g.toLowerCase())})&&c<u.umbralActivacion)if(!C.has(u.id))C.set(u.id,{...u,prioridad:u.umbralActivacion-c,dimensionesAfectadas:[g],valorMinimo:c});else{const j=C.get(u.id);j.dimensionesAfectadas.push(g),j.valorMinimo=Math.min(j.valorMinimo,c),j.prioridad=Math.max(j.prioridad,u.umbralActivacion-c)}})}),m<3.5&&["clima-laboral","salud-mental","trabajo-equipo"].forEach(f=>{const c=he.find(p=>p.id===f);c&&!C.has(f)&&C.set(f,{...c,prioridad:3.5-m,dimensionesAfectadas:["General"],valorMinimo:m})}),Array.from(C.values()).sort((g,f)=>f.prioridad-g.prioridad).slice(0,6)},ne=_=>_>=1.5?{texto:"Alta",color:"text-red-600",bg:"bg-red-100"}:_>=.8?{texto:"Media",color:"text-orange-600",bg:"bg-orange-100"}:{texto:"Baja",color:"text-yellow-600",bg:"bg-yellow-100"},_e=_=>({bienestar_organizacional:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-700"},desarrollo_liderazgo:{bg:"bg-purple-50",border:"border-purple-200",text:"text-purple-700"},bienestar_personal:{bg:"bg-green-50",border:"border-green-200",text:"text-green-700"},comunicacion:{bg:"bg-cyan-50",border:"border-cyan-200",text:"text-cyan-700"},motivacion:{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-700"},desarrollo_profesional:{bg:"bg-indigo-50",border:"border-indigo-200",text:"text-indigo-700"},salud_bienestar:{bg:"bg-pink-50",border:"border-pink-200",text:"text-pink-700"},trabajo_equipo:{bg:"bg-teal-50",border:"border-teal-200",text:"text-teal-700"},resolucion_conflictos:{bg:"bg-orange-50",border:"border-orange-200",text:"text-orange-700"},empoderamiento:{bg:"bg-violet-50",border:"border-violet-200",text:"text-violet-700"},recursos_infraestructura:{bg:"bg-gray-50",border:"border-gray-200",text:"text-gray-700"},innovacion:{bg:"bg-fuchsia-50",border:"border-fuchsia-200",text:"text-fuchsia-700"}})[_]||{bg:"bg-gray-50",border:"border-gray-200",text:"text-gray-700"},pa={class:"bg-gray-50 p-6 rounded-xl space-y-6"},ba={class:"flex items-center justify-between"},xa={class:"text-2xl font-bold text-gray-900 flex items-center gap-3"},va={class:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center"},fa={key:0,class:"flex items-center gap-2 px-4 py-2 bg-indigo-100 rounded-full"},ha={class:"text-sm font-semibold text-indigo-700"},ya={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_a={class:"flex items-start gap-4"},wa={class:"flex-shrink-0"},Ca={class:"flex-1 min-w-0"},ka={class:"flex items-start justify-between gap-2 mb-2"},$a={class:"text-base font-semibold text-gray-900"},ja={class:"text-sm text-gray-600 mb-3"},Ea={class:"mb-3"},Aa={class:"flex flex-wrap gap-1"},Ma={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700"},qa=["onClick"],Ra={key:1,class:"bg-white rounded-lg p-8 text-center"},Pa={class:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4"},Sa={class:"bg-indigo-50 border border-indigo-200 rounded-lg p-4"},za={class:"flex items-start gap-3"},Ia={__name:"RecomendacionesSmart",props:{resultados:{type:Object,required:!0}},setup(_){const C=Pe();ue();const m=_,q=B(()=>ga(m.resultados)),g=f=>{const p={"clima-laboral":"trabajo_equipo","liderazgo-efectivo":"liderazgo_consciente","balance-vida":"balance_vida_trabajo","comunicacion-interna":"comunicacion_interna",reconocimiento:"cultura_feedback","desarrollo-profesional":"retencion_talento","salud-mental":"bienestar_mental","trabajo-equipo":"trabajo_equipo","gestion-conflictos":"trabajo_equipo","autonomia-empoderamiento":"retencion_talento","recursos-condiciones":"trabajo_equipo","cultura-innovacion":"retencion_talento"}[f.id]||"liderazgo_consciente";C.push({name:"admin-servicios",query:{servicio:p}})};return(f,c)=>(o(),d("div",pa,[e("div",ba,[e("div",null,[e("h3",xa,[e("div",va,[r(n(ht),{class:"h-6 w-6 text-white"})]),c[0]||(c[0]=E(" Recomendaciones SMART "))]),c[1]||(c[1]=e("p",{class:"text-sm text-gray-600 mt-2"}," Programas y servicios sugeridos según los resultados del diagnóstico ",-1))]),q.value.length>0?(o(),d("div",fa,[r(n(me),{class:"h-5 w-5 text-indigo-600"}),e("span",ha,s(q.value.length)+" recomendación"+s(q.value.length!==1?"es":""),1)])):S("",!0)]),q.value.length>0?(o(),d("div",ya,[(o(!0),d(z,null,D(q.value,(p,u)=>(o(),d("div",{key:p.id,class:l(["bg-white p-5 rounded-lg shadow-sm hover:shadow-md transition-shadow border-l-4",n(_e)(p.categoria).border]),style:de([{animationDelay:`${u*.1}s`},{animation:"slideInUp 0.5s ease-out forwards",opacity:"0"}])},[e("div",_a,[e("div",wa,[e("div",{class:l(["w-14 h-14 rounded-xl flex items-center justify-center text-3xl shadow-sm",n(_e)(p.categoria).bg])},s(p.icono),3)]),e("div",Ca,[e("div",ka,[e("h4",$a,s(p.nombre),1),e("span",{class:l(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium whitespace-nowrap",[n(ne)(p.prioridad).bg,n(ne)(p.prioridad).color]])},s(n(ne)(p.prioridad).texto),3)]),e("p",ja,s(p.descripcion),1),e("div",Ea,[c[2]||(c[2]=e("p",{class:"text-xs font-medium text-gray-500 mb-1"},"Áreas a mejorar:",-1)),e("div",Aa,[(o(!0),d(z,null,D(p.dimensionesAfectadas.slice(0,3),R=>(o(),d("span",{key:R,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700"},s(R),1))),128)),p.dimensionesAfectadas.length>3?(o(),d("span",Ma," +"+s(p.dimensionesAfectadas.length-3)+" más ",1)):S("",!0)])]),e("button",{onClick:R=>g(p),class:"w-full flex items-center justify-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition-colors text-sm font-medium"},[r(n(De),{class:"h-4 w-4"}),c[3]||(c[3]=E(" Ver programa "))],8,qa)])])],6))),128))])):(o(),d("div",Ra,[e("div",Pa,[r(n(K),{class:"h-8 w-8 text-green-600"})]),c[4]||(c[4]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-2"}," Excelentes resultados ",-1)),c[5]||(c[5]=e("p",{class:"text-gray-600"}," No se detectaron áreas que requieran programas de mejora inmediatos. El equipo muestra un buen nivel de bienestar en todas las dimensiones. ",-1))])),e("div",Sa,[e("div",za,[r(n(Te),{class:"h-5 w-5 text-indigo-600 flex-shrink-0 mt-0.5"}),c[6]||(c[6]=e("p",{class:"text-sm text-indigo-900"},[e("span",{class:"font-semibold"},"Nota:"),E(" Estas recomendaciones se generan automáticamente según los resultados obtenidos en el diagnóstico Clima360 Insight. Cada programa está diseñado para abordar las áreas específicas que presentan oportunidades de mejora. ")],-1))])])]))}},Da=ce(Ia,[["__scopeId","data-v-26dbf8f1"]]),Ta={class:"min-h-screen bg-gray-50"},Ba={class:"py-8"},Ga={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},La={key:0,class:"bg-white rounded-lg shadow-sm p-8 text-center"},Va={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-6 text-center"},Na={class:"text-red-600 mb-4"},Fa={key:2,class:"space-y-8"},Oa={class:"flex","aria-label":"Breadcrumb"},Ha={class:"flex items-center space-x-4"},Ua={class:"flex items-center"},Za={class:"flex items-center"},Ka={class:"text-sm font-medium text-gray-900"},Wa={class:"sticky top-0 z-10 bg-gray-50 -mx-4 px-4 sm:-mx-6 sm:px-6 lg:-mx-8 lg:px-8 py-4"},Xa={class:"bg-white rounded-xl shadow-lg border border-gray-200 p-5"},Ja={class:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4"},Qa={class:"flex items-center gap-6 flex-wrap"},Ya={class:"flex items-center gap-3"},eo={class:"max-w-lg"},to={class:"bg-white rounded-lg shadow-sm p-6"},so={class:"flex justify-between items-start"},ao={class:"flex-1"},oo={class:"flex items-center gap-3 mb-2"},ro={class:"text-3xl font-bold text-gray-900"},no={class:"flex items-center space-x-6 text-sm text-gray-500"},io={class:"flex items-center"},lo={class:"flex items-center"},co={class:"flex items-center"},uo={class:"flex space-x-3"},mo={class:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl shadow-lg border border-blue-100 overflow-hidden"},go={class:"px-8 py-6 border-b border-blue-200 bg-white/50"},po={class:"flex items-center"},bo={class:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center mr-4"},xo={class:"p-8"},vo={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6"},fo={class:"lg:col-span-1 text-center"},ho={class:"text-center"},yo={class:"lg:col-span-2"},_o={class:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden"},wo={class:"px-8 py-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-pink-50"},Co={class:"flex items-center"},ko={class:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl flex items-center justify-center mr-4"},$o={class:"p-8"},jo={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Eo={class:"flex items-start gap-4"},Ao={class:"flex-1 min-w-0"},Mo={class:"flex items-center gap-2 mb-3"},qo={key:0,class:"space-y-8"},Ro={class:"bg-gray-50 px-6 py-4 border-b border-gray-200"},Po={class:"text-lg font-semibold text-gray-900"},So={class:"p-6"},zo={key:0,class:"mb-6 bg-yellow-50 text-yellow-800 border border-yellow-300 rounded-lg p-4 flex items-start gap-3"},Io={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},Do={class:"bg-gray-50 rounded-lg p-6"},To={class:"relative h-64 w-full"},Bo=["id"],Go={class:"space-y-6"},Lo={class:"p-4 bg-blue-50 border border-blue-200 rounded-lg"},Vo={class:"flex items-start"},No={class:"text-blue-800 font-medium"},Fo={key:0,class:"p-4 bg-orange-50 border border-orange-200 rounded-lg"},Oo={class:"flex items-start justify-between"},Ho={class:"flex-1"},Uo={class:"flex items-start"},Zo={class:"font-semibold text-orange-900 mb-1"},Ko={class:"text-orange-800 text-sm"},Wo={key:1,class:"p-4 bg-green-50 border border-green-200 rounded-lg"},Xo={class:"flex items-center"},Jo={class:"space-y-2"},Qo={class:"text-sm text-gray-700"},Yo={class:"flex items-center"},er={class:"text-sm font-medium text-gray-900 mr-2"},tr={class:"text-xs text-gray-500"},sr={key:0},ar={class:"space-y-3"},or={key:0,class:"p-3 bg-gray-50 border border-gray-200 rounded-lg"},rr={class:"flex items-center justify-between mb-2"},nr={class:"font-medium text-gray-900"},ir={class:"text-sm text-gray-500"},lr={class:"text-sm text-gray-700"},dr={class:"font-semibold"},cr={class:"bg-white rounded-lg shadow-sm p-6"},ur={class:"flex items-center justify-between mb-4"},mr={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},gr={class:"text-center p-4 bg-blue-50 rounded-lg"},pr={class:"text-2xl font-bold text-blue-600"},br={class:"text-center p-4 bg-green-50 rounded-lg"},xr={class:"text-2xl font-bold text-green-600"},vr={class:"text-center p-4 bg-purple-50 rounded-lg"},fr={class:"text-2xl font-bold text-purple-600"},hr={class:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden"},yr={class:"px-8 py-6 border-b border-gray-200 bg-gradient-to-r from-red-50 to-orange-50"},_r={class:"flex items-center justify-between"},wr={class:"flex items-center"},Cr={class:"w-12 h-12 bg-gradient-to-br from-red-500 to-orange-600 rounded-xl flex items-center justify-center mr-4"},kr={class:"text-right"},$r={class:"text-sm text-gray-600"},jr={class:"p-8"},Er={key:0,class:"bg-green-50 rounded-lg p-4 shadow-sm flex items-center gap-3 text-sm border border-green-200"},Ar={class:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0"},Mr={key:1,class:"space-y-3"},qr=["onClick"],Rr={class:"flex-1 min-w-0"},Pr={class:"flex items-start justify-between gap-2 mb-1"},Sr={key:0,class:"ml-2 text-xs font-normal text-green-600"},zr={class:"flex-shrink-0 text-gray-400"},Ir={class:"mt-6 pt-6 border-t border-gray-200"},Dr={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Tr={class:"bg-red-50 rounded-lg p-4 text-center border border-red-200"},Br={class:"text-2xl font-bold text-red-600"},Gr={class:"bg-orange-50 rounded-lg p-4 text-center border border-orange-200"},Lr={class:"text-2xl font-bold text-orange-600"},Vr={class:"bg-green-50 rounded-lg p-4 text-center border border-green-200"},Nr={class:"text-2xl font-bold text-green-600"},Fr={__name:"ResultadosEncuestaView",setup(_){be.register(...nt);const C=lt(),m=Pe(),q=ue(),g=P(null),f=P(!0),c=P(null),p=P({}),u=P(72),R=P("up"),j=P(!1),T=P(null),h=P([]),v=P(!1),x=async()=>{f.value=!0,c.value=null;try{const a=C.params.encuestaId,t=await dt(a);g.value=t,await ct(),y()}catch(a){c.value=a.message||"Error al cargar los resultados",console.error("Error cargando resultados:",a)}finally{f.value=!1}},y=()=>{var a;(a=g.value)!=null&&a.preguntas&&g.value.preguntas.forEach(t=>{t.resultados&&setTimeout(()=>{const M=document.getElementById(`chart-${t.id}`);if(M){p.value[t.id]&&p.value[t.id].destroy();const V=M.getContext("2d"),O=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6"];p.value[t.id]=new be(V,{type:"doughnut",data:{labels:t.resultados.labels,datasets:[{data:t.resultados.data,backgroundColor:O.slice(0,t.resultados.labels.length),borderColor:"#ffffff",borderWidth:3,hoverOffset:8}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0,pointStyle:"circle",font:{size:13,weight:"500"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#ffffff",borderWidth:1,callbacks:{label:function(H){const i=H.dataset.data.reduce((I,ee)=>I+ee,0),U=Math.round(H.parsed/i*100);return`${H.label}: ${H.parsed} respuestas (${U}%)`}}}},cutout:"65%",animation:{animateRotate:!0,duration:1e3}}})}},100)})},k=()=>{m.push("/admin/encuestas")},W=()=>{v.value=!0},$=()=>{v.value=!1},b=a=>{q.add({severity:"success",summary:"Comunicado enviado",detail:`Se ha enviado el comunicado a ${a.total_destinatarios} personas`,life:4e3})},w=a=>{m.push({name:"admin-servicio-detalle",params:{id:a}})},L=()=>{q.add({severity:"info",summary:"Exportando resultados",detail:"Los resultados se están preparando para descarga...",life:4e3})},Q=()=>{m.push("/admin/crear-comunicado")},Le=a=>a.resultadosPorGrupo?a.resultadosPorGrupo.some(t=>t.total_respuestas<5):!1,A=a=>a<60?{bgClass:"bg-red-100",bgLightClass:"bg-red-50",textClass:"text-red-600",textDarkClass:"text-red-800",borderClass:"border-red-200",badgeClass:"bg-red-100 text-red-700"}:a>=60&&a<=80?{bgClass:"bg-orange-100",bgLightClass:"bg-orange-50",textClass:"text-orange-600",textDarkClass:"text-orange-800",borderClass:"border-orange-200",badgeClass:"bg-orange-100 text-orange-700"}:{bgClass:"bg-green-100",bgLightClass:"bg-green-50",textClass:"text-green-600",textDarkClass:"text-green-800",borderClass:"border-green-200",badgeClass:"bg-green-100 text-green-700"},Y=a=>a<60?{nivel:"Crítico",texto:"Nivel crítico. Requiere intervención inmediata."}:a>=60&&a<=80?{nivel:"Mejora",texto:"Área con margen de mejora. Recomendamos acciones preventivas."}:{nivel:"Saludable",texto:"Área saludable. Mantener prácticas actuales."},Ve=a=>a<60?`El bienestar global actual es del ${a}%. Este resultado indica un nivel crítico que requiere atención inmediata. Se recomienda implementar acciones de intervención urgente para mejorar el bienestar del equipo y abordar las áreas problemáticas identificadas.`:a>=60&&a<=80?`El bienestar global actual es del ${a}%. Este resultado muestra un nivel aceptable con oportunidades de mejora. Se sugiere implementar acciones preventivas y monitorear continuamente las áreas que requieren atención para evitar que la situación se deteriore.`:`El bienestar global actual es del ${a}%. Este resultado refleja un excelente estado de bienestar del equipo. Se recomienda mantener las prácticas actuales, continuar monitoreando y reforzar las iniciativas que han demostrado ser efectivas.`,Ne=a=>a<60?"Estado crítico de bienestar. Requiere atención inmediata.":a>=60&&a<=80?"Bienestar moderado. Se recomienda aplicar acciones preventivas.":"Bienestar general positivo. Mantener las iniciativas actuales.",Fe=a=>a==="up"?"bg-green-100 text-green-700":a==="down"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700",Oe=a=>a==="up"?xe:a==="down"?ut:mt,He=a=>a==="up"?"En mejora":a==="down"?"En descenso":"Estable",ae=B(()=>{var a;return(a=g.value)!=null&&a.preguntas?[{nombre:"Gestión del Estrés",valor:58,icon:Be,...Y(58),interpretacion:"Nivel crítico. Requiere intervención inmediata. El 28% del equipo reporta niveles altos de estrés.",colorClasses:A(58)},{nombre:"Herramientas y Recursos",valor:83,icon:je,...Y(83),interpretacion:"Área saludable. Mantener prácticas actuales. La mayoría del equipo se siente bien equipado.",colorClasses:A(83)},{nombre:"Comunicación Interna",valor:72,icon:le,...Y(72),interpretacion:"Área con margen de mejora. Recomendamos acciones preventivas para fortalecer la comunicación.",colorClasses:A(72)},{nombre:"Balance Vida-Trabajo",valor:68,icon:ze,...Y(68),interpretacion:"Área con margen de mejora. Considerar iniciativas que promuevan un mejor equilibrio.",colorClasses:A(68)}]:[]}),G=B(()=>{var t;if(!((t=g.value)!=null&&t.preguntas))return[];const a=[];return ae.value.forEach(M=>{const V=`${M.nombre}-${M.valor}`,O=h.value.includes(V);M.valor<60?a.push({id:V,tipo:"critica",categoria:M.nombre,valor:M.valor,titulo:`Riesgo alto en ${M.nombre}`,mensaje:`Requiere acción inmediata. El nivel actual (${M.valor}%) indica una situación crítica que necesita intervención urgente para evitar deterioro adicional.`,gestionada:O}):M.valor>=60&&M.valor<=80&&a.push({id:V,tipo:"moderada",categoria:M.nombre,valor:M.valor,titulo:`Atención moderada en ${M.nombre}`,mensaje:`Considera acciones preventivas. El nivel actual (${M.valor}%) muestra margen de mejora que puede ser abordado con estrategias proactivas.`,gestionada:O})}),a}),Ue=a=>{T.value=a,j.value=!0},Ze=a=>{h.value.includes(a.id)||h.value.push(a.id),q.add({severity:"success",summary:"Alerta gestionada",detail:`La alerta de "${a.categoria}" ha sido marcada como gestionada.`,life:4e3})},F=B(()=>{const a={criticas:0,moderadas:0,estables:0};return ae.value.forEach(t=>{t.valor<60?a.criticas++:t.valor>=60&&t.valor<=80?a.moderadas++:a.estables++}),a}),Ke=a=>a==="critica"?"bg-red-50 border-red-200":a==="moderada"?"bg-orange-50 border-orange-200":"bg-green-50 border-green-200",We=a=>a==="critica"?"bg-red-500":a==="moderada"?"bg-orange-500":"bg-green-500",Xe=a=>a==="critica"?J:a==="moderada"?Ee:K,Je=a=>a==="critica"?"text-red-900":a==="moderada"?"text-orange-900":"text-green-900",ge=a=>a==="critica"?"text-red-700":a==="moderada"?"text-orange-700":"text-green-700",Qe=a=>a==="critica"?"bg-red-100 text-red-700":a==="moderada"?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700",Ye=a=>a==="critica"?"border-red-200":a==="moderada"?"border-orange-200":"border-green-200";return it(()=>{x()}),(a,t)=>{var M,V,O,H;return o(),d("div",Ta,[r(bt,{subtitulo:"Resultados de Encuesta"}),e("div",Ba,[e("div",Ga,[f.value?(o(),d("div",La,t[1]||(t[1]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-2 border-primary border-t-transparent mx-auto mb-4"},null,-1),e("p",{class:"text-gray-600"},"Cargando resultados de la encuesta...",-1)]))):c.value?(o(),d("div",Va,[r(n(qe),{class:"h-12 w-12 text-red-500 mx-auto mb-4"}),t[3]||(t[3]=e("h3",{class:"text-lg font-medium text-red-800 mb-2"},"Error al cargar los resultados",-1)),e("p",Na,s(c.value),1),r(te,{onClick:x,variant:"outline"},{default:Z(()=>[r(n(gt),{class:"h-4 w-4 mr-2"}),t[2]||(t[2]=E(" Reintentar "))]),_:1,__:[2]})])):g.value?(o(),d("div",Fa,[e("nav",Oa,[e("ol",Ha,[e("li",null,[e("button",{onClick:k,class:"text-gray-500 hover:text-gray-700 transition-colors duration-200"},[r(n(vt),{class:"h-5 w-5"})])]),e("li",null,[e("div",Ua,[r(n(re),{class:"h-5 w-5 text-gray-400 mr-4"}),t[4]||(t[4]=e("span",{class:"text-sm font-medium text-gray-500"},"Encuestas",-1))])]),e("li",null,[e("div",Za,[r(n(re),{class:"h-5 w-5 text-gray-400 mr-4"}),e("span",Ka,s(g.value.titulo),1)])])])]),e("div",Wa,[e("div",Xa,[e("div",Ja,[e("div",Qa,[e("div",Ya,[e("div",{class:l(["flex items-center justify-center w-16 h-16 rounded-full",A(u.value).bgClass])},[r(n(Ae),{class:l(["h-8 w-8",A(u.value).textClass])},null,8,["class"])],2),e("div",null,[t[5]||(t[5]=e("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide"},"Índice de Bienestar",-1)),e("p",{class:l(["text-4xl font-bold",A(u.value).textClass])},s(u.value)+"% ",3)])]),t[8]||(t[8]=e("div",{class:"hidden md:block w-px h-16 bg-gray-200"},null,-1)),e("div",null,[t[6]||(t[6]=e("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2"},"Tendencia",-1)),e("div",{class:l(["inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-semibold",Fe(R.value)])},[(o(),N(se(Oe(R.value)),{class:"h-4 w-4"})),e("span",null,s(He(R.value)),1)],2)]),t[9]||(t[9]=e("div",{class:"hidden md:block w-px h-16 bg-gray-200"},null,-1)),e("div",null,[t[7]||(t[7]=e("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2"},"Alertas Activas",-1)),e("div",{class:l(["inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-bold",G.value.length===0?"bg-green-100 text-green-800":F.value.criticas>0?"bg-red-100 text-red-800":"bg-orange-100 text-orange-800"])},[r(n(oe),{class:"h-4 w-4"}),e("span",null,s(G.value.length),1)],2)])]),e("div",eo,[e("div",{class:l(["p-3 rounded-lg",A(u.value).bgLightClass])},[e("p",{class:l(["text-sm font-semibold mb-1",A(u.value).textDarkClass])}," Estado General ",2),e("p",{class:l(["text-sm",A(u.value).textDarkClass])},s(Ne(u.value)),3)],2)])])])]),e("div",to,[e("div",so,[e("div",ao,[e("div",oo,[e("h1",ro,s(g.value.titulo),1),G.value.length>0?(o(),d("div",{key:0,class:l(["inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-semibold",F.value.criticas>0?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"])},[r(n(oe),{class:"h-4 w-4"}),e("span",null,s(G.value.length)+" "+s(G.value.length===1?"alerta activa":"alertas activas"),1)],2)):S("",!0)]),e("div",no,[e("div",io,[r(n(Me),{class:"h-4 w-4 mr-1"}),e("span",null,s(g.value.totalParticipantes)+" participantes",1)]),e("div",lo,[r(n(xe),{class:"h-4 w-4 mr-1"}),e("span",null,s(Math.round(g.value.totalParticipantes/50*100))+"% tasa de participación",1)]),e("div",co,[r(n(pt),{class:"h-4 w-4 mr-1"}),e("span",null,s(g.value.estado),1)])])]),e("div",uo,[r(te,{onClick:L,variant:"outline"},{default:Z(()=>[r(n(ft),{class:"h-4 w-4 mr-2"}),t[10]||(t[10]=E(" Exportar "))]),_:1,__:[10]}),r(te,{onClick:Q,variant:"primary"},{default:Z(()=>[r(n(le),{class:"h-4 w-4 mr-2"}),t[11]||(t[11]=E(" Crear Comunicado "))]),_:1,__:[11]})])])]),e("div",mo,[e("div",go,[e("div",po,[e("div",bo,[r(n(ve),{class:"h-6 w-6 text-white"})]),t[12]||(t[12]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Interpretación General"),e("p",{class:"text-gray-600"},"Análisis automático del estado de bienestar del equipo")],-1))])]),e("div",xo,[e("div",vo,[e("div",fo,[e("div",{class:l(["inline-flex items-center justify-center w-32 h-32 rounded-full mb-4",A(u.value).bgClass])},[e("div",ho,[e("div",{class:l(["text-4xl font-bold",A(u.value).textClass])},s(u.value)+"% ",3),e("div",{class:l(["text-xs font-medium mt-1",A(u.value).textClass])}," Bienestar Global ",2)])],2)]),e("div",yo,[e("div",{class:l(["p-6 rounded-xl border-2",A(u.value).borderClass+" "+A(u.value).bgLightClass])},[e("h3",{class:l(["text-lg font-semibold mb-3",A(u.value).textDarkClass])}," Estado General del Equipo ",2),e("p",{class:l(["text-base leading-relaxed",A(u.value).textDarkClass])},s(Ve(u.value)),3),e("div",{class:l(["mt-4 pt-4 border-t",A(u.value).borderClass])},[e("p",{class:l(["text-sm font-medium",A(u.value).textDarkClass])}," Basado en "+s(g.value.totalParticipantes)+" respuestas de "+s(((M=g.value.preguntas)==null?void 0:M.length)||0)+" preguntas ",3)],2)],2)])])])]),e("div",_o,[e("div",wo,[e("div",Co,[e("div",ko,[r(n(me),{class:"h-6 w-6 text-white"})]),t[13]||(t[13]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Interpretación por Categorías"),e("p",{class:"text-gray-600"},"Análisis detallado de cada área evaluada")],-1))])]),e("div",$o,[e("div",jo,[(o(!0),d(z,null,D(ae.value,(i,U)=>(o(),d("div",{key:U,class:l(["rounded-xl border-2 p-6 transition-all duration-200 hover:shadow-lg",i.colorClasses.borderClass+" "+i.colorClasses.bgLightClass])},[e("div",Eo,[e("div",{class:l(["w-14 h-14 rounded-full flex items-center justify-center flex-shrink-0",i.colorClasses.bgClass])},[(o(),N(se(i.icon),{class:"h-7 w-7 text-white"}))],2),e("div",Ao,[e("h3",{class:l(["text-lg font-bold mb-1",i.colorClasses.textDarkClass])},s(i.nombre),3),e("div",Mo,[e("span",{class:l(["text-2xl font-bold",i.colorClasses.textClass])},s(i.valor)+"% ",3),e("span",{class:l(["text-sm px-2 py-1 rounded-full font-medium",i.colorClasses.badgeClass])},s(i.nivel),3)]),e("p",{class:l(["text-sm leading-relaxed",i.colorClasses.textDarkClass])},s(i.interpretacion),3)])])],2))),128))])])]),g.value.preguntas?(o(),d("div",qo,[(o(!0),d(z,null,D(g.value.preguntas,(i,U)=>(o(),d("div",{key:i.id,class:"bg-white rounded-lg shadow-sm overflow-hidden"},[e("div",Ro,[e("h3",Po," Pregunta "+s(U+1)+": "+s(i.texto),1)]),e("div",So,[i.resultadosPorGrupo&&Le(i)?(o(),d("div",zo,[r(n(J),{class:"h-5 w-5 flex-shrink-0 mt-0.5"}),t[14]||(t[14]=e("div",null,[e("p",{class:"font-medium"},"Protección de Anonimato"),e("p",{class:"text-sm mt-1"},"No se muestran resultados de grupos con menos de 5 respuestas para preservar el anonimato.")],-1))])):S("",!0),e("div",Io,[e("div",null,[t[15]||(t[15]=e("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Distribución de Respuestas",-1)),e("div",Do,[e("div",To,[e("canvas",{id:`chart-${i.id}`,class:"w-full h-full"},null,8,Bo)])])]),e("div",Go,[e("div",null,[t[16]||(t[16]=e("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Análisis del Resultado",-1)),e("div",Lo,[e("div",Vo,[r(n(ve),{class:"h-5 w-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),e("p",No,s(i.insight),1)])])]),e("div",null,[t[19]||(t[19]=e("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Acción Recomendada",-1)),i.recomendacion?(o(),d("div",Fo,[e("div",Oo,[e("div",Ho,[e("div",Uo,[r(n(Ce),{class:"h-5 w-5 text-orange-600 mt-0.5 mr-3 flex-shrink-0"}),e("div",null,[e("h5",Zo,s(i.recomendacion.titulo),1),e("p",Ko,s(i.recomendacion.descripcion),1)])])]),r(te,{onClick:I=>w(i.recomendacion.id),class:"ml-4 flex-shrink-0"},{default:Z(()=>[r(n(Re),{class:"h-4 w-4 mr-2"}),t[17]||(t[17]=E(" Solicitar Servicio "))]),_:2,__:[17]},1032,["onClick"])])])):(o(),d("div",Wo,[e("div",Xo,[r(n(K),{class:"h-5 w-5 text-green-600 mr-3"}),t[18]||(t[18]=e("p",{class:"text-green-800 font-medium"},"¡Excelente! No se requiere acción inmediata para esta área.",-1))])]))]),e("div",null,[t[20]||(t[20]=e("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Estadísticas Detalladas",-1)),e("div",Jo,[(o(!0),d(z,null,D(i.resultados.data,(I,ee)=>(o(),d("div",{key:ee,class:"flex items-center justify-between p-2 bg-gray-50 rounded"},[e("span",Qo,s(i.resultados.labels[ee]),1),e("div",Yo,[e("span",er,s(I)+" respuestas",1),e("span",tr," ("+s(Math.round(I/g.value.totalParticipantes*100))+"%) ",1)])]))),128))])]),i.resultadosPorGrupo&&i.resultadosPorGrupo.length>0?(o(),d("div",sr,[t[22]||(t[22]=e("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Resultados por Departamento",-1)),e("div",ar,[(o(!0),d(z,null,D(i.resultadosPorGrupo,I=>(o(),d(z,{key:I.departamento},[I.total_respuestas>=5?(o(),d("div",or,[e("div",rr,[e("span",nr,s(I.departamento),1),e("span",ir,s(I.total_respuestas)+" respuestas",1)]),e("div",lr,[t[21]||(t[21]=E(" Promedio: ")),e("span",dr,s(I.promedio),1)])])):S("",!0)],64))),128))])])):S("",!0)])])])]))),128))])):S("",!0),r(Es),e("div",cr,[e("div",ur,[t[24]||(t[24]=e("h2",{class:"text-xl font-semibold text-gray-900"},"Resumen Ejecutivo",-1)),e("button",{onClick:W,class:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors shadow-sm hover:shadow-md"},[r(n(Ge),{class:"h-5 w-5"}),t[23]||(t[23]=E(" Comunicar resultados "))])]),e("div",mr,[e("div",gr,[e("p",pr,s(g.value.totalParticipantes),1),t[25]||(t[25]=e("p",{class:"text-sm text-blue-800"},"Total Participantes",-1))]),e("div",br,[e("p",xr,s(Math.round(g.value.totalParticipantes/50*100))+"%",1),t[26]||(t[26]=e("p",{class:"text-sm text-green-800"},"Tasa de Participación",-1))]),e("div",vr,[e("p",fr,s(((V=g.value.preguntas)==null?void 0:V.length)||0),1),t[27]||(t[27]=e("p",{class:"text-sm text-purple-800"},"Preguntas Analizadas",-1))])])]),e("div",hr,[e("div",yr,[e("div",_r,[e("div",wr,[e("div",Cr,[r(n(oe),{class:"h-6 w-6 text-white"})]),t[28]||(t[28]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Alertas de Bienestar"),e("p",{class:"text-gray-600"},"Prioridades de intervención automáticas")],-1))]),e("div",kr,[e("div",{class:l(["text-3xl font-bold",F.value.criticas>0?"text-red-600":F.value.moderadas>0?"text-orange-600":"text-green-600"])},s(G.value.length),3),e("div",$r,s(G.value.length===0?"Sin alertas":G.value.length===1?"Alerta activa":"Alertas activas"),1)])])]),e("div",jr,[G.value.length===0?(o(),d("div",Er,[e("div",Ar,[r(n(K),{class:"h-5 w-5 text-white"})]),t[29]||(t[29]=e("div",{class:"flex-1"},[e("p",{class:"font-semibold text-green-900"},"Todo estable"),e("p",{class:"text-green-700"},"No se requieren acciones urgentes. Todas las categorías muestran niveles saludables.")],-1))])):(o(),d("div",Mr,[(o(!0),d(z,null,D(G.value,(i,U)=>(o(),d("div",{key:U,class:l(["rounded-lg p-4 shadow-sm flex items-start gap-3 text-sm transition-all duration-200 hover:shadow-md border cursor-pointer",[Ke(i.tipo),i.gestionada?"opacity-50":""]]),onClick:I=>Ue(i)},[e("div",{class:l(["w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",We(i.tipo)])},[(o(),N(se(i.gestionada?n(K):Xe(i.tipo)),{class:"h-5 w-5 text-white"}))],2),e("div",Rr,[e("div",Pr,[e("h3",{class:l(["font-bold",Je(i.tipo)])},[E(s(i.titulo)+" ",1),i.gestionada?(o(),d("span",Sr," (Gestionada ✓) ")):S("",!0)],2),e("span",{class:l(["text-xs font-semibold px-2 py-1 rounded-full whitespace-nowrap",Qe(i.tipo)])},s(i.tipo==="critica"?"Riesgo Alto":i.tipo==="moderada"?"Atención Moderada":"Estable"),3)]),e("p",{class:l(["leading-relaxed",ge(i.tipo)])},s(i.mensaje),3),e("div",{class:l(["mt-2 pt-2 border-t",Ye(i.tipo)])},[e("p",{class:l(["text-xs font-medium",ge(i.tipo)])}," Categoría: "+s(i.categoria)+" ("+s(i.valor)+"%) ",3)],2)]),e("div",zr,[r(n(re),{class:"h-5 w-5"})])],10,qr))),128)),e("div",Ir,[e("div",Dr,[e("div",Tr,[e("div",Br,s(F.value.criticas),1),t[30]||(t[30]=e("div",{class:"text-sm text-red-800 font-medium"},"Alertas Críticas",-1))]),e("div",Gr,[e("div",Lr,s(F.value.moderadas),1),t[31]||(t[31]=e("div",{class:"text-sm text-orange-800 font-medium"},"Alertas Moderadas",-1))]),e("div",Vr,[e("div",Nr,s(F.value.estables),1),t[32]||(t[32]=e("div",{class:"text-sm text-green-800 font-medium"},"Áreas Estables",-1))])])])]))])]),r(Da,{resultados:g.value.resultados},null,8,["resultados"])])):S("",!0)])]),r(Tt,{modelValue:j.value,"onUpdate:modelValue":t[0]||(t[0]=i=>j.value=i),alerta:T.value,onMarcarGestionado:Ze},null,8,["modelValue","alerta"]),r(ma,{"is-open":v.value,"nombre-encuesta":((O=g.value)==null?void 0:O.titulo)||"Encuesta","encuesta-id":((H=g.value)==null?void 0:H.id)||"",onClose:$,onComunicadoEnviado:b},null,8,["is-open","nombre-encuesta","encuesta-id"])])}}},en=ce(Fr,[["__scopeId","data-v-28dedab4"]]);export{en as default};

import{_ as g}from"./Card-CRkor_uq.js";import{u as x,l as p,o as _,d as n,e as a,F as y,r as h,h as k,j as o,g as w,w as i,t as d,i as S,k as c,_ as C}from"./index-BNX75qeA.js";import{u as b}from"./reservas.store-DeVieQVf.js";import{g as B}from"./sesiones.service-C7c0RVw4.js";const N={class:"space-y-6"},R={key:0,class:"text-center py-10"},V={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},$={class:"text-xl font-semibold text-on-surface"},z={class:"space-y-2 text-on-surface-variant"},D={class:"text-right"},A={key:2,class:"text-center py-10"},j={__name:"ActividadesView",setup(E){const f=b(),v=x(),u=p([]),l=p(!0);_(async()=>{l.value=!0;try{const t=await B();u.value=t.filter(e=>new Date(e.fecha)>=new Date)}catch(t){console.error("Error al cargar las actividades:",t)}finally{l.value=!1}});const m=async t=>{var r;const e=(r=v.user)==null?void 0:r.id;if(!e)return;confirm(`¿Confirmas tu reserva para "${t.titulo}" el ${t.fecha}?`)&&(await f.crearReserva(e,t),alert("¡Reserva confirmada con éxito!"))};return(t,e)=>(o(),n("div",N,[e[6]||(e[6]=a("header",null,[a("h1",{class:"text-3xl font-bold text-on-background"},"Actividades de Bienestar"),a("p",{class:"text-on-surface-variant"},"Explora y reserva tu plaza en nuestras próximas sesiones.")],-1)),l.value?(o(),n("div",R,e[0]||(e[0]=[a("p",null,"Cargando actividades...",-1)]))):(o(),n("div",V,[(o(!0),n(y,null,h(u.value,s=>(o(),w(g,{key:s.id},{header:i(()=>[a("h2",$,d(s.titulo),1)]),footer:i(()=>[a("div",D,[S(C,{onClick:r=>m(s),variant:"primary"},{default:i(()=>e[4]||(e[4]=[c(" Reservar Plaza ")])),_:2,__:[4]},1032,["onClick"])])]),default:i(()=>{var r;return[a("div",z,[a("p",null,[e[1]||(e[1]=a("strong",null,"Fecha:",-1)),c(" "+d(s.fecha),1)]),a("p",null,[e[2]||(e[2]=a("strong",null,"Hora:",-1)),c(" "+d(s.hora),1)]),a("p",null,[e[3]||(e[3]=a("strong",null,"Plazas disponibles:",-1)),c(" "+d(s.plazasTotales-(((r=s.participantes)==null?void 0:r.length)||0)),1)])])]}),_:2},1024))),128))])),!l.value&&u.value.length===0?(o(),n("div",A,e[5]||(e[5]=[a("p",{class:"text-on-surface-variant"},"No hay actividades programadas próximamente.",-1)]))):k("",!0)]))}};export{j as default};

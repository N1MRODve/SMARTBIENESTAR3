import{e as f,A as y,R,_ as w,G as S,X as I,L,r as N}from"./index-C3zR6LNs.js";import{d as c,f as P,o,h as l,j as e,J as u,t as n,I as T,v as a,z as r,u as _,F as p,y as k,E as C,b as A}from"./vue-vendor-B77bLtTV.js";import"./supabase-B7V2753y.js";import"./charts-CTwtOHf5.js";/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=f("ShoppingCartIcon",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=f("StarIcon",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=f("TagIcon",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),V={class:"space-y-8"},$={class:"mb-8"},F={class:"text-center"},H={class:"inline-flex items-center bg-gradient-to-r from-emerald-500 to-teal-600 text-white px-8 py-4 rounded-2xl shadow-lg mb-4"},q={class:"text-left"},D={class:"text-4xl font-bold"},G={key:0,class:"bg-white rounded-lg shadow-sm p-8 text-center"},J={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-6 text-center"},U={class:"text-red-600 mb-4"},X={key:2,class:"bg-white rounded-lg shadow-sm p-12 text-center"},K={key:3,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},O={class:"bg-gradient-to-r from-gray-50 to-gray-100 p-6 text-center"},Q={class:"text-4xl mb-3"},W={class:"text-lg font-semibold text-gray-900 mb-2"},Y={class:"text-sm text-gray-600"},Z={class:"p-6"},tt={class:"text-center mb-6"},et={class:"inline-flex items-center bg-primary/10 px-4 py-2 rounded-full"},st={class:"text-2xl font-bold text-primary"},ot={class:"space-y-3 mb-6"},lt={class:"flex items-center justify-between text-sm"},at={class:"flex items-center text-gray-500"},rt={class:"font-medium text-gray-900 capitalize"},it={class:"flex items-center justify-between text-sm"},nt={class:"flex items-center text-gray-500"},dt={class:"flex"},ct={class:"space-y-3"},ut={key:0,class:"text-center"},pt={class:"flex items-center justify-center p-3 bg-red-50 rounded-lg border border-red-200 mb-3"},xt={class:"text-red-800 font-medium text-sm"},ht={__name:"RecompensasView",setup(mt){const b=c(!0),x=c(null),m=c([]),i=c(2450),g=c(null),M={entrenamiento:"üèãÔ∏è",nutricion:"ü•ó",bienestar:"üíÜ‚Äç‚ôÄÔ∏è",evaluacion:"üìä",merchandising:"üëï",beneficio:"üéÅ",tecnologia:"‚åö"},h=async()=>{b.value=!0,x.value=null;try{const d=await N.getAll();m.value=d.map(t=>({id:t.id,titulo:t.nombre,descripcion:t.descripcion,icono:M[t.categoria]||"üéÅ",coste:t.puntos_requeridos||t.costo_puntos,categoria:t.categoria,popularidad:Math.min(5,Math.max(1,Math.floor((t.stock_total-t.stock_disponible)/t.stock_total*5)||4)),disponible:t.activo&&t.stock_disponible>0,stock:t.stock_disponible}))}catch(d){console.error("Error cargando recompensas:",d),x.value="No se pudieron cargar las recompensas. Int√©ntalo de nuevo."}finally{b.value=!1}},z=async d=>{const t=m.value.find(s=>s.id===d);if(!(!t||i.value<t.coste)){g.value=d;try{await new Promise(s=>setTimeout(s,2e3)),i.value-=t.coste,alert(`¬°Felicidades! Has canjeado "${t.titulo}" por ${t.coste} puntos. Te contactaremos pronto con los detalles.`)}catch{alert("Error al procesar el canje. Int√©ntalo de nuevo.")}finally{g.value=null}}};return P(()=>{h()}),(d,t)=>(o(),l("div",V,[e("div",$,[e("div",F,[t[3]||(t[3]=e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Cat√°logo de Recompensas",-1)),t[4]||(t[4]=e("p",{class:"text-lg text-gray-600 mb-6"},"Canjea tus puntos de bienestar por incre√≠bles recompensas",-1)),e("div",H,[t[2]||(t[2]=e("div",{class:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center mr-4"},[e("svg",{class:"w-7 h-7 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})])],-1)),e("div",q,[t[1]||(t[1]=e("p",{class:"text-sm text-white/90 font-medium"},"Tu saldo actual",-1)),e("p",D,[u(n(i.value.toLocaleString())+" ",1),t[0]||(t[0]=e("span",{class:"text-xl"},"Puntos",-1))])])]),t[5]||(t[5]=T('<div class="max-w-3xl mx-auto bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl p-6 shadow-md"><div class="flex items-start"><div class="flex-shrink-0 w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center mr-4"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div class="flex-1 text-left"><h3 class="text-lg font-bold text-blue-900 mb-2">¬øC√≥mo gano puntos?</h3><p class="text-sm text-blue-800 mb-3">Los puntos se acumulan autom√°ticamente al participar en nuestras actividades de bienestar:</p><div class="grid grid-cols-2 md:grid-cols-3 gap-3"><div class="bg-white rounded-lg p-3 border border-blue-200"><p class="text-2xl font-bold text-blue-600">+100</p><p class="text-xs text-blue-800">Por encuesta completada</p></div><div class="bg-white rounded-lg p-3 border border-blue-200"><p class="text-2xl font-bold text-blue-600">+150</p><p class="text-xs text-blue-800">Respuesta en menos de 24h</p></div><div class="bg-white rounded-lg p-3 border border-blue-200"><p class="text-2xl font-bold text-blue-600">+200</p><p class="text-xs text-blue-800">Participaci√≥n mensual completa</p></div><div class="bg-white rounded-lg p-3 border border-blue-200"><p class="text-2xl font-bold text-blue-600">+75</p><p class="text-xs text-blue-800">Asistencia a eventos</p></div><div class="bg-white rounded-lg p-3 border border-blue-200"><p class="text-2xl font-bold text-blue-600">+300</p><p class="text-xs text-blue-800">Sugerencia implementada</p></div><div class="bg-white rounded-lg p-3 border border-blue-200"><p class="text-2xl font-bold text-blue-600">+50</p><p class="text-xs text-blue-800">Referir empleado</p></div></div></div></div></div>',1))])]),b.value?(o(),l("div",G,t[6]||(t[6]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-2 border-primary border-t-transparent mx-auto mb-4"},null,-1),e("p",{class:"text-gray-600"},"Cargando cat√°logo de recompensas...",-1)]))):x.value?(o(),l("div",J,[a(r(y),{class:"h-12 w-12 text-red-500 mx-auto mb-4"}),t[8]||(t[8]=e("h3",{class:"text-lg font-medium text-red-800 mb-2"},"Error al cargar las recompensas",-1)),e("p",U,n(x.value),1),a(w,{onClick:h,variant:"outline"},{default:_(()=>[a(r(R),{class:"h-4 w-4 mr-2"}),t[7]||(t[7]=u(" Reintentar "))]),_:1,__:[7]})])):m.value.length===0?(o(),l("div",X,[a(r(S),{class:"h-16 w-16 text-gray-400 mx-auto mb-4"}),t[9]||(t[9]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No hay recompensas disponibles",-1)),t[10]||(t[10]=e("p",{class:"text-gray-500"},"El cat√°logo de recompensas se actualizar√° pronto",-1))])):(o(),l("div",K,[(o(!0),l(p,null,k(m.value,s=>(o(),l("div",{key:s.id,class:"bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow duration-200 overflow-hidden"},[e("div",O,[e("div",Q,n(s.icono),1),e("h3",W,n(s.titulo),1),e("p",Y,n(s.descripcion),1)]),e("div",Z,[e("div",tt,[e("div",et,[t[11]||(t[11]=e("svg",{class:"w-5 h-5 text-primary mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})],-1)),e("span",st,n(s.coste),1),t[12]||(t[12]=e("span",{class:"text-sm text-primary ml-1"},"puntos",-1))])]),e("div",ot,[e("div",lt,[e("div",at,[a(r(E),{class:"h-4 w-4 mr-2"}),t[13]||(t[13]=e("span",null,"Categor√≠a",-1))]),e("span",rt,n(s.categoria),1)]),e("div",it,[e("div",nt,[a(r(j),{class:"h-4 w-4 mr-2"}),t[14]||(t[14]=e("span",null,"Popularidad",-1))]),e("div",dt,[(o(),l(p,null,k(5,v=>a(r(j),{key:v,class:C(["h-4 w-4",v<=s.popularidad?"text-yellow-400 fill-current":"text-gray-300"])},null,8,["class"])),64))])])]),e("div",ct,[i.value<s.coste?(o(),l("div",ut,[e("div",pt,[a(r(y),{class:"h-5 w-5 text-red-600 mr-2"}),e("span",xt," Te faltan "+n(s.coste-i.value)+" puntos ",1)])])):A("",!0),a(w,{onClick:v=>z(s.id),loading:g.value===s.id,disabled:i.value<s.coste||!s.disponible,class:C(["w-full",{"opacity-50 cursor-not-allowed":i.value<s.coste}])},{default:_(()=>[s.disponible?i.value<s.coste?(o(),l(p,{key:1},[a(r(L),{class:"h-4 w-4 mr-2"}),t[16]||(t[16]=u(" Puntos Insuficientes "))],64)):(o(),l(p,{key:2},[a(r(B),{class:"h-4 w-4 mr-2"}),t[17]||(t[17]=u(" Canjear Ahora "))],64)):(o(),l(p,{key:0},[a(r(I),{class:"h-4 w-4 mr-2"}),t[15]||(t[15]=u(" No Disponible "))],64))]),_:2},1032,["onClick","loading","disabled","class"])])])]))),128))]))]))}};export{ht as default};

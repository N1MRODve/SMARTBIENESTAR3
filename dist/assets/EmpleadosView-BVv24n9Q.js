import{g as D,i as S,a as z}from"./empleados.service-CiKxBj3i.js";import{l as u,j as d,d as m,e,z as v,B as k,F as w,r as V,t as y,C as f,o as M,D as I,E as j,g as $,h as C,v as E}from"./index-9XWXAznh.js";const H={class:"fixed inset-0 z-50 flex items-center justify-center"},R={class:"bg-white rounded-lg shadow-xl w-full max-w-md"},_={class:"border-b p-4 flex justify-between items-center"},U={class:"p-6"},B={class:"mb-4"},F=["value"],N={class:"bg-gray-50 p-4 flex justify-end space-x-4"},O={__name:"InvitarEmpleadosModal",emits:["close","submit"],setup(x,{emit:g}){const p=g,i=u(""),s=u(""),b=["RRHH","Ventas","Marketing","Producción","Atención al Cliente","Desarrollo","Finanzas","Operaciones","Calidad","Administración"],c=()=>{const t=i.value.split(/[\n,]+/).map(o=>o.trim()).filter(o=>o);t.length>0&&p("submit",{emails:t,departamento:s.value})};return(t,o)=>(d(),m(w,null,[e("div",{class:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:o[0]||(o[0]=l=>t.$emit("close"))}),e("div",H,[e("div",R,[e("div",_,[o[5]||(o[5]=e("h2",{class:"text-xl font-semibold"},"Invitar Nuevos Empleados",-1)),e("button",{onClick:o[1]||(o[1]=l=>t.$emit("close")),class:"text-gray-500 hover:text-gray-800"},"×")]),e("div",U,[e("div",B,[o[7]||(o[7]=e("label",{for:"departamento",class:"block text-sm font-medium text-gray-700 mb-2"}," Departamento ",-1)),v(e("select",{id:"departamento","onUpdate:modelValue":o[2]||(o[2]=l=>s.value=l),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-primary focus:border-primary"},[o[6]||(o[6]=e("option",{value:""},"Seleccionar departamento",-1)),(d(),m(w,null,V(b,l=>e("option",{key:l,value:l},y(l),9,F)),64))],512),[[k,s.value]])]),e("div",null,[o[8]||(o[8]=e("label",{for:"emails",class:"block text-sm font-medium text-gray-700 mb-2"}," Correos Electrónicos ",-1)),o[9]||(o[9]=e("p",{class:"text-sm text-gray-500 mb-4"}," Introduce uno o varios correos electrónicos, separados por comas o saltos de línea. ",-1)),v(e("textarea",{id:"emails","onUpdate:modelValue":o[3]||(o[3]=l=>i.value=l),rows:"5",placeholder:"empleado1@empresa.com, empleado2@empresa.com",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-primary focus:border-primary"},null,512),[[f,i.value]])])]),e("div",N,[e("button",{onClick:o[4]||(o[4]=l=>t.$emit("close")),class:"bg-gray-200 text-gray-800 font-bold py-2 px-4 rounded-md hover:bg-gray-300 transition-colors"}," Cancelar "),e("button",{onClick:c,class:"bg-primary text-white font-bold py-2 px-4 rounded-md hover:bg-primary-dark transition-colors"}," Enviar Invitaciones ")])])])],64))}},P={class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},q={class:"bg-white rounded-lg shadow-xl w-full max-w-md p-6"},L={class:"mb-4"},h={class:"mb-4"},G={class:"mb-4"},T={class:"mb-4"},J={class:"mb-6"},K={class:"flex justify-end gap-3"},Q={__name:"EditarEmpleadoModal",props:{empleado:{type:Object,required:!0}},emits:["close","submit"],setup(x,{emit:g}){const p=x,i=g,s=u({nombre:"",email:"",departamento:"",cargo:"",estado:"Activo"});M(()=>{s.value={...p.empleado}});const b=()=>{i("submit",s.value)};return(c,t)=>(d(),m("div",P,[e("div",q,[t[14]||(t[14]=e("h2",{class:"text-2xl font-bold mb-4 text-gray-800"},"Editar Empleado",-1)),e("form",{onSubmit:I(b,["prevent"])},[e("div",L,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Nombre ",-1)),v(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.value.nombre=o),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[f,s.value.nombre]])]),e("div",h,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Email ",-1)),v(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.value.email=o),type:"email",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[f,s.value.email]])]),e("div",G,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Departamento ",-1)),v(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.value.departamento=o),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"},t[8]||(t[8]=[j('<option value="">Seleccionar departamento</option><option value="RRHH">RRHH</option><option value="Ventas">Ventas</option><option value="Marketing">Marketing</option><option value="Producción">Producción</option><option value="Atención al Cliente">Atención al Cliente</option><option value="Desarrollo">Desarrollo</option><option value="Finanzas">Finanzas</option><option value="Operaciones">Operaciones</option><option value="Calidad">Calidad</option><option value="Administración">Administración</option>',11)]),512),[[k,s.value.departamento]])]),e("div",T,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Cargo ",-1)),v(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.value.cargo=o),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"},null,512),[[f,s.value.cargo]])]),e("div",J,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Estado ",-1)),v(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.value.estado=o),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary"},t[11]||(t[11]=[e("option",{value:"Activo"},"Activo",-1),e("option",{value:"Invitado"},"Invitado",-1),e("option",{value:"Inactivo"},"Inactivo",-1)]),512),[[k,s.value.estado]])]),e("div",K,[e("button",{type:"button",onClick:t[5]||(t[5]=o=>c.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors"}," Cancelar "),t[13]||(t[13]=e("button",{type:"submit",class:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition-colors"}," Guardar ",-1))])],32)])]))}},W={class:"p-4 md:p-8"},X={class:"flex justify-between items-center mb-6"},Y={key:0,class:"text-center py-10"},Z={key:1,class:"bg-white rounded-lg shadow-md"},ee={class:"w-full text-left"},te={class:"p-4"},oe={class:"p-4"},se={class:"p-4"},ae={class:"p-4"},le={class:"p-4"},ne=["onClick"],ue={__name:"EmpleadosView",setup(x){const g=u([]),p=u(!0),i=u(!1),s=u(!1),b=u(null),c=async()=>{p.value=!0;try{g.value=await D()}catch(r){console.error("Error al cargar los empleados:",r)}finally{p.value=!1}};M(c);const t=async r=>{await S(r.emails,r.departamento),i.value=!1,await c()},o=r=>{b.value=r,s.value=!0},l=async r=>{await z(b.value.id,r),s.value=!1,await c()},A=r=>({RRHH:"bg-purple-50 text-purple-800",Ventas:"bg-blue-50 text-blue-800",Marketing:"bg-pink-50 text-pink-800",Producción:"bg-green-50 text-green-800","Atención al Cliente":"bg-yellow-50 text-yellow-800",Desarrollo:"bg-indigo-50 text-indigo-800",Finanzas:"bg-emerald-50 text-emerald-800",Operaciones:"bg-orange-50 text-orange-800",Calidad:"bg-teal-50 text-teal-800",Administración:"bg-gray-50 text-gray-800"})[r]||"bg-gray-100 text-gray-600";return(r,a)=>(d(),m("div",W,[e("div",X,[a[3]||(a[3]=e("h1",{class:"text-3xl font-bold text-gray-800"},"Gestión de Empleados",-1)),e("button",{onClick:a[0]||(a[0]=n=>i.value=!0),class:"bg-primary text-white font-bold py-2 px-4 rounded-md hover:bg-primary-dark transition-colors"}," Invitar Empleados ")]),p.value?(d(),m("div",Y,a[4]||(a[4]=[e("p",null,"Cargando empleados...",-1)]))):(d(),m("div",Z,[e("table",ee,[a[5]||(a[5]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"p-4 font-semibold"},"Nombre"),e("th",{class:"p-4 font-semibold"},"Email"),e("th",{class:"p-4 font-semibold"},"Departamento"),e("th",{class:"p-4 font-semibold"},"Estado"),e("th",{class:"p-4 font-semibold"},"Acciones")])],-1)),e("tbody",null,[(d(!0),m(w,null,V(g.value,n=>(d(),m("tr",{key:n.id,class:"border-b"},[e("td",te,y(n.nombre),1),e("td",oe,y(n.email),1),e("td",se,[e("span",{class:E([A(n.departamento),"px-3 py-1 text-sm font-medium rounded-full inline-block"])},y(n.departamento||"Sin asignar"),3)]),e("td",ae,[e("span",{class:E([{"bg-green-100 text-green-800":n.estado==="Activo","bg-yellow-100 text-yellow-800":n.estado==="Invitado"},"px-2 py-1 text-sm font-medium rounded-full"])},y(n.estado),3)]),e("td",le,[e("button",{onClick:re=>o(n),class:"text-primary hover:underline"},"Editar",8,ne)])]))),128))])])])),i.value?(d(),$(O,{key:2,onClose:a[1]||(a[1]=n=>i.value=!1),onSubmit:t})):C("",!0),s.value?(d(),$(Q,{key:3,empleado:b.value,onClose:a[2]||(a[2]=n=>s.value=!1),onSubmit:l},null,8,["empleado"])):C("",!0)]))}};export{ue as default};

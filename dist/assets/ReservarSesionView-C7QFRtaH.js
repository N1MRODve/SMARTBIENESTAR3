import{l as c,n as x,o as k,d as r,e as a,t as l,F as b,r as v,h,p as w,q as C,j as t,v as R}from"./index-BNX75qeA.js";import{a as S,b as D}from"./colaboradores.service-CiAD4qAb.js";import{u as I}from"./reservas.store-DeVieQVf.js";const E={class:"space-y-8"},$={key:0,class:"text-center py-12"},B={key:1},L={class:"flex items-center mb-8"},V=["src","alt"],j={class:"text-2xl text-primary"},F={class:"text-gray-600"},N={class:"space-y-6"},T={class:"text-lg font-semibold text-gray-700 border-b pb-2 mb-4"},q={class:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-3"},z=["onClick","disabled"],A={key:0,class:"text-center py-10 bg-gray-50 rounded-lg"},M="user-empleado-01",K={__name:"ReservarSesionView",setup(O){const g=w(),f=C(),y=I(),o=c(null),u=c([]),d=c(!0),p=x(()=>u.value.reduce((s,e)=>(s[e.fecha]||(s[e.fecha]=[]),s[e.fecha].push(e),s),{}));k(async()=>{const s=g.params.colaboradorId;d.value=!0;try{const[e,n]=await Promise.all([S(s),D(s)]);o.value=e,u.value=n}catch(e){console.error("Error al cargar la disponibilidad:",e)}finally{d.value=!1}});const _=async s=>{const e={id:s.id,titulo:`Sesión con ${o.value.nombre}`,fecha:s.fecha,hora:s.hora,especialista:o.value.nombre};confirm(`¿Confirmas tu reserva para el ${e.fecha} a las ${e.hora}?`)&&(await y.crearReserva(M,e),s.disponible=!1,alert("¡Tu sesión ha sido reservada con éxito!"),f.push("/empleado/dashboard"))};return(s,e)=>(t(),r("div",E,[d.value?(t(),r("div",$,e[0]||(e[0]=[a("p",null,"Cargando disponibilidad...",-1)]))):o.value?(t(),r("div",B,[a("div",L,[a("img",{src:o.value.foto,alt:o.value.nombre,class:"w-24 h-24 rounded-full mr-6"},null,8,V),a("div",null,[e[1]||(e[1]=a("h1",{class:"text-3xl font-bold text-gray-800"},"Reservar sesión con",-1)),a("h2",j,l(o.value.nombre),1),a("p",F,l(o.value.especialidad),1)])]),a("div",N,[(t(!0),r(b,null,v(p.value,(n,m)=>(t(),r("div",{key:m},[a("h3",T,l(new Date(m+"T00:00:00").toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long"})),1),a("div",q,[(t(!0),r(b,null,v(n,i=>(t(),r("button",{key:i.id,onClick:P=>_(i),disabled:!i.disponible,class:R(["p-2 border rounded-md text-center font-medium transition-colors duration-200",{"border-primary text-primary hover:bg-primary hover:text-white":i.disponible,"bg-gray-200 text-gray-400 cursor-not-allowed":!i.disponible}])},l(i.hora),11,z))),128))])]))),128)),Object.keys(p.value).length===0?(t(),r("div",A,e[2]||(e[2]=[a("p",{class:"text-gray-600"},"Este especialista no tiene huecos disponibles en los próximos 7 días.",-1)]))):h("",!0)])])):h("",!0)]))}};export{K as default};

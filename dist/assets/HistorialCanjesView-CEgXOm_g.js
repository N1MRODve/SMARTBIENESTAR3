import{_ as u}from"./Card-CRkor_uq.js";import{b as m}from"./recompensas.service-C4Ud7DQK.js";import{g as f}from"./empleados.service-CAU2JaJn.js";import{l as c,o as b,d as o,e as s,g as _,w as h,j as t,F as v,r as g,t as l}from"./index-BNX75qeA.js";const x={class:"space-y-6"},y={key:0,class:"text-center py-10"},k={class:"w-full text-left"},E={class:"p-4"},j={class:"p-4 font-medium"},C={class:"p-4"},w={class:"p-4 font-bold text-primary"},B={key:2,class:"text-center py-10 bg-surface rounded-xl"},R={__name:"HistorialCanjesView",setup(D){const n=c([]),d=c(!0);return b(async()=>{d.value=!0;try{const[r,e]=await Promise.all([m(),f()]);n.value=r.map(a=>{const i=e.find(p=>p.id===a.usuarioId);return{...a,nombreEmpleado:i?i.nombre:"Empleado Desconocido"}})}catch(r){console.error("Error al cargar el historial de canjes:",r)}finally{d.value=!1}}),(r,e)=>(t(),o("div",x,[e[3]||(e[3]=s("header",null,[s("h1",{class:"text-3xl font-bold text-on-background"},"Historial de Canjes"),s("p",{class:"text-on-surface-variant"},"Revisa todas las recompensas canjeadas por los empleados.")],-1)),d.value?(t(),o("div",y,e[0]||(e[0]=[s("p",null,"Cargando historial...",-1)]))):n.value.length>0?(t(),_(u,{key:1},{default:h(()=>[s("table",k,[e[1]||(e[1]=s("thead",{class:"border-b-2 border-surface-variant"},[s("tr",null,[s("th",{class:"p-4 font-semibold"},"Fecha"),s("th",{class:"p-4 font-semibold"},"Empleado"),s("th",{class:"p-4 font-semibold"},"Recompensa"),s("th",{class:"p-4 font-semibold"},"Coste")])],-1)),s("tbody",null,[(t(!0),o(v,null,g(n.value,a=>(t(),o("tr",{key:a.id,class:"border-b border-surface-variant"},[s("td",E,l(a.fecha),1),s("td",j,l(a.nombreEmpleado),1),s("td",C,l(a.recompensaTitulo),1),s("td",w,l(a.coste)+" Puntos",1)]))),128))])])]),_:1})):(t(),o("div",B,e[2]||(e[2]=[s("p",{class:"text-on-surface-variant"},"AÃºn no se ha canjeado ninguna recompensa.",-1)])))]))}};export{R as default};

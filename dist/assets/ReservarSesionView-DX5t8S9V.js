import{H as x,D as k,d as c,B as w,f as C,o as r,h as t,j as o,t as l,F as b,y as v,E as R,b as h}from"./vue-vendor-B77bLtTV.js";import{a as S,b as D}from"./colaboradores.service-CiAD4qAb.js";import{u as E}from"./reservas.store-Fkkdvm54.js";import"./index-C3zR6LNs.js";import"./supabase-B7V2753y.js";import"./charts-CTwtOHf5.js";const B={class:"space-y-8"},I={key:0,class:"text-center py-12"},$={key:1},L={class:"flex items-center mb-8"},V=["src","alt"],j={class:"text-2xl text-primary"},F={class:"text-gray-600"},N={class:"space-y-6"},T={class:"text-lg font-semibold text-gray-700 border-b pb-2 mb-4"},z={class:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-3"},A=["onClick","disabled"],H={key:0,class:"text-center py-10 bg-gray-50 rounded-lg"},U={__name:"ReservarSesionView",setup(M){const f=x(),g=k(),y=E(),a=c(null),u=c([]),d=c(!0),p=w(()=>u.value.reduce((s,e)=>(s[e.fecha]||(s[e.fecha]=[]),s[e.fecha].push(e),s),{}));C(async()=>{const s=f.params.colaboradorId;d.value=!0;try{const[e,n]=await Promise.all([S(s),D(s)]);a.value=e,u.value=n}catch(e){console.error("Error al cargar la disponibilidad:",e)}finally{d.value=!1}});const _=async s=>{const e={id:s.id,titulo:`Sesión con ${a.value.nombre}`,fecha:s.fecha,hora:s.hora,especialista:a.value.nombre};confirm(`¿Confirmas tu reserva para el ${e.fecha} a las ${e.hora}?`)&&(await y.crearReserva(e),s.disponible=!1,alert("¡Tu sesión ha sido reservada con éxito!"),g.push("/empleado/dashboard"))};return(s,e)=>(r(),t("div",B,[d.value?(r(),t("div",I,e[0]||(e[0]=[o("p",null,"Cargando disponibilidad...",-1)]))):a.value?(r(),t("div",$,[o("div",L,[o("img",{src:a.value.foto,alt:a.value.nombre,class:"w-24 h-24 rounded-full mr-6"},null,8,V),o("div",null,[e[1]||(e[1]=o("h1",{class:"text-3xl font-bold text-gray-800"},"Reservar sesión con",-1)),o("h2",j,l(a.value.nombre),1),o("p",F,l(a.value.especialidad),1)])]),o("div",N,[(r(!0),t(b,null,v(p.value,(n,m)=>(r(),t("div",{key:m},[o("h3",T,l(new Date(m+"T00:00:00").toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long"})),1),o("div",z,[(r(!0),t(b,null,v(n,i=>(r(),t("button",{key:i.id,onClick:O=>_(i),disabled:!i.disponible,class:R(["p-2 border rounded-md text-center font-medium transition-colors duration-200",{"border-primary text-primary hover:bg-primary hover:text-white":i.disponible,"bg-gray-200 text-gray-400 cursor-not-allowed":!i.disponible}])},l(i.hora),11,A))),128))])]))),128)),Object.keys(p.value).length===0?(r(),t("div",H,e[2]||(e[2]=[o("p",{class:"text-gray-600"},"Este especialista no tiene huecos disponibles en los próximos 7 días.",-1)]))):h("",!0)])])):h("",!0)]))}};export{U as default};

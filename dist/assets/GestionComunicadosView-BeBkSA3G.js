import{D as H,E as R,c as V,s as A,n as C,o as L,d,e as t,i as s,w as r,_ as u,f as o,t as i,F as j,r as q,q as B,j as l,P as w,k as f,X as G,W as I,a2 as P}from"./index-BNX75qeA.js";import{_ as p}from"./Card-CRkor_uq.js";import{A as z,R as W}from"./refresh-cw-Cn7AM7BE.js";import{C as X}from"./credit-card-NDwZM6UJ.js";import{T as J}from"./trash-2-DthirgKD.js";const K={class:"space-y-8"},O={class:"flex justify-between items-center"},Q={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},U={class:"text-3xl font-bold text-primary"},Y={class:"text-3xl font-bold text-green-600"},Z={class:"text-lg font-bold text-blue-600"},ee={key:0,class:"bg-white rounded-lg shadow-sm p-8 text-center"},te={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-6 text-center"},se={class:"text-red-600 mb-4"},oe={key:2,class:"bg-white rounded-lg shadow-sm p-12 text-center"},ae={key:3,class:"space-y-6"},ne={class:"bg-gray-50 px-6 py-4 border-b border-gray-200"},re={class:"flex justify-between items-start"},ie={class:"flex-1"},de={class:"text-lg font-semibold text-gray-900 mb-2"},le={class:"flex items-center space-x-4 text-sm text-gray-500"},ce={class:"flex items-center"},me={class:"flex items-center"},ue={class:"flex space-x-2"},xe={class:"p-6"},fe={class:"text-gray-700 leading-relaxed whitespace-pre-wrap"},pe={__name:"GestionComunicadosView",setup(he){const k=B(),h=R(),g=V(),{comunicados:c,loading:D,error:_}=A(g),{cargarComunicados:b}=g,E=C(()=>{const n=new Date;return n.setDate(n.getDate()-7),c.value.filter(e=>new Date(e.fechaCreacion)>=n).length}),S=C(()=>{if(c.value.length===0)return"-";const n=new Date(c.value[0].fechaCreacion),a=Math.floor((new Date-n)/(1e3*60*60*24));return a===0?"Hoy":a}),$=n=>new Date(n).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),N=n=>{const e=new Date,a=new Date(n),m=e-a,x=Math.floor(m/(1e3*60)),v=Math.floor(m/(1e3*60*60)),M=Math.floor(m/(1e3*60*60*24));return x<60?x<=1?"Hace un momento":`Hace ${x}m`:v<24?`Hace ${v}h`:`Hace ${M}d`},y=()=>{k.push("/admin/comunicados/crear")},T=n=>{h.add({severity:"info",summary:"Función en desarrollo",detail:"La edición de comunicados estará disponible próximamente",life:4e3})},F=(n,e)=>{confirm(`¿Estás seguro de que quieres eliminar el comunicado "${e}"?

Esta acción no se puede deshacer.`)&&h.add({severity:"info",summary:"Función en desarrollo",detail:"La eliminación de comunicados estará disponible próximamente",life:4e3})};return L(()=>{b()}),(n,e)=>(l(),d("div",K,[t("div",O,[e[1]||(e[1]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900"},"Gestión de Comunicados"),t("p",{class:"mt-2 text-lg text-gray-600"},"Administra los comunicados para tus empleados")],-1)),s(u,{onClick:y},{default:r(()=>[s(o(w),{class:"h-5 w-5 mr-2"}),e[0]||(e[0]=f(" Nuevo Comunicado "))]),_:1,__:[0]})]),t("div",Q,[s(p,{class:"text-center"},{header:r(()=>e[2]||(e[2]=[t("h3",{class:"text-lg font-semibold text-gray-900"},"Total Comunicados",-1)])),default:r(()=>[t("p",U,i(o(c).length),1),e[3]||(e[3]=t("p",{class:"text-sm text-gray-500"},"Comunicados publicados",-1))]),_:1,__:[3]}),s(p,{class:"text-center"},{header:r(()=>e[4]||(e[4]=[t("h3",{class:"text-lg font-semibold text-gray-900"},"Esta Semana",-1)])),default:r(()=>[t("p",Y,i(E.value),1),e[5]||(e[5]=t("p",{class:"text-sm text-gray-500"},"Nuevos comunicados",-1))]),_:1,__:[5]}),s(p,{class:"text-center"},{header:r(()=>e[6]||(e[6]=[t("h3",{class:"text-lg font-semibold text-gray-900"},"Último Comunicado",-1)])),default:r(()=>[t("p",Z,i(S.value),1),e[7]||(e[7]=t("p",{class:"text-sm text-gray-500"},"Días desde publicación",-1))]),_:1,__:[7]})]),o(D)?(l(),d("div",ee,e[8]||(e[8]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-2 border-primary border-t-transparent mx-auto mb-4"},null,-1),t("p",{class:"text-gray-600"},"Cargando comunicados...",-1)]))):o(_)?(l(),d("div",te,[s(o(z),{class:"h-12 w-12 text-red-500 mx-auto mb-4"}),e[10]||(e[10]=t("h3",{class:"text-lg font-medium text-red-800 mb-2"},"Error al cargar los comunicados",-1)),t("p",se,i(o(_)),1),s(u,{onClick:o(b),variant:"outline"},{default:r(()=>[s(o(W),{class:"h-4 w-4 mr-2"}),e[9]||(e[9]=f(" Reintentar "))]),_:1,__:[9]},8,["onClick"])])):o(c).length===0?(l(),d("div",oe,[s(o(G),{class:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e[12]||(e[12]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No hay comunicados",-1)),e[13]||(e[13]=t("p",{class:"text-gray-500 mb-6"},"Comienza creando tu primer comunicado para los empleados",-1)),s(u,{onClick:y},{default:r(()=>[s(o(w),{class:"h-4 w-4 mr-2"}),e[11]||(e[11]=f(" Crear Primer Comunicado "))]),_:1,__:[11]})])):(l(),d("div",ae,[(l(!0),d(j,null,q(o(c),a=>(l(),d("div",{key:a.id,class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow duration-200"},[t("div",ne,[t("div",re,[t("div",ie,[t("h3",de,i(a.titulo),1),t("div",le,[t("div",ce,[s(o(I),{class:"h-4 w-4 mr-1"}),t("span",null,i($(a.fechaCreacion)),1)]),t("div",me,[s(o(P),{class:"h-4 w-4 mr-1"}),t("span",null,i(N(a.fechaCreacion)),1)])])]),t("div",ue,[s(u,{onClick:m=>T(a.id),variant:"outline",class:"text-blue-600 hover:text-blue-700"},{default:r(()=>[s(o(X),{class:"h-4 w-4"})]),_:2},1032,["onClick"]),s(u,{onClick:m=>F(a.id,a.titulo),variant:"outline",class:"text-red-600 hover:text-red-700"},{default:r(()=>[s(o(J),{class:"h-4 w-4"})]),_:2},1032,["onClick"])])])]),t("div",xe,[t("p",fe,i(a.contenido),1)])]))),128))]))]))}},Ce=H(pe,[["__scopeId","data-v-df798fd6"]]);export{Ce as default};

import{l as u,al as m}from"./index-9XWXAznh.js";const d=u([]),i=[{id:"rec-01",titulo:"D√≠a Libre Adicional",descripcion:"Un d√≠a libre extra para disfrutar con tu familia",coste:500,categoria:"tiempo",icono:"üèñÔ∏è",disponible:!0,popularidad:5},{id:"rec-02",titulo:"Almuerzo Premium",descripcion:"Almuerzo gourmet en restaurante seleccionado",coste:150,categoria:"gastronomia",icono:"üçΩÔ∏è",disponible:!0,popularidad:4},{id:"rec-03",titulo:"Masaje Relajante",descripcion:"Sesi√≥n de masaje de 60 minutos en spa",coste:300,categoria:"bienestar",icono:"üíÜ‚Äç‚ôÄÔ∏è",disponible:!0,popularidad:5},{id:"rec-04",titulo:"Tarjeta Regalo Amazon",descripcion:"Tarjeta regalo de 25‚Ç¨ para Amazon",coste:250,categoria:"compras",icono:"üéÅ",disponible:!0,popularidad:4},{id:"rec-05",titulo:"Entrada al Cine",descripcion:"Entrada para cine con palomitas incluidas",coste:100,categoria:"entretenimiento",icono:"üé¨",disponible:!0,popularidad:3},{id:"rec-06",titulo:"Clase de Yoga Privada",descripcion:"Sesi√≥n personalizada de yoga con instructor",coste:200,categoria:"bienestar",icono:"üßò‚Äç‚ôÄÔ∏è",disponible:!0,popularidad:4},{id:"rec-07",titulo:"Parking Premium",descripcion:"Plaza de parking reservada por un mes",coste:180,categoria:"comodidad",icono:"üöó",disponible:!0,popularidad:3},{id:"rec-08",titulo:"Kit de Productos Saludables",descripcion:"Cesta con snacks saludables y bebidas naturales",coste:120,categoria:"salud",icono:"ü•ó",disponible:!0,popularidad:3},{id:"rec-09",titulo:"Medio D√≠a Libre",descripcion:"Salir 4 horas antes un d√≠a a tu elecci√≥n",coste:250,categoria:"tiempo",icono:"‚è∞",disponible:!0,popularidad:5},{id:"rec-10",titulo:"Suscripci√≥n Spotify Premium",descripcion:"3 meses de Spotify Premium",coste:90,categoria:"entretenimiento",icono:"üéµ",disponible:!0,popularidad:4}];let l={};const b=()=>new Promise(e=>{setTimeout(()=>{const a=[...i].sort((o,t)=>o.popularidad!==t.popularidad?t.popularidad-o.popularidad:o.coste-t.coste);e(a)},300)}),j=e=>new Promise(a=>{setTimeout(()=>{const o=i.filter(t=>t.categoria===e);a(o)},200)}),w=async(e,a)=>{const o=i.find(s=>s.id===a);return o?await m(e)<o.coste?{success:!1,message:"No tienes suficientes puntos."}:await restarPuntos(e,o.coste)?(d.value.push({id:`canje-${Date.now()}`,usuarioId:e,recompensaId:a,recompensaTitulo:o.titulo,coste:o.coste,fecha:new Date().toISOString().slice(0,10)}),console.log(`Usuario ${e} ha canjeado "${o.titulo}"`),{success:!0,message:"¬°Recompensa canjeada con √©xito!"}):{success:!1,message:"Ha ocurrido un error al restar los puntos."}:{success:!1,message:"La recompensa no existe."}},C=e=>new Promise(a=>{setTimeout(()=>{if(!e)return a([...d.value]);const o=l[e]||[];a(o)},200)}),g=()=>{const e=[{id:"canje-001",usuarioId:"emp-001",nombreEmpleado:"Ana Garc√≠a",emailEmpleado:"ana.garcia@empresa.com",recompensaId:"rec-02",recompensaTitulo:"Almuerzo Premium",recompensaIcono:"üçΩÔ∏è",categoria:"gastronomia",coste:150,fechaCanje:new Date(Date.now()-1728e5).toISOString(),estado:"completado"},{id:"canje-002",usuarioId:"emp-015",nombreEmpleado:"Isabel Torres",emailEmpleado:"isabel.torres@empresa.com",recompensaId:"rec-05",recompensaTitulo:"Entrada al Cine",recompensaIcono:"üé¨",categoria:"entretenimiento",coste:100,fechaCanje:new Date(Date.now()-432e6).toISOString(),estado:"completado"},{id:"canje-003",usuarioId:"emp-022",nombreEmpleado:"Sergio Delgado",emailEmpleado:"sergio.delgado@empresa.com",recompensaId:"rec-03",recompensaTitulo:"Masaje Relajante",recompensaIcono:"üíÜ‚Äç‚ôÄÔ∏è",categoria:"bienestar",coste:300,fechaCanje:new Date(Date.now()-864e5).toISOString(),estado:"completado"},{id:"canje-004",usuarioId:"emp-009",nombreEmpleado:"Carmen Jim√©nez",emailEmpleado:"carmen.jimenez@empresa.com",recompensaId:"rec-09",recompensaTitulo:"Medio D√≠a Libre",recompensaIcono:"‚è∞",categoria:"tiempo",coste:250,fechaCanje:new Date(Date.now()-6048e5).toISOString(),estado:"completado"}];return d.value=e,console.log("Canjes demo inicializados:",e.length),e};g();const D=e=>new Promise(a=>{setTimeout(()=>{const o=l[e]||[],t=o.length,r=o.reduce((c,n)=>c+n.coste,0),s={};o.forEach(c=>{const n=i.find(p=>p.id===c.recompensaId);n&&(s[n.categoria]=(s[n.categoria]||0)+1)}),a({totalCanjes:t,puntosGastados:r,categoriasFavoritas:s,ultimoCanje:o[0]||null})},300)}),S=e=>new Promise(a=>{setTimeout(()=>{const o={id:`rec-${Date.now()}`,titulo:e.titulo,descripcion:e.descripcion||"",coste:parseInt(e.coste),categoria:e.categoria||"general",icono:e.icono||"üéÅ",disponible:e.disponible!==!1,popularidad:e.popularidad||3,fechaCreacion:new Date().toISOString()};i.push(o),console.log("Nueva recompensa a√±adida:",o),console.log("Cat√°logo actualizado, total recompensas:",i.length),a({success:!0,recompensa:o})},500)}),h=e=>new Promise(a=>{setTimeout(()=>{console.log("Actualizando recompensa con ID:",e.id),console.log("Datos recibidos:",e);const o=i.findIndex(t=>t.id===e.id);if(o===-1){console.error("Recompensa no encontrada para actualizar"),a({success:!1,error:"Recompensa no encontrada"});return}i[o]={...i[o],titulo:e.titulo,descripcion:e.descripcion,coste:parseInt(e.coste),categoria:e.categoria,icono:e.icono,disponible:e.disponible,popularidad:e.popularidad||i[o].popularidad,fechaActualizacion:new Date().toISOString()},console.log("Recompensa actualizada exitosamente:",i[o]),console.log("Cat√°logo actualizado, total recompensas:",i.length),a({success:!0,recompensa:i[o]})},600)}),I=e=>new Promise(a=>{setTimeout(()=>{console.log("Eliminando recompensa con ID:",e);const o=i.findIndex(r=>r.id===e);if(o===-1){console.error("Recompensa no encontrada para eliminar"),a({success:!1,error:"Recompensa no encontrada"});return}const t=i[o];i.splice(o,1),console.log("Recompensa eliminada exitosamente:",t.titulo),console.log("Cat√°logo actualizado, total recompensas:",i.length),a({success:!0,recompensaEliminada:t})},400)});export{j as a,C as b,w as c,D as d,S as e,I as f,b as g,h as u};

import{d as P,w as we,W as et,o as a,c as N,v as r,u as K,h as d,j as e,E as l,l as se,t as s,z as n,I as E,F as T,y as D,G as Ce,X as tt,b as S,Y as ie,T as $e,B,M as le,K as st,q as be,H as ot,V as at,D as ke,f as rt,U as nt,n as it}from"./vue-vendor-DLSXyIw7.js";import{d as Q,e as ce,C as W,i as je,j as de,H as Ee,k as Ae,l as Re,U as qe,A as Me,f as ue,M as Pe,m as Se,n as lt,h as te,T as pe,R as dt,o as ct,B as xe}from"./index-D33O_vwf.js";import{a as ut}from"./encuestas.service-DI5Iei12.js";import{X as Te}from"./x-qOn0wnZo.js";import{L as ze}from"./lightbulb-BKd5l1Kr.js";import{T as me}from"./target-DHY9vHaX.js";import{A as X}from"./alert-triangle-Dg4Dpai8.js";import{B as De}from"./building-2-sddyofuc.js";import{E as Ie}from"./eye-D40qS93y.js";import{I as Be}from"./info-DXoeYcFN.js";import{S as mt}from"./save-BO0ouwoH.js";import{C as ve,r as gt}from"./charts-CTwtOHf5.js";import{T as bt,M as pt}from"./trending-down-BiwrHWy_.js";import{A as xt}from"./arrow-left-DGT1lY9t.js";import"./supabase-B7V2753y.js";/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=Q("BellIcon",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=Q("ChevronRightIcon",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=Q("DownloadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=Q("SparklesIcon",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-vue-next v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=Q("ZapIcon",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),ht=["aria-labelledby"],yt={class:"px-6 pt-6 pb-4 border-b border-gray-200"},_t={class:"flex items-start justify-between"},wt={class:"flex-1"},Ct={class:"flex items-center gap-3 mb-2"},$t=["id"],kt={class:"px-6 py-5"},jt={class:"flex items-center justify-between"},Et={class:"text-2xl font-bold"},At={class:"space-y-4"},Rt={class:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2"},qt={class:"text-sm text-gray-700 leading-relaxed"},Mt={class:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg"},Pt={class:"text-sm font-semibold text-blue-900 mb-2 flex items-center gap-2"},St={class:"text-sm text-blue-800 space-y-1.5"},Tt={class:"px-6 py-4 bg-gray-50 rounded-b-xl flex gap-3"},zt={__name:"ModalAccionRecomendada",props:{modelValue:{type:Boolean,required:!0},alerta:{type:Object,default:null}},emits:["update:modelValue","marcar-gestionado"],setup(_,{emit:C}){const m=_,q=C,g=P(null),f=()=>{q("update:modelValue",!1)},c=()=>{q("marcar-gestionado",m.alerta),f()},b=()=>{if(!m.alerta)return X;const y=m.alerta.categoria.toLowerCase();return y.includes("estr√©s")?je:y.includes("herramientas")||y.includes("recursos")?Ge:y.includes("comunicaci√≥n")?de:y.includes("vida")||y.includes("trabajo")?Ee:m.alerta.tipo==="critica"?X:Ae},u=()=>m.alerta?m.alerta.tipo==="critica"?"bg-red-500":m.alerta.tipo==="moderada"?"bg-orange-500":"bg-green-500":"bg-gray-500",M=()=>m.alerta?m.alerta.tipo==="critica"?"text-red-700":m.alerta.tipo==="moderada"?"text-orange-700":"text-green-700":"text-gray-700",j=()=>m.alerta?m.alerta.tipo==="critica"?"bg-red-50 border border-red-200 text-red-800":m.alerta.tipo==="moderada"?"bg-orange-50 border border-orange-200 text-orange-800":"bg-green-50 border border-green-200 text-green-800":"bg-gray-50 border border-gray-200",I=()=>m.alerta?m.alerta.tipo==="critica"?"bg-red-600 hover:bg-red-700 focus:ring-red-500":m.alerta.tipo==="moderada"?"bg-orange-600 hover:bg-orange-700 focus:ring-orange-500":"bg-green-600 hover:bg-green-700 focus:ring-green-500":"bg-gray-600 hover:bg-gray-700 focus:ring-gray-500",h=()=>{if(!m.alerta)return"";const y=m.alerta.valor;return y<60?"Recomendamos implementar un programa de intervenci√≥n inmediata: talleres de gesti√≥n del estr√©s o sesiones 1:1 de apoyo psicol√≥gico. La situaci√≥n actual requiere acci√≥n urgente para evitar un mayor deterioro en esta √°rea.":y>=60&&y<=80?"Sugerimos realizar acciones preventivas: encuestas r√°pidas o sesiones de comunicaci√≥n interna. Esta es una oportunidad para mejorar antes de que la situaci√≥n se vuelva cr√≠tica.":"No se requieren acciones urgentes. Mant√©n las buenas pr√°cticas actuales y contin√∫a monitoreando esta √°rea para asegurar que se mantenga en niveles √≥ptimos."},v=()=>{if(!m.alerta)return[];const y=m.alerta.categoria.toLowerCase(),$=m.alerta.valor;return y.includes("estr√©s")?$<60?["Programar talleres de mindfulness y gesti√≥n del estr√©s","Ofrecer sesiones 1:1 de apoyo psicol√≥gico","Implementar d√≠as de salud mental","Revisar cargas de trabajo del equipo"]:["Realizar encuestas de pulso m√°s frecuentes","Ofrecer pausas activas durante la jornada","Compartir recursos de gesti√≥n del estr√©s","Monitorear indicadores de bienestar semanalmente"]:y.includes("herramientas")||y.includes("recursos")?$<60?["Realizar auditor√≠a de herramientas actuales","Invertir en tecnolog√≠a y capacitaci√≥n","Reuniones 1:1 para identificar necesidades","Implementar nuevas soluciones inmediatamente"]:["Encuestas sobre necesidades de herramientas","Actualizar software y equipos","Capacitaciones sobre herramientas existentes","Mantener canales de feedback abiertos"]:y.includes("comunicaci√≥n")?$<60?["Implementar reuniones de equipo regulares","Crear canales de comunicaci√≥n transparentes","Capacitaci√≥n en comunicaci√≥n efectiva","Establecer protocolos de comunicaci√≥n claros"]:["Reforzar canales de comunicaci√≥n existentes","Town halls mensuales con el equipo","Promover feedback bidireccional","Celebrar logros y compartir actualizaciones"]:y.includes("vida")||y.includes("trabajo")?$<60?["Revisar pol√≠ticas de horarios y flexibilidad","Implementar horarios flexibles o trabajo remoto","Establecer l√≠mites claros de disponibilidad","Promover desconexi√≥n fuera del horario laboral"]:["Mantener pol√≠ticas de flexibilidad actuales","Promover vacaciones y d√≠as de descanso","Compartir mejores pr√°cticas de balance","Reconocer a quienes mantienen un buen balance"]:$<60?["Realizar diagn√≥stico detallado del √°rea","Implementar plan de intervenci√≥n inmediata","Asignar responsables y recursos","Monitorear progreso semanalmente"]:["Realizar encuestas de seguimiento","Implementar mejoras incrementales","Compartir buenas pr√°cticas","Mantener monitoreo continuo"]},x=y=>{y.key==="Escape"&&f()};return we(()=>m.modelValue,y=>{y?(document.body.style.overflow="hidden",document.addEventListener("keydown",x),setTimeout(()=>{var $;($=g.value)==null||$.focus()},100)):(document.body.style.overflow="",document.removeEventListener("keydown",x))}),et(()=>{document.body.style.overflow="",document.removeEventListener("keydown",x)}),(y,$)=>(a(),N($e,{to:"body"},[r(ie,{name:"modal"},{default:K(()=>{var Z,k,p,w;return[_.modelValue?(a(),d("div",{key:0,class:"fixed inset-0 bg-black/40 flex justify-center items-center z-50 p-4",onClick:Ce(f,["self"]),onKeydown:tt(f,["esc"])},[e("div",{ref_key:"modalContent",ref:g,class:"bg-white rounded-xl shadow-lg w-full max-w-md transform transition-all",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title-"+((Z=_.alerta)==null?void 0:Z.categoria)},[e("div",yt,[e("div",_t,[e("div",wt,[e("div",Ct,[e("div",{class:l(["w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0",u()])},[(a(),N(se(b()),{class:"h-6 w-6 text-white"}))],2),e("h2",{id:"modal-title-"+((k=_.alerta)==null?void 0:k.categoria),class:"text-xl font-bold text-gray-900"}," Recomendaciones para mejorar ",8,$t)]),e("p",{class:l(["text-lg font-semibold",M()])},s((p=_.alerta)==null?void 0:p.categoria),3)]),e("button",{onClick:f,class:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Cerrar modal"},[r(n(Te),{class:"h-6 w-6"})])])]),e("div",kt,[e("div",{class:l(["mb-4 p-3 rounded-lg",j()])},[e("div",jt,[$[0]||($[0]=e("span",{class:"font-semibold"},"Nivel actual:",-1)),e("span",Et,s((w=_.alerta)==null?void 0:w.valor)+"%",1)])],2),e("div",At,[e("div",null,[e("h3",Rt,[r(n(ze),{class:"h-4 w-4 text-yellow-500"}),$[1]||($[1]=E(" Recomendaciones "))]),e("p",qt,s(h()),1)]),e("div",Mt,[e("h4",Pt,[r(n(me),{class:"h-4 w-4"}),$[2]||($[2]=E(" Acciones sugeridas: "))]),e("ul",St,[(a(!0),d(T,null,D(v(),(L,Y)=>(a(),d("li",{key:Y,class:"flex items-start gap-2"},[$[3]||($[3]=e("span",{class:"text-blue-600 mt-0.5"},"‚Ä¢",-1)),e("span",null,s(L),1)]))),128))])])])]),e("div",Tt,[e("button",{onClick:f,class:"flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"}," Cerrar "),e("button",{onClick:c,class:l(["flex-1 px-4 py-2.5 text-sm font-medium text-white rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",I()])},[r(n(W),{class:"h-4 w-4 inline mr-2"}),$[4]||($[4]=E(" Marcar como gestionado "))],2)])],8,ht)],32)):S("",!0)]}),_:1})]))}},Dt=ce(zt,[["__scopeId","data-v-9f9212d1"]]),It={class:"space-y-6"},Bt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Gt={class:"bg-white rounded-xl p-6 shadow-sm border border-gray-200"},Lt={class:"flex items-center justify-between"},Vt={class:"bg-white rounded-xl p-6 shadow-sm border border-gray-200"},Nt={class:"flex items-center justify-between"},Ft={class:"text-3xl font-bold text-primary"},Ot={class:"w-16 h-16 rounded-full bg-indigo-100 flex items-center justify-center"},Ht={class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},Ut={class:"overflow-x-auto"},Kt={class:"min-w-full divide-y divide-gray-200"},Wt={class:"bg-white divide-y divide-gray-200"},Zt={class:"px-6 py-4 whitespace-nowrap"},Xt={class:"flex items-center"},Qt={class:"text-sm font-semibold text-gray-900"},Yt={class:"px-6 py-4 whitespace-nowrap"},Jt={class:"flex items-center"},es={class:"flex-1"},ts={class:"flex items-center justify-between mb-1"},ss={class:"text-sm font-semibold text-gray-900"},os={class:"w-full bg-gray-200 rounded-full h-2"},as={class:"px-6 py-4 whitespace-nowrap"},rs={class:"flex items-center gap-2"},ns={class:"px-6 py-4 whitespace-nowrap"},is={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},ls={class:"space-y-4"},ds={class:"flex items-center justify-between"},cs={class:"text-sm font-medium text-gray-700"},us={class:"relative w-full bg-gray-200 rounded-full h-8"},ms={class:"text-xs font-semibold text-white"},gs={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},bs={class:"bg-red-50 border border-red-200 rounded-xl p-6"},ps={class:"flex items-center mb-3"},xs={class:"text-2xl font-bold text-red-700 mb-1"},vs={class:"text-xs text-red-600"},fs={class:"bg-orange-50 border border-orange-200 rounded-xl p-6"},hs={class:"flex items-center mb-3"},ys={class:"text-2xl font-bold text-orange-700 mb-1"},_s={class:"text-xs text-orange-600"},ws={class:"bg-green-50 border border-green-200 rounded-xl p-6"},Cs={class:"flex items-center mb-3"},$s={class:"text-2xl font-bold text-green-700 mb-1"},ks={class:"text-xs text-green-600"},js={__name:"ResultadosPorDepartamento",setup(_){const C=P([{nombre:"RRHH",participacion:92,promedio:4.6},{nombre:"Marketing",participacion:78,promedio:4.1},{nombre:"Ventas",participacion:63,promedio:3.2},{nombre:"Producci√≥n",participacion:70,promedio:3.8},{nombre:"Desarrollo",participacion:88,promedio:4.3},{nombre:"Administraci√≥n",participacion:85,promedio:4.5}]),m=B(()=>C.value.reduce((v,x)=>v+x.promedio,0)/C.value.length),q=B(()=>C.value.reduce((v,x)=>v+x.participacion,0)/C.value.length),g=B(()=>[...C.value].sort((h,v)=>v.promedio-h.promedio)),f=B(()=>C.value.filter(h=>h.promedio<3)),c=B(()=>C.value.filter(h=>h.promedio>=3&&h.promedio<4)),b=B(()=>C.value.filter(h=>h.promedio>=4)),u=h=>h<3?{bg:"bg-red-50",bgBar:"bg-red-500",text:"text-red-700",border:"border-red-200"}:h<4?{bg:"bg-orange-50",bgBar:"bg-orange-500",text:"text-orange-700",border:"border-orange-200"}:{bg:"bg-green-50",bgBar:"bg-green-500",text:"text-green-700",border:"border-green-200"},M=h=>h<3?"bg-red-50 text-red-700 border border-red-200":h<4?"bg-orange-50 text-orange-700 border border-orange-200":"bg-green-50 text-green-700 border border-green-200",j=h=>h<3?"bg-red-500":h<4?"bg-orange-500":"bg-green-500",I=h=>h<3?"Alto riesgo":h<4?"Riesgo moderado":"Clima saludable";return(h,v)=>(a(),d("div",It,[v[11]||(v[11]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Resultados por Departamento"),e("p",{class:"text-gray-600 mt-1"},"Visualiza la tasa de participaci√≥n y el promedio de bienestar en cada √°rea.")],-1)),e("div",Bt,[e("div",Gt,[e("div",Lt,[e("div",null,[v[0]||(v[0]=e("p",{class:"text-sm font-medium text-gray-500 mb-1"},"Promedio General",-1)),e("p",{class:l(["text-3xl font-bold",u(m.value).text])},s(m.value.toFixed(1)),3),v[1]||(v[1]=e("p",{class:"text-xs text-gray-500 mt-1"},"de 5.0",-1))]),e("div",{class:l(["w-16 h-16 rounded-full flex items-center justify-center",u(m.value).bg])},[r(n(Re),{class:l(["h-8 w-8",u(m.value).text])},null,8,["class"])],2)])]),e("div",Vt,[e("div",Nt,[e("div",null,[v[2]||(v[2]=e("p",{class:"text-sm font-medium text-gray-500 mb-1"},"Participaci√≥n Global",-1)),e("p",Ft,s(q.value.toFixed(0))+"% ",1),v[3]||(v[3]=e("p",{class:"text-xs text-gray-500 mt-1"},"de todos los empleados",-1))]),e("div",Ot,[r(n(qe),{class:"h-8 w-8 text-primary"})])])])]),e("div",Ht,[e("div",Ut,[e("table",Kt,[v[5]||(v[5]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Departamento "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Participaci√≥n "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Promedio "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Estado ")])],-1)),e("tbody",Wt,[(a(!0),d(T,null,D(C.value,x=>(a(),d("tr",{key:x.nombre,class:"hover:bg-gray-50 transition-colors"},[e("td",Zt,[e("div",Xt,[e("div",{class:l(["w-10 h-10 rounded-lg flex items-center justify-center mr-3",u(x.promedio).bg])},[r(n(De),{class:l(["h-5 w-5",u(x.promedio).text])},null,8,["class"])],2),e("div",null,[e("div",Qt,s(x.nombre),1)])])]),e("td",Yt,[e("div",Jt,[e("div",es,[e("div",ts,[e("span",ss,s(x.participacion)+"%",1)]),e("div",os,[e("div",{class:l(["h-2 rounded-full transition-all duration-300",x.participacion>=80?"bg-green-500":x.participacion>=60?"bg-yellow-500":"bg-red-500"]),style:le({width:`${x.participacion}%`})},null,6)])])])]),e("td",as,[e("div",rs,[e("span",{class:l(["text-2xl font-bold",u(x.promedio).text])},s(x.promedio.toFixed(1)),3),v[4]||(v[4]=e("span",{class:"text-sm text-gray-500"},"/ 5.0",-1))])]),e("td",ns,[e("span",{class:l(["inline-flex items-center px-3 py-1 rounded-full text-xs font-medium",M(x.promedio)])},[e("span",{class:l(["w-2 h-2 rounded-full mr-2",j(x.promedio)])},null,2),E(" "+s(I(x.promedio)),1)],2)])]))),128))])])])]),e("div",is,[v[6]||(v[6]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Comparativa de clima laboral por departamento",-1)),e("div",ls,[(a(!0),d(T,null,D(g.value,x=>(a(),d("div",{key:x.nombre,class:"space-y-2"},[e("div",ds,[e("span",cs,s(x.nombre),1),e("span",{class:l(["text-sm font-bold",u(x.promedio).text])},s(x.promedio.toFixed(1)),3)]),e("div",us,[e("div",{class:l(["h-8 rounded-full transition-all duration-500 flex items-center justify-end pr-3",u(x.promedio).bgBar]),style:le({width:`${x.promedio/5*100}%`})},[e("span",ms,s(x.promedio.toFixed(1)),1)],6)])]))),128))]),v[7]||(v[7]=st('<div class="mt-6 pt-6 border-t border-gray-200"><p class="text-xs font-medium text-gray-500 uppercase tracking-wider mb-3">Interpretaci√≥n</p><div class="flex flex-wrap gap-4"><div class="flex items-center"><div class="w-3 h-3 rounded-full bg-red-500 mr-2"></div><span class="text-xs text-gray-600">&lt; 3.0 - Alto riesgo</span></div><div class="flex items-center"><div class="w-3 h-3 rounded-full bg-orange-500 mr-2"></div><span class="text-xs text-gray-600">3.0 - 4.0 - Riesgo moderado</span></div><div class="flex items-center"><div class="w-3 h-3 rounded-full bg-green-500 mr-2"></div><span class="text-xs text-gray-600">&gt; 4.0 - Clima saludable</span></div></div></div>',1))]),e("div",gs,[e("div",bs,[e("div",ps,[r(n(X),{class:"h-5 w-5 text-red-600 mr-2"}),v[8]||(v[8]=e("h4",{class:"text-sm font-semibold text-red-900"},"Alto Riesgo",-1))]),e("p",xs,s(f.value.length),1),e("p",vs,s(f.value.length===0?"Sin departamentos":f.value.map(x=>x.nombre).join(", ")),1)]),e("div",fs,[e("div",hs,[r(n(Me),{class:"h-5 w-5 text-orange-600 mr-2"}),v[9]||(v[9]=e("h4",{class:"text-sm font-semibold text-orange-900"},"Riesgo Moderado",-1))]),e("p",ys,s(c.value.length),1),e("p",_s,s(c.value.length===0?"Sin departamentos":c.value.map(x=>x.nombre).join(", ")),1)]),e("div",ws,[e("div",Cs,[r(n(W),{class:"h-5 w-5 text-green-600 mr-2"}),v[10]||(v[10]=e("h4",{class:"text-sm font-semibold text-green-900"},"Clima Saludable",-1))]),e("p",$s,s(b.value.length),1),e("p",ks,s(b.value.length===0?"Sin departamentos":b.value.map(x=>x.nombre).join(", ")),1)])])]))}},fe=[{id:"mejora",titulo:"Comunicaci√≥n: Plan de Mejora",cuerpo:`Tras los resultados de la encuesta {nombre_encuesta}, hemos detectado √°reas de mejora y estamos implementando acciones espec√≠ficas para fortalecer nuestro clima laboral.

Nuestro compromiso es trabajar juntos para mejorar estos aspectos clave:
‚Ä¢ Implementar nuevas iniciativas de bienestar
‚Ä¢ Reforzar canales de comunicaci√≥n
‚Ä¢ Desarrollar planes de acci√≥n por departamento

Agradecemos vuestra participaci√≥n y seguiremos informando sobre los avances.`,icono:"üìä",color:"orange"},{id:"felicitacion",titulo:"Comunicaci√≥n: Clima Positivo",cuerpo:`Los resultados de la encuesta {nombre_encuesta} reflejan un alto nivel de compromiso y bienestar. ¬°Gracias por formar parte de este logro colectivo!

Vuestro feedback positivo demuestra que estamos en el camino correcto:
‚Ä¢ Excelente clima de trabajo en equipo
‚Ä¢ Alto nivel de satisfacci√≥n general
‚Ä¢ Compromiso con los valores organizacionales

Seguiremos trabajando para mantener este ambiente positivo.`,icono:"üéâ",color:"green"},{id:"general",titulo:"Comunicaci√≥n General",cuerpo:`Queremos agradecer la participaci√≥n de todos en la encuesta {nombre_encuesta}. Pronto estaremos implementando nuevas iniciativas basadas en vuestros aportes.

Vuestra opini√≥n es fundamental para:
‚Ä¢ Identificar oportunidades de mejora
‚Ä¢ Dise√±ar planes de acci√≥n efectivos
‚Ä¢ Fortalecer nuestra cultura organizacional

Os mantendremos informados sobre los pr√≥ximos pasos y las acciones que implementaremos.`,icono:"üì¢",color:"blue"},{id:"acciones",titulo:"Comunicaci√≥n: Acciones Implementadas",cuerpo:`Bas√°ndonos en los resultados de {nombre_encuesta}, hemos implementado las siguientes acciones concretas:

‚úì Nuevos programas de bienestar y apoyo
‚úì Mejoras en infraestructura y recursos
‚úì Espacios de escucha y feedback continuo
‚úì Formaci√≥n en gesti√≥n del estr√©s y liderazgo

Estas son solo las primeras iniciativas. Continuaremos trabajando en crear el mejor ambiente laboral posible.`,icono:"‚úÖ",color:"indigo"}],Es=[{id:"todos",label:"Todos los empleados",descripcion:"Enviar a toda la organizaci√≥n",icono:"üë•"},{id:"lideres",label:"Solo l√≠deres",descripcion:"Enviar √∫nicamente a roles de liderazgo",icono:"üëî"},{id:"riesgo_alto",label:"Departamentos con riesgo alto",descripcion:"√Åreas que requieren atenci√≥n prioritaria",icono:"‚ö†Ô∏è"},{id:"riesgo_moderado",label:"Departamentos con riesgo moderado",descripcion:"√Åreas con oportunidades de mejora",icono:"üìä"}],As=_=>({..._,id:`com-${Date.now()}`,fecha_envio:new Date,estado:"enviado"}),Rs={key:0,class:"bg-white rounded-2xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto"},qs={class:"sticky top-0 bg-gradient-to-r from-indigo-50 to-purple-50 px-6 py-5 border-b border-gray-200 z-10"},Ms={class:"flex items-center justify-between"},Ps={class:"flex items-center"},Ss={class:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center mr-4"},Ts={class:"p-6 space-y-6"},zs={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Ds=["onClick"],Is={class:"text-3xl mr-3"},Bs={class:"flex-1"},Gs={class:"font-semibold text-gray-900 text-sm"},Ls={class:"text-xs text-gray-600 mt-1 line-clamp-2"},Vs={key:0},Ns={class:"flex items-center justify-between mt-2"},Fs={class:"text-xs text-gray-500"},Os={class:"font-medium"},Hs={key:1,class:"bg-gray-50 rounded-xl p-5 border border-gray-200"},Us={class:"flex items-center mb-3"},Ks={class:"bg-white rounded-lg p-4 shadow-sm"},Ws={class:"flex items-center mb-3 pb-3 border-b border-gray-200"},Zs={class:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center mr-3"},Xs={class:"text-sm text-gray-700 leading-relaxed whitespace-pre-line"},Qs={class:"space-y-2"},Ys=["value"],Js={class:"ml-3 flex-1"},eo={class:"flex items-center"},to={class:"text-lg mr-2"},so={class:"font-medium text-sm text-gray-900"},oo={class:"text-xs text-gray-600 mt-1"},ao={key:2,class:"bg-blue-50 border border-blue-200 rounded-xl p-4"},ro={class:"flex items-start"},no={class:"text-xs text-blue-800"},io={class:"sticky bottom-0 bg-gray-50 px-6 py-4 border-t border-gray-200 flex justify-between items-center"},lo={class:"flex gap-3"},co=["disabled"],uo=["disabled"],mo={__name:"ModalComunicadoPostEncuesta",props:{isOpen:{type:Boolean,required:!0},nombreEncuesta:{type:String,required:!0},encuestaId:{type:String,default:""}},emits:["close","comunicado-enviado"],setup(_,{emit:C}){const m=_,q=C,g=ue(),f=P(null),c=P(""),b=P(["todos"]),u=P(!1),M=P(null),j=B(()=>{let k=0;return b.value.includes("todos")&&(k+=70),b.value.includes("lideres")&&(k+=12),b.value.includes("riesgo_alto")&&(k+=15),b.value.includes("riesgo_moderado")&&(k+=25),Math.min(k,70)}),I=k=>{f.value=k,c.value=k.cuerpo.replace("{nombre_encuesta}",m.nombreEncuesta)},h=()=>{f.value&&(c.value=f.value.cuerpo.replace("{nombre_encuesta}",m.nombreEncuesta))},v=()=>{g.add({severity:"info",summary:"Borrador guardado",detail:"El comunicado ha sido guardado como borrador",life:3e3})},x=async()=>{var k;if(!c.value||b.value.length===0){g.add({severity:"warn",summary:"Campos incompletos",detail:"Completa el mensaje y selecciona al menos un destinatario",life:4e3});return}u.value=!0;try{await new Promise(w=>setTimeout(w,1500));const p=As({encuesta_id:m.encuestaId,nombre_encuesta:m.nombreEncuesta,tipo:((k=f.value)==null?void 0:k.id)||"general",cuerpo:c.value,destinatarios:b.value,total_destinatarios:j.value});M.value=p,g.add({severity:"success",summary:"Comunicado enviado correctamente",detail:`Se ha enviado a ${j.value} destinatarios`,life:5e3}),q("comunicado-enviado",p),setTimeout(()=>{y()},1e3)}catch{g.add({severity:"error",summary:"Error al enviar",detail:"No se pudo enviar el comunicado. Intenta de nuevo.",life:4e3})}finally{u.value=!1}},y=()=>{q("close"),setTimeout(()=>{f.value=null,c.value="",b.value=["todos"]},200)},$=k=>new Date(k).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),Z=k=>{const p=fe.find(w=>w.id===k);return(p==null?void 0:p.titulo)||"Comunicaci√≥n General"};return we(()=>m.isOpen,k=>{k||(f.value=null,c.value="")}),(k,p)=>(a(),N($e,{to:"body"},[r(ie,{"enter-active-class":"transition-opacity duration-200","leave-active-class":"transition-opacity duration-200","enter-from-class":"opacity-0","leave-to-class":"opacity-0"},{default:K(()=>[_.isOpen?(a(),d("div",{key:0,class:"fixed inset-0 bg-black/30 backdrop-blur-sm flex justify-center items-center z-50 p-4",onClick:Ce(y,["self"])},[r(ie,{"enter-active-class":"transition-all duration-200","leave-active-class":"transition-all duration-200","enter-from-class":"opacity-0 scale-95","leave-to-class":"opacity-0 scale-95"},{default:K(()=>[_.isOpen?(a(),d("div",Rs,[e("div",qs,[e("div",Ms,[e("div",Ps,[e("div",Ss,[r(n(Pe),{class:"h-6 w-6 text-white"})]),p[2]||(p[2]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Comunicar Resultados"),e("p",{class:"text-sm text-gray-600 mt-1"},"Crea un comunicado sobre las acciones post-encuesta")],-1))]),e("button",{onClick:y,class:"text-gray-400 hover:text-gray-600 transition-colors p-2 hover:bg-white/50 rounded-lg"},[r(n(Te),{class:"h-6 w-6"})])])]),e("div",Ts,[e("div",null,[p[3]||(p[3]=e("label",{class:"block text-sm font-semibold text-gray-900 mb-3"}," Selecciona una plantilla ",-1)),e("div",zs,[(a(!0),d(T,null,D(n(fe),w=>{var L;return a(),d("button",{key:w.id,onClick:Y=>I(w),class:l(["flex items-start p-4 border-2 rounded-xl text-left transition-all hover:shadow-md",((L=f.value)==null?void 0:L.id)===w.id?`border-${w.color}-500 bg-${w.color}-50 ring-2 ring-${w.color}-200`:"border-gray-300 bg-white hover:border-gray-400"])},[e("div",Is,s(w.icono),1),e("div",Bs,[e("h3",Gs,s(w.titulo),1),e("p",Ls,s(w.cuerpo.substring(0,80))+"...",1)])],10,Ds)}),128))])]),f.value?(a(),d("div",Vs,[p[5]||(p[5]=e("label",{class:"block text-sm font-semibold text-gray-900 mb-2"}," Personaliza el mensaje ",-1)),be(e("textarea",{"onUpdate:modelValue":p[0]||(p[0]=w=>c.value=w),rows:"8",class:"w-full px-4 py-3 rounded-lg border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm",placeholder:"Escribe o edita el mensaje del comunicado..."},null,512),[[ot,c.value]]),e("div",Ns,[e("p",Fs,[e("span",Os,s(c.value.length),1),p[4]||(p[4]=E(" caracteres "))]),e("button",{onClick:h,class:"text-xs text-indigo-600 hover:text-indigo-700 font-medium"}," Restaurar plantilla original ")])])):S("",!0),c.value?(a(),d("div",Hs,[e("div",Us,[r(n(Ie),{class:"h-5 w-5 text-gray-600 mr-2"}),p[6]||(p[6]=e("h3",{class:"text-sm font-semibold text-gray-900"},"Vista Previa",-1))]),e("div",Ks,[e("div",Ws,[e("div",Zs,[r(n(De),{class:"h-5 w-5 text-indigo-600"})]),p[7]||(p[7]=e("div",null,[e("p",{class:"font-semibold text-sm text-gray-900"},"Recursos Humanos"),e("p",{class:"text-xs text-gray-500"},"Hoy")],-1))]),e("p",Xs,s(c.value),1)])])):S("",!0),e("div",null,[p[8]||(p[8]=e("label",{class:"block text-sm font-semibold text-gray-900 mb-3"}," Selecciona destinatarios ",-1)),e("div",Qs,[(a(!0),d(T,null,D(n(Es),w=>(a(),d("label",{key:w.id,class:l(["flex items-start p-3 border-2 rounded-lg cursor-pointer transition-all hover:bg-gray-50",b.value.includes(w.id)?"border-indigo-500 bg-indigo-50":"border-gray-300"])},[be(e("input",{type:"checkbox",value:w.id,"onUpdate:modelValue":p[1]||(p[1]=L=>b.value=L),class:"mt-1 h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,Ys),[[at,b.value]]),e("div",Js,[e("div",eo,[e("span",to,s(w.icono),1),e("span",so,s(w.label),1)]),e("p",oo,s(w.descripcion),1)])],2))),128))])]),M.value?(a(),d("div",ao,[e("div",ro,[r(n(Be),{class:"h-5 w-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),e("div",null,[p[12]||(p[12]=e("p",{class:"text-sm font-semibold text-blue-900 mb-1"},"√öltimo comunicado enviado",-1)),e("p",no,[p[9]||(p[9]=e("strong",null,"Fecha:",-1)),E(" "+s($(M.value.fecha_envio))+" ‚Ä¢ ",1),p[10]||(p[10]=e("strong",null,"Tipo:",-1)),E(" "+s(Z(M.value.tipo))+" ‚Ä¢ ",1),p[11]||(p[11]=e("strong",null,"Destinatarios:",-1)),E(" "+s(M.value.total_destinatarios)+" personas ",1)])])])])):S("",!0)]),e("div",io,[e("button",{onClick:y,class:"px-5 py-2 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-colors"}," Cancelar "),e("div",lo,[e("button",{onClick:v,disabled:!c.value||b.value.length===0,class:"px-5 py-2 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[r(n(mt),{class:"h-4 w-4 inline mr-2"}),p[13]||(p[13]=E(" Guardar borrador "))],8,co),e("button",{onClick:x,disabled:!c.value||b.value.length===0||u.value,class:"px-5 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center"},[u.value?(a(),N(n(lt),{key:1,class:"h-4 w-4 mr-2 animate-spin"})):(a(),N(n(Se),{key:0,class:"h-4 w-4 mr-2"})),E(" "+s(u.value?"Enviando...":"Enviar comunicado"),1)],8,uo)])])])):S("",!0)]),_:1})])):S("",!0)]),_:1})]))}},he=[{id:"clima-laboral",nombre:"Programa de Clima Laboral Positivo",descripcion:"Talleres y din√°micas para mejorar el ambiente de trabajo y las relaciones interpersonales.",icono:"üåü",dimensiones:["clima_laboral","ambiente_trabajo"],umbralActivacion:3.5,categoria:"bienestar_organizacional"},{id:"liderazgo-efectivo",nombre:"Capacitaci√≥n en Liderazgo Efectivo",descripcion:"Programa de desarrollo de habilidades de liderazgo para mandos medios y directivos.",icono:"üë•",dimensiones:["liderazgo","supervision","gestion_equipos"],umbralActivacion:3.5,categoria:"desarrollo_liderazgo"},{id:"balance-vida",nombre:"Equilibrio Vida-Trabajo",descripcion:"Estrategias de gesti√≥n del tiempo, flexibilidad laboral y bienestar personal.",icono:"‚öñÔ∏è",dimensiones:["balance_vida_trabajo","carga_trabajo","horarios"],umbralActivacion:3.3,categoria:"bienestar_personal"},{id:"comunicacion-interna",nombre:"Mejora de Comunicaci√≥n Organizacional",descripcion:"Herramientas y canales para optimizar la comunicaci√≥n entre equipos y niveles.",icono:"üí¨",dimensiones:["comunicacion","transparencia","informacion"],umbralActivacion:3.5,categoria:"comunicacion"},{id:"reconocimiento",nombre:"Sistema de Reconocimiento y Recompensas",descripcion:"Programa para valorar logros, esfuerzos y contribuciones del equipo.",icono:"üèÜ",dimensiones:["reconocimiento","motivacion","valoracion"],umbralActivacion:3.5,categoria:"motivacion"},{id:"desarrollo-profesional",nombre:"Plan de Desarrollo y Crecimiento",descripcion:"Rutas de carrera, capacitaciones y oportunidades de crecimiento profesional.",icono:"üìà",dimensiones:["desarrollo","crecimiento","capacitacion","carrera"],umbralActivacion:3.5,categoria:"desarrollo_profesional"},{id:"salud-mental",nombre:"Apoyo en Salud Mental y Bienestar",descripcion:"Sesiones de psicolog√≠a, mindfulness y gesti√≥n del estr√©s.",icono:"üßò",dimensiones:["estres","salud_mental","bienestar_emocional","presion"],umbralActivacion:3.3,categoria:"salud_bienestar"},{id:"trabajo-equipo",nombre:"Fortalecimiento de Trabajo en Equipo",descripcion:"Din√°micas de team building y colaboraci√≥n efectiva entre √°reas.",icono:"ü§ù",dimensiones:["colaboracion","trabajo_equipo","coordinacion"],umbralActivacion:3.5,categoria:"trabajo_equipo"},{id:"gestion-conflictos",nombre:"Gesti√≥n de Conflictos y Mediaci√≥n",descripcion:"Herramientas para resolver conflictos de manera constructiva.",icono:"ü§≤",dimensiones:["conflictos","relaciones_laborales","resolucion"],umbralActivacion:3.3,categoria:"resolucion_conflictos"},{id:"autonomia-empoderamiento",nombre:"Autonom√≠a y Empoderamiento",descripcion:"Promover la toma de decisiones y la responsabilidad individual.",icono:"üí™",dimensiones:["autonomia","empoderamiento","participacion","decision"],umbralActivacion:3.5,categoria:"empoderamiento"},{id:"recursos-condiciones",nombre:"Optimizaci√≥n de Recursos y Condiciones",descripcion:"Mejora de infraestructura, herramientas y condiciones f√≠sicas de trabajo.",icono:"üõ†Ô∏è",dimensiones:["recursos","herramientas","condiciones_fisicas","infraestructura"],umbralActivacion:3.5,categoria:"recursos_infraestructura"},{id:"cultura-innovacion",nombre:"Cultura de Innovaci√≥n y Creatividad",descripcion:"Espacios y programas para fomentar la innovaci√≥n y nuevas ideas.",icono:"üí°",dimensiones:["innovacion","creatividad","propuestas"],umbralActivacion:3.5,categoria:"innovacion"}],ye=_=>_.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"_").replace(/[√°√†√§√¢]/g,"a").replace(/[√©√®√´√™]/g,"e").replace(/[√≠√¨√Ø√Æ]/g,"i").replace(/[√≥√≤√∂√¥]/g,"o").replace(/[√∫√π√º√ª]/g,"u").replace(/[√±]/g,"n"),go=_=>{if(!_||!_.porDimension)return[];const C=new Map,m=_.promedioGlobal||0;return Object.entries(_.porDimension).forEach(([g,f])=>{const c=f.promedio||0,b=ye(g);he.forEach(u=>{if(u.dimensiones.some(j=>{const I=ye(j);return b.includes(I)||I.includes(b)||g.toLowerCase().includes(j.toLowerCase())||j.toLowerCase().includes(g.toLowerCase())})&&c<u.umbralActivacion)if(!C.has(u.id))C.set(u.id,{...u,prioridad:u.umbralActivacion-c,dimensionesAfectadas:[g],valorMinimo:c});else{const j=C.get(u.id);j.dimensionesAfectadas.push(g),j.valorMinimo=Math.min(j.valorMinimo,c),j.prioridad=Math.max(j.prioridad,u.umbralActivacion-c)}})}),m<3.5&&["clima-laboral","salud-mental","trabajo-equipo"].forEach(f=>{const c=he.find(b=>b.id===f);c&&!C.has(f)&&C.set(f,{...c,prioridad:3.5-m,dimensionesAfectadas:["General"],valorMinimo:m})}),Array.from(C.values()).sort((g,f)=>f.prioridad-g.prioridad).slice(0,6)},ne=_=>_>=1.5?{texto:"Alta",color:"text-red-600",bg:"bg-red-100"}:_>=.8?{texto:"Media",color:"text-orange-600",bg:"bg-orange-100"}:{texto:"Baja",color:"text-yellow-600",bg:"bg-yellow-100"},_e=_=>({bienestar_organizacional:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-700"},desarrollo_liderazgo:{bg:"bg-purple-50",border:"border-purple-200",text:"text-purple-700"},bienestar_personal:{bg:"bg-green-50",border:"border-green-200",text:"text-green-700"},comunicacion:{bg:"bg-cyan-50",border:"border-cyan-200",text:"text-cyan-700"},motivacion:{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-700"},desarrollo_profesional:{bg:"bg-indigo-50",border:"border-indigo-200",text:"text-indigo-700"},salud_bienestar:{bg:"bg-pink-50",border:"border-pink-200",text:"text-pink-700"},trabajo_equipo:{bg:"bg-teal-50",border:"border-teal-200",text:"text-teal-700"},resolucion_conflictos:{bg:"bg-orange-50",border:"border-orange-200",text:"text-orange-700"},empoderamiento:{bg:"bg-violet-50",border:"border-violet-200",text:"text-violet-700"},recursos_infraestructura:{bg:"bg-gray-50",border:"border-gray-200",text:"text-gray-700"},innovacion:{bg:"bg-fuchsia-50",border:"border-fuchsia-200",text:"text-fuchsia-700"}})[_]||{bg:"bg-gray-50",border:"border-gray-200",text:"text-gray-700"},bo={class:"bg-gray-50 p-6 rounded-xl space-y-6"},po={class:"flex items-center justify-between"},xo={class:"text-2xl font-bold text-gray-900 flex items-center gap-3"},vo={class:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center"},fo={key:0,class:"flex items-center gap-2 px-4 py-2 bg-indigo-100 rounded-full"},ho={class:"text-sm font-semibold text-indigo-700"},yo={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_o={class:"flex items-start gap-4"},wo={class:"flex-shrink-0"},Co={class:"flex-1 min-w-0"},$o={class:"flex items-start justify-between gap-2 mb-2"},ko={class:"text-base font-semibold text-gray-900"},jo={class:"text-sm text-gray-600 mb-3"},Eo={class:"mb-3"},Ao={class:"flex flex-wrap gap-1"},Ro={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700"},qo=["onClick"],Mo={key:1,class:"bg-white rounded-lg p-8 text-center"},Po={class:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4"},So={class:"bg-indigo-50 border border-indigo-200 rounded-lg p-4"},To={class:"flex items-start gap-3"},zo={__name:"RecomendacionesSmart",props:{resultados:{type:Object,required:!0}},setup(_){const C=ke();ue();const m=_,q=B(()=>go(m.resultados)),g=f=>{const b={"clima-laboral":"trabajo_equipo","liderazgo-efectivo":"liderazgo_consciente","balance-vida":"balance_vida_trabajo","comunicacion-interna":"comunicacion_interna",reconocimiento:"cultura_feedback","desarrollo-profesional":"retencion_talento","salud-mental":"bienestar_mental","trabajo-equipo":"trabajo_equipo","gestion-conflictos":"trabajo_equipo","autonomia-empoderamiento":"retencion_talento","recursos-condiciones":"trabajo_equipo","cultura-innovacion":"retencion_talento"}[f.id]||"liderazgo_consciente";C.push({name:"admin-servicios",query:{servicio:b}})};return(f,c)=>(a(),d("div",bo,[e("div",po,[e("div",null,[e("h3",xo,[e("div",vo,[r(n(ft),{class:"h-6 w-6 text-white"})]),c[0]||(c[0]=E(" Recomendaciones SMART "))]),c[1]||(c[1]=e("p",{class:"text-sm text-gray-600 mt-2"}," Programas y servicios sugeridos seg√∫n los resultados del diagn√≥stico ",-1))]),q.value.length>0?(a(),d("div",fo,[r(n(me),{class:"h-5 w-5 text-indigo-600"}),e("span",ho,s(q.value.length)+" recomendaci√≥n"+s(q.value.length!==1?"es":""),1)])):S("",!0)]),q.value.length>0?(a(),d("div",yo,[(a(!0),d(T,null,D(q.value,(b,u)=>(a(),d("div",{key:b.id,class:l(["bg-white p-5 rounded-lg shadow-sm hover:shadow-md transition-shadow border-l-4",n(_e)(b.categoria).border]),style:le([{animationDelay:`${u*.1}s`},{animation:"slideInUp 0.5s ease-out forwards",opacity:"0"}])},[e("div",_o,[e("div",wo,[e("div",{class:l(["w-14 h-14 rounded-xl flex items-center justify-center text-3xl shadow-sm",n(_e)(b.categoria).bg])},s(b.icono),3)]),e("div",Co,[e("div",$o,[e("h4",ko,s(b.nombre),1),e("span",{class:l(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium whitespace-nowrap",[n(ne)(b.prioridad).bg,n(ne)(b.prioridad).color]])},s(n(ne)(b.prioridad).texto),3)]),e("p",jo,s(b.descripcion),1),e("div",Eo,[c[2]||(c[2]=e("p",{class:"text-xs font-medium text-gray-500 mb-1"},"√Åreas a mejorar:",-1)),e("div",Ao,[(a(!0),d(T,null,D(b.dimensionesAfectadas.slice(0,3),M=>(a(),d("span",{key:M,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700"},s(M),1))),128)),b.dimensionesAfectadas.length>3?(a(),d("span",Ro," +"+s(b.dimensionesAfectadas.length-3)+" m√°s ",1)):S("",!0)])]),e("button",{onClick:M=>g(b),class:"w-full flex items-center justify-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition-colors text-sm font-medium"},[r(n(Ie),{class:"h-4 w-4"}),c[3]||(c[3]=E(" Ver programa "))],8,qo)])])],6))),128))])):(a(),d("div",Mo,[e("div",Po,[r(n(W),{class:"h-8 w-8 text-green-600"})]),c[4]||(c[4]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-2"}," Excelentes resultados ",-1)),c[5]||(c[5]=e("p",{class:"text-gray-600"}," No se detectaron √°reas que requieran programas de mejora inmediatos. El equipo muestra un buen nivel de bienestar en todas las dimensiones. ",-1))])),e("div",So,[e("div",To,[r(n(Be),{class:"h-5 w-5 text-indigo-600 flex-shrink-0 mt-0.5"}),c[6]||(c[6]=e("p",{class:"text-sm text-indigo-900"},[e("span",{class:"font-semibold"},"Nota:"),E(" Estas recomendaciones se generan autom√°ticamente seg√∫n los resultados obtenidos en el diagn√≥stico Clima360 Insight. Cada programa est√° dise√±ado para abordar las √°reas espec√≠ficas que presentan oportunidades de mejora. ")],-1))])])]))}},Do=ce(zo,[["__scopeId","data-v-26dbf8f1"]]),Io={class:"min-h-screen bg-gray-50"},Bo={class:"py-8"},Go={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Lo={key:0,class:"bg-white rounded-lg shadow-sm p-8 text-center"},Vo={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-6 text-center"},No={class:"text-red-600 mb-4"},Fo={key:2,class:"space-y-8"},Oo={class:"flex","aria-label":"Breadcrumb"},Ho={class:"flex items-center space-x-4"},Uo={class:"flex items-center"},Ko={class:"flex items-center"},Wo={class:"text-sm font-medium text-gray-900"},Zo={class:"sticky top-0 z-10 bg-gray-50 -mx-4 px-4 sm:-mx-6 sm:px-6 lg:-mx-8 lg:px-8 py-4"},Xo={class:"bg-white rounded-xl shadow-lg border border-gray-200 p-5"},Qo={class:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4"},Yo={class:"flex items-center gap-6 flex-wrap"},Jo={class:"flex items-center gap-3"},ea={class:"max-w-lg"},ta={class:"bg-white rounded-lg shadow-sm p-6"},sa={class:"flex justify-between items-start"},oa={class:"flex-1"},aa={class:"flex items-center gap-3 mb-2"},ra={class:"text-3xl font-bold text-gray-900"},na={class:"flex items-center space-x-6 text-sm text-gray-500"},ia={class:"flex items-center"},la={class:"flex items-center"},da={class:"flex items-center"},ca={class:"flex space-x-3"},ua={class:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl shadow-lg border border-blue-100 overflow-hidden"},ma={class:"px-8 py-6 border-b border-blue-200 bg-white/50"},ga={class:"flex items-center"},ba={class:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center mr-4"},pa={class:"p-8"},xa={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6"},va={class:"lg:col-span-1 text-center"},fa={class:"text-center"},ha={class:"lg:col-span-2"},ya={class:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden"},_a={class:"px-8 py-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-pink-50"},wa={class:"flex items-center"},Ca={class:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl flex items-center justify-center mr-4"},$a={class:"p-8"},ka={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ja={class:"flex items-start gap-4"},Ea={class:"flex-1 min-w-0"},Aa={class:"flex items-center gap-2 mb-3"},Ra={key:0,class:"space-y-8"},qa={class:"bg-gray-50 px-6 py-4 border-b border-gray-200"},Ma={class:"text-lg font-semibold text-gray-900"},Pa={class:"p-6"},Sa={key:0,class:"mb-6 bg-yellow-50 text-yellow-800 border border-yellow-300 rounded-lg p-4 flex items-start gap-3"},Ta={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},za={class:"bg-gray-50 rounded-lg p-6"},Da={class:"relative h-64 w-full"},Ia=["id"],Ba={class:"space-y-6"},Ga={class:"p-4 bg-blue-50 border border-blue-200 rounded-lg"},La={class:"flex items-start"},Va={class:"text-blue-800 font-medium"},Na={key:0,class:"p-4 bg-orange-50 border border-orange-200 rounded-lg"},Fa={class:"flex items-start justify-between"},Oa={class:"flex-1"},Ha={class:"flex items-start"},Ua={class:"font-semibold text-orange-900 mb-1"},Ka={class:"text-orange-800 text-sm"},Wa={key:1,class:"p-4 bg-green-50 border border-green-200 rounded-lg"},Za={class:"flex items-center"},Xa={class:"space-y-2"},Qa={class:"text-sm text-gray-700"},Ya={class:"flex items-center"},Ja={class:"text-sm font-medium text-gray-900 mr-2"},er={class:"text-xs text-gray-500"},tr={key:0},sr={class:"space-y-3"},or={key:0,class:"p-3 bg-gray-50 border border-gray-200 rounded-lg"},ar={class:"flex items-center justify-between mb-2"},rr={class:"font-medium text-gray-900"},nr={class:"text-sm text-gray-500"},ir={class:"text-sm text-gray-700"},lr={class:"font-semibold"},dr={class:"bg-white rounded-lg shadow-sm p-6"},cr={class:"flex items-center justify-between mb-4"},ur={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},mr={class:"text-center p-4 bg-blue-50 rounded-lg"},gr={class:"text-2xl font-bold text-blue-600"},br={class:"text-center p-4 bg-green-50 rounded-lg"},pr={class:"text-2xl font-bold text-green-600"},xr={class:"text-center p-4 bg-purple-50 rounded-lg"},vr={class:"text-2xl font-bold text-purple-600"},fr={class:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden"},hr={class:"px-8 py-6 border-b border-gray-200 bg-gradient-to-r from-red-50 to-orange-50"},yr={class:"flex items-center justify-between"},_r={class:"flex items-center"},wr={class:"w-12 h-12 bg-gradient-to-br from-red-500 to-orange-600 rounded-xl flex items-center justify-center mr-4"},Cr={class:"text-right"},$r={class:"text-sm text-gray-600"},kr={class:"p-8"},jr={key:0,class:"bg-green-50 rounded-lg p-4 shadow-sm flex items-center gap-3 text-sm border border-green-200"},Er={class:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0"},Ar={key:1,class:"space-y-3"},Rr=["onClick"],qr={class:"flex-1 min-w-0"},Mr={class:"flex items-start justify-between gap-2 mb-1"},Pr={key:0,class:"ml-2 text-xs font-normal text-green-600"},Sr={class:"flex-shrink-0 text-gray-400"},Tr={class:"mt-6 pt-6 border-t border-gray-200"},zr={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Dr={class:"bg-red-50 rounded-lg p-4 text-center border border-red-200"},Ir={class:"text-2xl font-bold text-red-600"},Br={class:"bg-orange-50 rounded-lg p-4 text-center border border-orange-200"},Gr={class:"text-2xl font-bold text-orange-600"},Lr={class:"bg-green-50 rounded-lg p-4 text-center border border-green-200"},Vr={class:"text-2xl font-bold text-green-600"},Nr={__name:"ResultadosEncuestaView",setup(_){ve.register(...gt);const C=nt(),m=ke(),q=ue(),g=P(null),f=P(!0),c=P(null),b=P({}),u=P(72),M=P("up"),j=P(!1),I=P(null),h=P([]),v=P(!1),x=async()=>{f.value=!0,c.value=null;try{const o=C.params.encuestaId,t=await ut(o);g.value=t,await it(),y()}catch(o){c.value=o.message||"Error al cargar los resultados",console.error("Error cargando resultados:",o)}finally{f.value=!1}},y=()=>{var o;(o=g.value)!=null&&o.preguntas&&g.value.preguntas.forEach(t=>{t.resultados&&setTimeout(()=>{const R=document.getElementById(`chart-${t.id}`);if(R){b.value[t.id]&&b.value[t.id].destroy();const V=R.getContext("2d"),O=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6"];b.value[t.id]=new ve(V,{type:"doughnut",data:{labels:t.resultados.labels,datasets:[{data:t.resultados.data,backgroundColor:O.slice(0,t.resultados.labels.length),borderColor:"#ffffff",borderWidth:3,hoverOffset:8}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0,pointStyle:"circle",font:{size:13,weight:"500"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#ffffff",borderWidth:1,callbacks:{label:function(H){const i=H.dataset.data.reduce((z,ee)=>z+ee,0),U=Math.round(H.parsed/i*100);return`${H.label}: ${H.parsed} respuestas (${U}%)`}}}},cutout:"65%",animation:{animateRotate:!0,duration:1e3}}})}},100)})},$=()=>{m.push("/admin/encuestas")},Z=()=>{v.value=!0},k=()=>{v.value=!1},p=o=>{q.add({severity:"success",summary:"Comunicado enviado",detail:`Se ha enviado el comunicado a ${o.total_destinatarios} personas`,life:4e3})},w=o=>{m.push({name:"admin-servicio-detalle",params:{id:o}})},L=()=>{q.add({severity:"info",summary:"Exportando resultados",detail:"Los resultados se est√°n preparando para descarga...",life:4e3})},Y=()=>{m.push("/admin/crear-comunicado")},Le=o=>o.resultadosPorGrupo?o.resultadosPorGrupo.some(t=>t.total_respuestas<5):!1,A=o=>o<60?{bgClass:"bg-red-100",bgLightClass:"bg-red-50",textClass:"text-red-600",textDarkClass:"text-red-800",borderClass:"border-red-200",badgeClass:"bg-red-100 text-red-700"}:o>=60&&o<=80?{bgClass:"bg-orange-100",bgLightClass:"bg-orange-50",textClass:"text-orange-600",textDarkClass:"text-orange-800",borderClass:"border-orange-200",badgeClass:"bg-orange-100 text-orange-700"}:{bgClass:"bg-green-100",bgLightClass:"bg-green-50",textClass:"text-green-600",textDarkClass:"text-green-800",borderClass:"border-green-200",badgeClass:"bg-green-100 text-green-700"},J=o=>o<60?{nivel:"Cr√≠tico",texto:"Nivel cr√≠tico. Requiere intervenci√≥n inmediata."}:o>=60&&o<=80?{nivel:"Mejora",texto:"√Årea con margen de mejora. Recomendamos acciones preventivas."}:{nivel:"Saludable",texto:"√Årea saludable. Mantener pr√°cticas actuales."},Ve=o=>o<60?`El bienestar global actual es del ${o}%. Este resultado indica un nivel cr√≠tico que requiere atenci√≥n inmediata. Se recomienda implementar acciones de intervenci√≥n urgente para mejorar el bienestar del equipo y abordar las √°reas problem√°ticas identificadas.`:o>=60&&o<=80?`El bienestar global actual es del ${o}%. Este resultado muestra un nivel aceptable con oportunidades de mejora. Se sugiere implementar acciones preventivas y monitorear continuamente las √°reas que requieren atenci√≥n para evitar que la situaci√≥n se deteriore.`:`El bienestar global actual es del ${o}%. Este resultado refleja un excelente estado de bienestar del equipo. Se recomienda mantener las pr√°cticas actuales, continuar monitoreando y reforzar las iniciativas que han demostrado ser efectivas.`,Ne=o=>o<60?"Estado cr√≠tico de bienestar. Requiere atenci√≥n inmediata.":o>=60&&o<=80?"Bienestar moderado. Se recomienda aplicar acciones preventivas.":"Bienestar general positivo. Mantener las iniciativas actuales.",Fe=o=>o==="up"?"bg-green-100 text-green-700":o==="down"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700",Oe=o=>o==="up"?pe:o==="down"?bt:pt,He=o=>o==="up"?"En mejora":o==="down"?"En descenso":"Estable",oe=B(()=>{var o;return(o=g.value)!=null&&o.preguntas?[{nombre:"Gesti√≥n del Estr√©s",valor:58,icon:je,...J(58),interpretacion:"Nivel cr√≠tico. Requiere intervenci√≥n inmediata. El 28% del equipo reporta niveles altos de estr√©s.",colorClasses:A(58)},{nombre:"Herramientas y Recursos",valor:83,icon:Ge,...J(83),interpretacion:"√Årea saludable. Mantener pr√°cticas actuales. La mayor√≠a del equipo se siente bien equipado.",colorClasses:A(83)},{nombre:"Comunicaci√≥n Interna",valor:72,icon:de,...J(72),interpretacion:"√Årea con margen de mejora. Recomendamos acciones preventivas para fortalecer la comunicaci√≥n.",colorClasses:A(72)},{nombre:"Balance Vida-Trabajo",valor:68,icon:Ee,...J(68),interpretacion:"√Årea con margen de mejora. Considerar iniciativas que promuevan un mejor equilibrio.",colorClasses:A(68)}]:[]}),G=B(()=>{var t;if(!((t=g.value)!=null&&t.preguntas))return[];const o=[];return oe.value.forEach(R=>{const V=`${R.nombre}-${R.valor}`,O=h.value.includes(V);R.valor<60?o.push({id:V,tipo:"critica",categoria:R.nombre,valor:R.valor,titulo:`Riesgo alto en ${R.nombre}`,mensaje:`Requiere acci√≥n inmediata. El nivel actual (${R.valor}%) indica una situaci√≥n cr√≠tica que necesita intervenci√≥n urgente para evitar deterioro adicional.`,gestionada:O}):R.valor>=60&&R.valor<=80&&o.push({id:V,tipo:"moderada",categoria:R.nombre,valor:R.valor,titulo:`Atenci√≥n moderada en ${R.nombre}`,mensaje:`Considera acciones preventivas. El nivel actual (${R.valor}%) muestra margen de mejora que puede ser abordado con estrategias proactivas.`,gestionada:O})}),o}),Ue=o=>{I.value=o,j.value=!0},Ke=o=>{h.value.includes(o.id)||h.value.push(o.id),q.add({severity:"success",summary:"Alerta gestionada",detail:`La alerta de "${o.categoria}" ha sido marcada como gestionada.`,life:4e3})},F=B(()=>{const o={criticas:0,moderadas:0,estables:0};return oe.value.forEach(t=>{t.valor<60?o.criticas++:t.valor>=60&&t.valor<=80?o.moderadas++:o.estables++}),o}),We=o=>o==="critica"?"bg-red-50 border-red-200":o==="moderada"?"bg-orange-50 border-orange-200":"bg-green-50 border-green-200",Ze=o=>o==="critica"?"bg-red-500":o==="moderada"?"bg-orange-500":"bg-green-500",Xe=o=>o==="critica"?X:o==="moderada"?Ae:W,Qe=o=>o==="critica"?"text-red-900":o==="moderada"?"text-orange-900":"text-green-900",ge=o=>o==="critica"?"text-red-700":o==="moderada"?"text-orange-700":"text-green-700",Ye=o=>o==="critica"?"bg-red-100 text-red-700":o==="moderada"?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700",Je=o=>o==="critica"?"border-red-200":o==="moderada"?"border-orange-200":"border-green-200";return rt(()=>{x()}),(o,t)=>{var R,V,O,H;return a(),d("div",Io,[e("div",Bo,[e("div",Go,[f.value?(a(),d("div",Lo,t[1]||(t[1]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-2 border-primary border-t-transparent mx-auto mb-4"},null,-1),e("p",{class:"text-gray-600"},"Cargando resultados de la encuesta...",-1)]))):c.value?(a(),d("div",Vo,[r(n(Me),{class:"h-12 w-12 text-red-500 mx-auto mb-4"}),t[3]||(t[3]=e("h3",{class:"text-lg font-medium text-red-800 mb-2"},"Error al cargar los resultados",-1)),e("p",No,s(c.value),1),r(te,{onClick:x,variant:"outline"},{default:K(()=>[r(n(dt),{class:"h-4 w-4 mr-2"}),t[2]||(t[2]=E(" Reintentar "))]),_:1,__:[2]})])):g.value?(a(),d("div",Fo,[e("nav",Oo,[e("ol",Ho,[e("li",null,[e("button",{onClick:$,class:"text-gray-500 hover:text-gray-700 transition-colors duration-200"},[r(n(xt),{class:"h-5 w-5"})])]),e("li",null,[e("div",Uo,[r(n(re),{class:"h-5 w-5 text-gray-400 mr-4"}),t[4]||(t[4]=e("span",{class:"text-sm font-medium text-gray-500"},"Encuestas",-1))])]),e("li",null,[e("div",Ko,[r(n(re),{class:"h-5 w-5 text-gray-400 mr-4"}),e("span",Wo,s(g.value.titulo),1)])])])]),e("div",Zo,[e("div",Xo,[e("div",Qo,[e("div",Yo,[e("div",Jo,[e("div",{class:l(["flex items-center justify-center w-16 h-16 rounded-full",A(u.value).bgClass])},[r(n(Re),{class:l(["h-8 w-8",A(u.value).textClass])},null,8,["class"])],2),e("div",null,[t[5]||(t[5]=e("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide"},"√çndice de Bienestar",-1)),e("p",{class:l(["text-4xl font-bold",A(u.value).textClass])},s(u.value)+"% ",3)])]),t[8]||(t[8]=e("div",{class:"hidden md:block w-px h-16 bg-gray-200"},null,-1)),e("div",null,[t[6]||(t[6]=e("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2"},"Tendencia",-1)),e("div",{class:l(["inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-semibold",Fe(M.value)])},[(a(),N(se(Oe(M.value)),{class:"h-4 w-4"})),e("span",null,s(He(M.value)),1)],2)]),t[9]||(t[9]=e("div",{class:"hidden md:block w-px h-16 bg-gray-200"},null,-1)),e("div",null,[t[7]||(t[7]=e("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2"},"Alertas Activas",-1)),e("div",{class:l(["inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-bold",G.value.length===0?"bg-green-100 text-green-800":F.value.criticas>0?"bg-red-100 text-red-800":"bg-orange-100 text-orange-800"])},[r(n(ae),{class:"h-4 w-4"}),e("span",null,s(G.value.length),1)],2)])]),e("div",ea,[e("div",{class:l(["p-3 rounded-lg",A(u.value).bgLightClass])},[e("p",{class:l(["text-sm font-semibold mb-1",A(u.value).textDarkClass])}," Estado General ",2),e("p",{class:l(["text-sm",A(u.value).textDarkClass])},s(Ne(u.value)),3)],2)])])])]),e("div",ta,[e("div",sa,[e("div",oa,[e("div",aa,[e("h1",ra,s(g.value.titulo),1),G.value.length>0?(a(),d("div",{key:0,class:l(["inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-semibold",F.value.criticas>0?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"])},[r(n(ae),{class:"h-4 w-4"}),e("span",null,s(G.value.length)+" "+s(G.value.length===1?"alerta activa":"alertas activas"),1)],2)):S("",!0)]),e("div",na,[e("div",ia,[r(n(qe),{class:"h-4 w-4 mr-1"}),e("span",null,s(g.value.totalParticipantes)+" participantes",1)]),e("div",la,[r(n(pe),{class:"h-4 w-4 mr-1"}),e("span",null,s(Math.round(g.value.totalParticipantes/50*100))+"% tasa de participaci√≥n",1)]),e("div",da,[r(n(ct),{class:"h-4 w-4 mr-1"}),e("span",null,s(g.value.estado),1)])])]),e("div",ca,[r(te,{onClick:L,variant:"outline"},{default:K(()=>[r(n(vt),{class:"h-4 w-4 mr-2"}),t[10]||(t[10]=E(" Exportar "))]),_:1,__:[10]}),r(te,{onClick:Y,variant:"primary"},{default:K(()=>[r(n(de),{class:"h-4 w-4 mr-2"}),t[11]||(t[11]=E(" Crear Comunicado "))]),_:1,__:[11]})])])]),e("div",ua,[e("div",ma,[e("div",ga,[e("div",ba,[r(n(xe),{class:"h-6 w-6 text-white"})]),t[12]||(t[12]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Interpretaci√≥n General"),e("p",{class:"text-gray-600"},"An√°lisis autom√°tico del estado de bienestar del equipo")],-1))])]),e("div",pa,[e("div",xa,[e("div",va,[e("div",{class:l(["inline-flex items-center justify-center w-32 h-32 rounded-full mb-4",A(u.value).bgClass])},[e("div",fa,[e("div",{class:l(["text-4xl font-bold",A(u.value).textClass])},s(u.value)+"% ",3),e("div",{class:l(["text-xs font-medium mt-1",A(u.value).textClass])}," Bienestar Global ",2)])],2)]),e("div",ha,[e("div",{class:l(["p-6 rounded-xl border-2",A(u.value).borderClass+" "+A(u.value).bgLightClass])},[e("h3",{class:l(["text-lg font-semibold mb-3",A(u.value).textDarkClass])}," Estado General del Equipo ",2),e("p",{class:l(["text-base leading-relaxed",A(u.value).textDarkClass])},s(Ve(u.value)),3),e("div",{class:l(["mt-4 pt-4 border-t",A(u.value).borderClass])},[e("p",{class:l(["text-sm font-medium",A(u.value).textDarkClass])}," Basado en "+s(g.value.totalParticipantes)+" respuestas de "+s(((R=g.value.preguntas)==null?void 0:R.length)||0)+" preguntas ",3)],2)],2)])])])]),e("div",ya,[e("div",_a,[e("div",wa,[e("div",Ca,[r(n(me),{class:"h-6 w-6 text-white"})]),t[13]||(t[13]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Interpretaci√≥n por Categor√≠as"),e("p",{class:"text-gray-600"},"An√°lisis detallado de cada √°rea evaluada")],-1))])]),e("div",$a,[e("div",ka,[(a(!0),d(T,null,D(oe.value,(i,U)=>(a(),d("div",{key:U,class:l(["rounded-xl border-2 p-6 transition-all duration-200 hover:shadow-lg",i.colorClasses.borderClass+" "+i.colorClasses.bgLightClass])},[e("div",ja,[e("div",{class:l(["w-14 h-14 rounded-full flex items-center justify-center flex-shrink-0",i.colorClasses.bgClass])},[(a(),N(se(i.icon),{class:"h-7 w-7 text-white"}))],2),e("div",Ea,[e("h3",{class:l(["text-lg font-bold mb-1",i.colorClasses.textDarkClass])},s(i.nombre),3),e("div",Aa,[e("span",{class:l(["text-2xl font-bold",i.colorClasses.textClass])},s(i.valor)+"% ",3),e("span",{class:l(["text-sm px-2 py-1 rounded-full font-medium",i.colorClasses.badgeClass])},s(i.nivel),3)]),e("p",{class:l(["text-sm leading-relaxed",i.colorClasses.textDarkClass])},s(i.interpretacion),3)])])],2))),128))])])]),g.value.preguntas?(a(),d("div",Ra,[(a(!0),d(T,null,D(g.value.preguntas,(i,U)=>(a(),d("div",{key:i.id,class:"bg-white rounded-lg shadow-sm overflow-hidden"},[e("div",qa,[e("h3",Ma," Pregunta "+s(U+1)+": "+s(i.texto),1)]),e("div",Pa,[i.resultadosPorGrupo&&Le(i)?(a(),d("div",Sa,[r(n(X),{class:"h-5 w-5 flex-shrink-0 mt-0.5"}),t[14]||(t[14]=e("div",null,[e("p",{class:"font-medium"},"Protecci√≥n de Anonimato"),e("p",{class:"text-sm mt-1"},"No se muestran resultados de grupos con menos de 5 respuestas para preservar el anonimato.")],-1))])):S("",!0),e("div",Ta,[e("div",null,[t[15]||(t[15]=e("h4",{class:"text-md font-medium text-gray-900 mb-4"},"Distribuci√≥n de Respuestas",-1)),e("div",za,[e("div",Da,[e("canvas",{id:`chart-${i.id}`,class:"w-full h-full"},null,8,Ia)])])]),e("div",Ba,[e("div",null,[t[16]||(t[16]=e("h4",{class:"text-md font-medium text-gray-900 mb-3"},"An√°lisis del Resultado",-1)),e("div",Ga,[e("div",La,[r(n(xe),{class:"h-5 w-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),e("p",Va,s(i.insight),1)])])]),e("div",null,[t[19]||(t[19]=e("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Acci√≥n Recomendada",-1)),i.recomendacion?(a(),d("div",Na,[e("div",Fa,[e("div",Oa,[e("div",Ha,[r(n(ze),{class:"h-5 w-5 text-orange-600 mt-0.5 mr-3 flex-shrink-0"}),e("div",null,[e("h5",Ua,s(i.recomendacion.titulo),1),e("p",Ka,s(i.recomendacion.descripcion),1)])])]),r(te,{onClick:z=>w(i.recomendacion.id),class:"ml-4 flex-shrink-0"},{default:K(()=>[r(n(Se),{class:"h-4 w-4 mr-2"}),t[17]||(t[17]=E(" Solicitar Servicio "))]),_:2,__:[17]},1032,["onClick"])])])):(a(),d("div",Wa,[e("div",Za,[r(n(W),{class:"h-5 w-5 text-green-600 mr-3"}),t[18]||(t[18]=e("p",{class:"text-green-800 font-medium"},"¬°Excelente! No se requiere acci√≥n inmediata para esta √°rea.",-1))])]))]),e("div",null,[t[20]||(t[20]=e("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Estad√≠sticas Detalladas",-1)),e("div",Xa,[(a(!0),d(T,null,D(i.resultados.data,(z,ee)=>(a(),d("div",{key:ee,class:"flex items-center justify-between p-2 bg-gray-50 rounded"},[e("span",Qa,s(i.resultados.labels[ee]),1),e("div",Ya,[e("span",Ja,s(z)+" respuestas",1),e("span",er," ("+s(Math.round(z/g.value.totalParticipantes*100))+"%) ",1)])]))),128))])]),i.resultadosPorGrupo&&i.resultadosPorGrupo.length>0?(a(),d("div",tr,[t[22]||(t[22]=e("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Resultados por Departamento",-1)),e("div",sr,[(a(!0),d(T,null,D(i.resultadosPorGrupo,z=>(a(),d(T,{key:z.departamento},[z.total_respuestas>=5?(a(),d("div",or,[e("div",ar,[e("span",rr,s(z.departamento),1),e("span",nr,s(z.total_respuestas)+" respuestas",1)]),e("div",ir,[t[21]||(t[21]=E(" Promedio: ")),e("span",lr,s(z.promedio),1)])])):S("",!0)],64))),128))])])):S("",!0)])])])]))),128))])):S("",!0),r(js),e("div",dr,[e("div",cr,[t[24]||(t[24]=e("h2",{class:"text-xl font-semibold text-gray-900"},"Resumen Ejecutivo",-1)),e("button",{onClick:Z,class:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors shadow-sm hover:shadow-md"},[r(n(Pe),{class:"h-5 w-5"}),t[23]||(t[23]=E(" Comunicar resultados "))])]),e("div",ur,[e("div",mr,[e("p",gr,s(g.value.totalParticipantes),1),t[25]||(t[25]=e("p",{class:"text-sm text-blue-800"},"Total Participantes",-1))]),e("div",br,[e("p",pr,s(Math.round(g.value.totalParticipantes/50*100))+"%",1),t[26]||(t[26]=e("p",{class:"text-sm text-green-800"},"Tasa de Participaci√≥n",-1))]),e("div",xr,[e("p",vr,s(((V=g.value.preguntas)==null?void 0:V.length)||0),1),t[27]||(t[27]=e("p",{class:"text-sm text-purple-800"},"Preguntas Analizadas",-1))])])]),e("div",fr,[e("div",hr,[e("div",yr,[e("div",_r,[e("div",wr,[r(n(ae),{class:"h-6 w-6 text-white"})]),t[28]||(t[28]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Alertas de Bienestar"),e("p",{class:"text-gray-600"},"Prioridades de intervenci√≥n autom√°ticas")],-1))]),e("div",Cr,[e("div",{class:l(["text-3xl font-bold",F.value.criticas>0?"text-red-600":F.value.moderadas>0?"text-orange-600":"text-green-600"])},s(G.value.length),3),e("div",$r,s(G.value.length===0?"Sin alertas":G.value.length===1?"Alerta activa":"Alertas activas"),1)])])]),e("div",kr,[G.value.length===0?(a(),d("div",jr,[e("div",Er,[r(n(W),{class:"h-5 w-5 text-white"})]),t[29]||(t[29]=e("div",{class:"flex-1"},[e("p",{class:"font-semibold text-green-900"},"Todo estable"),e("p",{class:"text-green-700"},"No se requieren acciones urgentes. Todas las categor√≠as muestran niveles saludables.")],-1))])):(a(),d("div",Ar,[(a(!0),d(T,null,D(G.value,(i,U)=>(a(),d("div",{key:U,class:l(["rounded-lg p-4 shadow-sm flex items-start gap-3 text-sm transition-all duration-200 hover:shadow-md border cursor-pointer",[We(i.tipo),i.gestionada?"opacity-50":""]]),onClick:z=>Ue(i)},[e("div",{class:l(["w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",Ze(i.tipo)])},[(a(),N(se(i.gestionada?n(W):Xe(i.tipo)),{class:"h-5 w-5 text-white"}))],2),e("div",qr,[e("div",Mr,[e("h3",{class:l(["font-bold",Qe(i.tipo)])},[E(s(i.titulo)+" ",1),i.gestionada?(a(),d("span",Pr," (Gestionada ‚úì) ")):S("",!0)],2),e("span",{class:l(["text-xs font-semibold px-2 py-1 rounded-full whitespace-nowrap",Ye(i.tipo)])},s(i.tipo==="critica"?"Riesgo Alto":i.tipo==="moderada"?"Atenci√≥n Moderada":"Estable"),3)]),e("p",{class:l(["leading-relaxed",ge(i.tipo)])},s(i.mensaje),3),e("div",{class:l(["mt-2 pt-2 border-t",Je(i.tipo)])},[e("p",{class:l(["text-xs font-medium",ge(i.tipo)])}," Categor√≠a: "+s(i.categoria)+" ("+s(i.valor)+"%) ",3)],2)]),e("div",Sr,[r(n(re),{class:"h-5 w-5"})])],10,Rr))),128)),e("div",Tr,[e("div",zr,[e("div",Dr,[e("div",Ir,s(F.value.criticas),1),t[30]||(t[30]=e("div",{class:"text-sm text-red-800 font-medium"},"Alertas Cr√≠ticas",-1))]),e("div",Br,[e("div",Gr,s(F.value.moderadas),1),t[31]||(t[31]=e("div",{class:"text-sm text-orange-800 font-medium"},"Alertas Moderadas",-1))]),e("div",Lr,[e("div",Vr,s(F.value.estables),1),t[32]||(t[32]=e("div",{class:"text-sm text-green-800 font-medium"},"√Åreas Estables",-1))])])])]))])]),r(Do,{resultados:g.value.resultados},null,8,["resultados"])])):S("",!0)])]),r(Dt,{modelValue:j.value,"onUpdate:modelValue":t[0]||(t[0]=i=>j.value=i),alerta:I.value,onMarcarGestionado:Ke},null,8,["modelValue","alerta"]),r(mo,{"is-open":v.value,"nombre-encuesta":((O=g.value)==null?void 0:O.titulo)||"Encuesta","encuesta-id":((H=g.value)==null?void 0:H.id)||"",onClose:k,onComunicadoEnviado:p},null,8,["is-open","nombre-encuesta","encuesta-id"])])}}},an=ce(Nr,[["__scopeId","data-v-b9f0c2ce"]]);export{an as default};

import{d as c,B as x,f as k,h as r,j as a,t as l,F as b,y as v,b as h,U as w,D as C,o as t,E as R}from"./vue-vendor-DLSXyIw7.js";import{a as S,b as D}from"./colaboradores.service-CiAD4qAb.js";import{u as E}from"./reservas.store-Bqgv4IXB.js";import"./index-D33O_vwf.js";import"./supabase-B7V2753y.js";const B={class:"space-y-8"},I={key:0,class:"text-center py-12"},$={key:1},L={class:"flex items-center mb-8"},V=["src","alt"],j={class:"text-2xl text-primary"},F={class:"text-gray-600"},N={class:"space-y-6"},T={class:"text-lg font-semibold text-gray-700 border-b pb-2 mb-4"},z={class:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-3"},A=["onClick","disabled"],M={key:0,class:"text-center py-10 bg-gray-50 rounded-lg"},K={__name:"ReservarSesionView",setup(O){const f=w(),g=C(),y=E(),o=c(null),u=c([]),d=c(!0),p=x(()=>u.value.reduce((s,e)=>(s[e.fecha]||(s[e.fecha]=[]),s[e.fecha].push(e),s),{}));k(async()=>{const s=f.params.colaboradorId;d.value=!0;try{const[e,n]=await Promise.all([S(s),D(s)]);o.value=e,u.value=n}catch(e){console.error("Error al cargar la disponibilidad:",e)}finally{d.value=!1}});const _=async s=>{const e={id:s.id,titulo:`Sesión con ${o.value.nombre}`,fecha:s.fecha,hora:s.hora,especialista:o.value.nombre};confirm(`¿Confirmas tu reserva para el ${e.fecha} a las ${e.hora}?`)&&(await y.crearReserva(e),s.disponible=!1,alert("¡Tu sesión ha sido reservada con éxito!"),g.push("/empleado/dashboard"))};return(s,e)=>(t(),r("div",B,[d.value?(t(),r("div",I,e[0]||(e[0]=[a("p",null,"Cargando disponibilidad...",-1)]))):o.value?(t(),r("div",$,[a("div",L,[a("img",{src:o.value.foto,alt:o.value.nombre,class:"w-24 h-24 rounded-full mr-6"},null,8,V),a("div",null,[e[1]||(e[1]=a("h1",{class:"text-3xl font-bold text-gray-800"},"Reservar sesión con",-1)),a("h2",j,l(o.value.nombre),1),a("p",F,l(o.value.especialidad),1)])]),a("div",N,[(t(!0),r(b,null,v(p.value,(n,m)=>(t(),r("div",{key:m},[a("h3",T,l(new Date(m+"T00:00:00").toLocaleDateString("es-ES",{weekday:"long",day:"numeric",month:"long"})),1),a("div",z,[(t(!0),r(b,null,v(n,i=>(t(),r("button",{key:i.id,onClick:P=>_(i),disabled:!i.disponible,class:R(["p-2 border rounded-md text-center font-medium transition-colors duration-200",{"border-primary text-primary hover:bg-primary hover:text-white":i.disponible,"bg-gray-200 text-gray-400 cursor-not-allowed":!i.disponible}])},l(i.hora),11,A))),128))])]))),128)),Object.keys(p.value).length===0?(t(),r("div",M,e[2]||(e[2]=[a("p",{class:"text-gray-600"},"Este especialista no tiene huecos disponibles en los próximos 7 días.",-1)]))):h("",!0)])])):h("",!0)]))}};export{K as default};
